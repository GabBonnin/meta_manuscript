<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.8.26">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Gabriel Bonnin">

    <title>Mental Health Evaluation through Text Analysis</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      html { -webkit-text-size-adjust: 100%; }
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      /* CSS for citations */
      div.csl-bib-body { }
      div.csl-entry {
        clear: both;
        margin-bottom: 0em;
      }
      .hanging-indent div.csl-entry {
        margin-left:2em;
        text-indent:-2em;
      }
      div.csl-left-margin {
        min-width:2em;
        float:left;
      }
      div.csl-right-inline {
        margin-left:2em;
        padding-left:1em;
      }
      div.csl-indent {
        margin-left: 2em;
      }    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a74871fe4945b66d259aafc266475145.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
     <script async="" src="https://hypothes.is/embed.js"></script>  
      <meta name="citation_title" content="Mental Health Evaluation through Text Analysis">
<meta name="citation_author" content="Gabriel Bonnin">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Regression shrinkage and selection via the lasso;,citation_abstract=We propose a new method for estimation in linear models. The “lasso” minimizes the residual sum of squares subject to the sum of the absolute value of the coefficients being less than a constant. Because of the nature of this constraint it tends to produce some coefficients that are exactly 0 and hence gives interpretable models. Our simulation studies suggest that the lasso enjoys some of the favourable properties of both subset selection and ridge regression. It produces interpretable models like subset selection and exhibits the stability of ridge regression. There is also an interesting relationship with recent work in adaptive function estimation by Donoho and Johnstone. The lasso idea is quite general and can be applied in a variety of statistical models: extensions to generalized regression models and tree-based models are briefly described.;,citation_author=Robert Tibshirani;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;,citation_issue=1;,citation_doi=10.1111/j.2517-6161.1996.tb02080.x;,citation_issn=0035-9246;,citation_volume=58;,citation_journal_title=Journal of the Royal Statistical Society: Series B (Methodological);">
<meta name="citation_reference" content="citation_title=Latent dirichlet allocation;,citation_abstract=We describe latent Dirichlet allocation (LDA), a generative probabilistic model for collections of discrete data such as text corpora. LDA is a three-level hierarchical Bayesian model, in which each item of a collection is modeled as a finite mixture over an underlying set of topics. Each topic is, in turn, modeled as an infinite mixture over an underlying set of topic probabilities. In the context of text modeling, the topic probabilities provide an explicit representation of a document. We present efficient approximate inference techniques based on variational methods and an EM algorithm for empirical Bayes parameter estimation. We report results in document modeling, text classification, and collaborative filtering, comparing to a mixture of unigrams model and the probabilistic LSI model.;,citation_author=David M. Blei;,citation_author=Andrew Y. Ng;,citation_author=Michael I. Jordan;,citation_publication_date=2003-03;,citation_cover_date=2003-03;,citation_year=2003;,citation_issue=null;,citation_issn=1532-4435;,citation_volume=3;,citation_journal_title=Journal of Machine Learning Research;,citation_publisher=JMLR.org;">
<meta name="citation_reference" content="citation_title=Random decision forests;,citation_author=Tin Kam Ho;,citation_publication_date=1995;,citation_cover_date=1995;,citation_year=1995;,citation_doi=10.1109/ICDAR.1995.598994;,citation_volume=1;,citation_conference_title=Proceedings of 3rd international conference on document analysis and recognition;">
<meta name="citation_reference" content="citation_title=BDI-II: Beck Depression Inventory manual;,citation_author=A. T. Beck;,citation_author=R. A. Steer;,citation_author=G. K. Brown;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;">
<meta name="citation_reference" content="citation_title=How Happy Is Happy Enough? A Cross-Cultural Comparison of Optimal Cut Points for the Positive Mental Health Scale;,citation_author=Gabriel Bonnin;,citation_author=Gerrit Hirschfeld;,citation_author=Ruth Brachel;,citation_author=Jürgen Margraf;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_issue=0;,citation_volume=0;,citation_journal_title=European Journal of Psychological Assessment;">
<meta name="citation_reference" content="citation_title=Die Klassifikation psychischer Störungen mit diagnostischen Interviews;,citation_author=Gabriel Bonnin;,citation_author=Svea Kröber;,citation_author=Ruth Brachel;,citation_editor=Tobias Teismann;,citation_editor=Patrizia Thoma;,citation_editor=S. Taubner;,citation_editor=Andre Wannemüller;,citation_editor=K. Sydow;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_inbook_title=Klinische Psychologie und Psychotherapie: Ein verfahrensübergreifendes Lehr- und Lernbuch;">
<meta name="citation_reference" content="citation_title=Evidence-based treatments for children and adolescents: An updated review of indicators of efficacy and effectiveness;,citation_author=Bruce F Chorpita;,citation_author=Eric L Daleiden;,citation_author=Chad Ebesutani;,citation_author=John Young;,citation_author=Kimberly D Becker;,citation_author=Brad J Nakamura;,citation_author=Lisa Phillips;,citation_author=Alyssa Ward;,citation_author=Roxanna Lynch;,citation_author=Lindsay Trent;,citation_author=others;,citation_publication_date=2011;,citation_cover_date=2011;,citation_year=2011;,citation_issue=2;,citation_volume=18;,citation_journal_title=Clinical Psychology: Science and Practice;,citation_publisher=Wiley Online Library;">
<meta name="citation_reference" content="citation_title=BERT: Pre-training of deep bidirectional transformers for language understanding;,citation_abstract=We introduce a new language representation model called BERT, which stands for Bidirectional Encoder Representations from Transformers. Unlike recent language representation models (Peters et al., 2018a; Radford et al., 2018), BERT is designed to pre-train deep bidirectional representations from unlabeled text by jointly conditioning on both left and right context in all layers. As a result, the pre-trained BERT model can be fine-tuned with just one additional output layer to create state-of-the-art models for a wide range of tasks, such as question answering and language inference, without substantial task-specific architecture modifications. BERT is conceptually simple and empirically powerful. It obtains new state-of-the-art results on eleven natural language processing tasks, including pushing the GLUE score to 80.5 (7.7 point absolute improvement), MultiNLI accuracy to 86.7% (4.6% absolute improvement), SQuAD v1.1 question answering Test F1 to 93.2 (1.5 point absolute improvement) and SQuAD v2.0 Test F1 to 83.1 (5.1 point absolute improvement).;,citation_author=Jacob Devlin;,citation_author=Ming-Wei Chang;,citation_author=Kenton Lee;,citation_author=Kristina Toutanova;,citation_editor=Jill Burstein;,citation_editor=Christy Doran;,citation_editor=Thamar Solorio;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/N19-1423;,citation_conference_title=Proceedings of the 2019 conference of the north American chapter of the association for computational linguistics: Human language technologies, volume 1 (long and short papers);,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=BERTopic: Neural topic modeling with a class-based TF-IDF procedure;,citation_author=Maarten Grootendorst;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2203.05794;">
<meta name="citation_reference" content="citation_title=Natural language response formats for assessing depression and worry with large language models: A sequential evaluation with model pre-registration;,citation_author=Zhuojun Gu;,citation_author=Katarina Kjell;,citation_author=H. A Schwartz;,citation_author=Oscar N E Kjell;,citation_publication_date=2024-07;,citation_cover_date=2024-07;,citation_year=2024;,citation_doi=10.31234/osf.io/p67db;,citation_publisher=PsyArXiv;">
<meta name="citation_reference" content="citation_title=Natural Language Response Formats for Assessing Depression and Worry with Large Language Models: A Sequential Evaluation with Model Pre-registration;,citation_abstract=Large Language Models can transform individuals’ mental health descriptions into scores that correlate with rating scales approaching theoretical upper limits. However, such analyses have combined word- and text-responses with little known about their differences. We develop response formats ranging from closed-ended to open-ended: 1) select words from lists, write 2) descriptive words, 3) phrases, or 4) texts. Participants answered questions about their depression/worry using the response formats and related rating scales. Language responses were transformed into word embeddings and trained to rating scales. We compare the validity (concurrent, incremental, face, discriminant, and external validity) and reliability (prospective sample and test-retest reliability) of the response formats. Using the Sequential Evaluation with Model Pre-registration design, machine-learning models were trained on a development dataset (N=963), and then pre-registered before tested on a prospective sample (N=145). The pre-registered models demonstrate strong validity and reliability, yielding high accuracy in the prospective sample (r=.60–.79). Additionally, the models demonstrated external validity to self-reported sick-leave/healthcare visits, where the text-format yielded the strongest correlations (being higher/equal to rating scales for 9 of 12 cases). The overall high validity and reliability across formats suggest the possibility of choosing formats according to clinical needs.;,citation_author=Zhuojun Gu;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_author=Oscar Nils Erik Kjell;,citation_publication_date=2024-07;,citation_cover_date=2024-07;,citation_year=2024;,citation_doi=10.31234/osf.io/p67db;,citation_language=en-US;">
<meta name="citation_reference" content="citation_title=Ridge Regression: Biased Estimation for Nonorthogonal Problems;,citation_author=A. E. Hoerl;,citation_author=R. W. Kennard;,citation_publication_date=1970;,citation_cover_date=1970;,citation_year=1970;,citation_issue=1;,citation_doi=10.1080/00401706.1970.10488634;,citation_volume=12;,citation_journal_title=Technometrics;">
<meta name="citation_reference" content="citation_title=A blended learning course on the diagnostics of mental disorders: Multicenter cluster randomized noninferiority trial;,citation_abstract=Background: Clinical diagnoses determine if and how therapists treat their patients. As misdiagnoses can have severe adverse effects, disseminating evidence-based diagnostic skills into clinical practice is highly important. Objective: This study aimed to develop and evaluate a blended learning course in a multicenter cluster randomized controlled trial. Methods: Undergraduate psychology students (N=350) enrolled in 18 university courses at 3 universities. The courses were randomly assigned to blended learning or traditional synchronous teaching. The primary outcome was the participants’ performances in a clinical diagnostic interview after the courses. The secondary outcomes were diagnostic knowledge and participants’ reactions to the courses. All outcomes were analyzed on the individual participant level using noninferiority testing. Results: Compared with the synchronous course (74.6% pass rate), participation in the blended learning course (89% pass rate) increased the likelihood of successfully passing the behavioral test (odds ratio 2.77, 95% CI 1.55-5.13), indicating not only noninferiority but superiority of the blended learning course. Furthermore, superiority of the blended learning over the synchronous course could be found regarding diagnostic knowledge ($\beta$=.13, 95% CI 0.01-0.26), course clarity ($\beta$=.40, 95% CI 0.27-0.53), course structure ($\beta$=.18, 95% CI 0.04-0.32), and informativeness ($\beta$=.19, 95% CI 0.06-0.32). Conclusions: Blended learning can help to improve the diagnostic skills and knowledge of (future) clinicians and thus make an important contribution to improving mental health care. Trial Registration: ClinicalTrials.gov NCT05294094; https://clinicaltrials.gov/study/NCT05294094;,citation_author=Gabriel Bonnin;,citation_author=Svea Kröber;,citation_author=Silvia Schneider;,citation_author=Jürgen Margraf;,citation_author=Verena Pflug;,citation_author=Alexander L Gerlach;,citation_author=Timo Slotta;,citation_author=Hanna Christiansen;,citation_author=Björn Albrecht;,citation_author=Mira-Lynn Chavanon;,citation_author=Gerrit Hirschfeld;,citation_author=Tina In-Albon;,citation_author=Meinald T Thielsch;,citation_author=Ruth Brachel;,citation_publication_date=2024-11;,citation_cover_date=2024-11;,citation_year=2024;,citation_doi=10.2196/54176;,citation_issn=1438-8871;,citation_volume=26;,citation_journal_title=Journal of medical Internet research;">
<meta name="citation_reference" content="citation_title=Diagnostic agreement predicts treatment process and outcomes in youth mental health clinics;,citation_abstract=Several studies have documented low rates of agreement between clinician- and researcher-generated diagnoses. However, little is known about whether this lack of agreement has implications for the processes and outcomes of subsequent treatment. To study this possibility, the authors used diagnostic agreement to predict therapy engagement and outcomes for 197 youths treated in 5 community mental health clinics. Diagnostic agreement predicted better therapy engagement, with the agree group having fewer therapy no-shows and cancellations and a decreased likelihood of therapy dropout. Additionally, support for a link between agreement and treatment outcomes was found, as the agree group obtained larger reductions in parent-reported internalizing problems during treatment. These findings suggest that diagnostic accuracy may be an important precursor to successful treatment and highlight the importance of future research to find ways to incorporate standardized diagnostic procedures into clinical care settings. (PsycInfo Database Record (c) 2021 APA, all rights reserved);,citation_author=Amanda Jensen-Doss;,citation_author=John R. Weisz;,citation_publication_date=2008;,citation_cover_date=2008;,citation_year=2008;,citation_issue=5;,citation_doi=10.1037/0022-006X.76.5.711;,citation_issn=1939-2117;,citation_volume=76;,citation_journal_title=Journal of Consulting and Clinical Psychology;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=The global landscape of AI ethics guidelines;,citation_author=Anna Jobin;,citation_author=Marcello Ienca;,citation_author=Effy Vayena;,citation_publication_date=2019-09;,citation_cover_date=2019-09;,citation_year=2019;,citation_issue=9;,citation_doi=10.1038/s42256-019-0088-2;,citation_issn=2522-5839;,citation_volume=1;,citation_language=en-US;,citation_journal_title=Nature Machine Intelligence;">
<meta name="citation_reference" content="citation_title=Demonstrating high validity of a new AI-language assessment of PTSD: A sequential evaluation with model pre-registration;,citation_author=Oscar N E Kjell;,citation_author=Adithya V Ganesan;,citation_author=Ryan Boyd;,citation_author=Joshua R Oltmanns;,citation_author=Alfredo Rivero;,citation_author=Scott Feltman;,citation_author=Melissa A Carr;,citation_author=Benjamin J Luft;,citation_author=Roman Kotov;,citation_author=H. A Schwartz;,citation_publication_date=2024-10;,citation_cover_date=2024-10;,citation_year=2024;,citation_doi=10.31234/osf.io/xw24e;,citation_publisher=PsyArXiv;">
<meta name="citation_reference" content="citation_title=Semantic measures: Using natural language processing to measure, differentiate, and describe psychological constructs.;,citation_author=Oscar N. E. Kjell;,citation_author=Katarina Kjell;,citation_author=Danilo Garcia;,citation_author=Sverker Sikström;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_issue=1;,citation_doi=10.1037/met0000191;,citation_volume=24;,citation_journal_title=Psychological Methods;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=Natural language analyzed with AI-based transformers predict traditional subjective well-being measures approaching the theoretical upper limits in accuracy;,citation_abstract=Abstract We show that using a recent break-through in artificial intelligence – transformers– , psychological assessments from text-responses can approach theoretical upper limits in accuracy, converging with standard psychological rating scales. Text-responses use people’s primary form of communication – natural language – and have been suggested as a more ecologically-valid response format than closed-ended rating scales that dominate social science. However, previous language analysis techniques left a gap between how accurately they converged with standard rating scales and how well ratings scales converge with themselves – a theoretical upper-limit in accuracy. Most recently, AI-based language analysis has gone through a transformation as nearly all of its applications, from Web search to personalized assistants (e.g., Alexa and Siri), have shown unprecedented improvement by using transformers. We evaluate transformers for estimating psychological well-being from questionnaire text- and descriptive word-responses, and find accuracies converging with rating scales that approach the theoretical upper limits (Pearson r  =&nbsp;0.85, p  $&amp;amp;amp;lt;$ 0.001, N  = 608; in line with most metrics of rating scale reliability). These findings suggest an avenue for modernizing the ubiquitous questionnaire and ultimately opening doors to a greater understanding of the human condition.;,citation_author=Oscar N. E. Kjell;,citation_author=Sverker Sikström;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_publication_date=2022-03;,citation_cover_date=2022-03;,citation_year=2022;,citation_issue=1;,citation_doi=10.1038/s41598-022-07520-w;,citation_issn=2045-2322;,citation_volume=12;,citation_language=en-US;,citation_journal_title=Scientific Reports;">
<meta name="citation_reference" content="citation_title=The text-package: An R-package for analyzing and visualizing human language using natural language processing and transformers.;,citation_abstract=The language that individuals use for expressing themselves contains rich psychological information. Recent significant advances in Natural Language Processing (NLP) and Deep Learning (DL), namely transformers, have resulted in large performance gains in tasks related to understanding natural language. However, these state-of-the-art methods have not yet been made easily accessible for psychology researchers, nor designed to be optimal for human-level analyses. This tutorial introduces text (https://r-text.org/), a new R-package for analyzing and visualizing human language using transformers, the latest techniques from NLP and DL. The text-package is both a modular solution for accessing state-of-the-art language models and an end-to-end solution catered for human-level analyses. Hence, text provides user-friendly functions tailored to test hypotheses in social sciences for both relatively small and large data sets. The tutorial describes methods for analyzing text, providing functions with reliable defaults that can be used off-the-shelf as well as providing a framework for the advanced users to build on for novel pipelines. The reader learns about three core methods: (1) textEmbed(): to transform text to modern transformer-based word embeddings; (2) textTrain() and textPredict(): to train predictive models with embeddings as input, and use the models to predict from; (3) textSimilarity() and textDistance(): to compute semantic similarity/distance scores between texts. The reader also learns about two extended methods: (1) textProjection()/textProjectionPlot() and (2) textCentrality()/ textCentralityPlot(): to examine and visualize text within the embedding space.;,citation_author=Oscar Kjell;,citation_author=Salvatore Giorgi;,citation_author=H. Andrew Schwartz;,citation_publication_date=2023-12;,citation_cover_date=2023-12;,citation_year=2023;,citation_issue=6;,citation_doi=10.1037/met0000542;,citation_issn=1939-1463, 1082-989X;,citation_volume=28;,citation_language=en-US;,citation_journal_title=Psychological Methods;">
<meta name="citation_reference" content="citation_title=Beyond rating scales: With targeted evaluation, large language models are poised for psychological assessment;,citation_abstract=In this narrative review, we survey recent empirical evaluations of AI-based language assessments and present a case for the technology of large language models to be poised for changing standardized psychological assess ment. Artificial intelligence has been undergoing a purported “paradigm shift” initiated by new machine learning models, large language models (e.g., BERT, LAMMA, and that behind ChatGPT). These models have led to un precedented accuracy over most computerized language processing tasks, from web searches to automatic ma chine translation and question answering, while their dialogue-based forms, like ChatGPT have captured the interest of over a million users. The success of the large language model is mostly attributed to its capability to numerically represent words in their context, long a weakness of previous attempts to automate psychological assessment from language. While potential applications for automated therapy are beginning to be studied on the heels of chatGPT’s success, here we present evidence that suggests, with thorough validation of targeted deployment scenarios, that AI’s newest technology can move mental health assessment away from rating scales and to instead use how people naturally communicate, in language.;,citation_author=Oscar N. E. Kjell;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_publication_date=2024-03;,citation_cover_date=2024-03;,citation_year=2024;,citation_doi=10.1016/j.psychres.2023.115667;,citation_issn=01651781;,citation_volume=333;,citation_language=en-US;,citation_journal_title=Psychiatry Research;">
<meta name="citation_reference" content="citation_title=Client-identified outcomes of individual psychotherapy: A qualitative meta-analysis;,citation_abstract=Background Psychotherapy outcomes are typically measured in terms of symptom relief. However, this method might overlook important changes from clients’ perspectives when they are asked to report on them. A more client-centred approach might bring a deeper understanding of psychotherapy outcomes. We aimed to evaluate the outcomes identified by clients within qualitative psychotherapy research.;,citation_author=Michaela Ladmanová;,citation_author=Tomáš Řiháček;,citation_author=Ladislav Timulak;,citation_author=Klára Jonášová;,citation_author=Barbora Kubantová;,citation_author=Petr Mikoška;,citation_author=Lucia Polakovská;,citation_author=Robert Elliott;,citation_publication_date=2025-01;,citation_cover_date=2025-01;,citation_year=2025;,citation_issue=1;,citation_doi=10.1016/S2215-0366(24)00356-0;,citation_issn=22150366;,citation_volume=12;,citation_language=en-US;,citation_journal_title=The Lancet Psychiatry;">
<meta name="citation_reference" content="citation_title=TrOCR: Transformer-based optical character recognition with pre-trained models;,citation_author=Minghao Li;,citation_author=Tengchao Lv;,citation_author=Jingye Chen;,citation_author=Lei Cui;,citation_author=Yijuan Lu;,citation_author=Dinei Florencio;,citation_author=Cha Zhang;,citation_author=Zhoujun Li;,citation_author=Furu Wei;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2109.10282;">
<meta name="citation_reference" content="citation_title=A technique for the measurement of attitudes;,citation_author=R. Likert;,citation_publication_date=1932;,citation_cover_date=1932;,citation_year=1932;,citation_issue=55;,citation_volume=140;,citation_journal_title=Arch. Psychol.;,citation_series_title=22th series;">
<meta name="citation_reference" content="citation_title=Measurement-Based and Data-Informed Psychological Therapy;,citation_abstract=Outcome measurement in the field of psychotherapy has developed considerably in the last decade. This review discusses key issues related to outcome measurement, modeling, and implementation of data-informed and measurement-based psychological therapy. First, an overview is provided, covering the rationale of outcome measurement by acknowledging some of the limitations of clinical judgment. Second, different models of outcome measurement are discussed, including pre–post, session-by-session, and higher-resolution intensive outcome assessments. Third, important concepts related to modeling patterns of change are addressed, including early response, dose–response, and nonlinear change. Furthermore, rational and empirical decision tools are discussed as the foundation for measurementbased therapy. Fourth, examples of clinical applications are presented, which show great promise to support the personalization of therapy and to prevent treatment failure. Finally, we build on continuous outcome measurement as the basis for a broader understanding of clinical concepts and data-driven clinical practice in the future.;,citation_author=Wolfgang Lutz;,citation_author=Brian Schwartz;,citation_author=Jaime Delgadillo;,citation_publication_date=2022-05;,citation_cover_date=2022-05;,citation_year=2022;,citation_issue=1;,citation_doi=10.1146/annurev-clinpsy-071720-014821;,citation_issn=1548-5943, 1548-5951;,citation_volume=18;,citation_language=en-US;,citation_journal_title=Annual Review of Clinical Psychology;">
<meta name="citation_reference" content="citation_title=Suicide risk assessment with multi-level dual-context language and BERT;,citation_abstract=Mental health predictive systems typically model language as if from a single context (e.g. Twitter posts, status updates, or forum posts) and often limited to a single level of analysis (e.g. either the message-level or user-level). Here, we bring these pieces together to explore the use of open-vocabulary (BERT embeddings, topics) and theoretical features (emotional expression lexica, personality) for the task of suicide risk assessment on support forums (the CLPsych-2019 Shared Task). We used dual context based approaches (modeling content from suicide forums separate from other content), built over both traditional ML models as well as a novel dual RNN architecture with user-factor adaptation. We find that while affect from the suicide context distinguishes with no-risk from those with “any-risk”, personality factors from the non-suicide contexts provide distinction of the levels of risk: low, medium, and high risk. Within the shared task, our dual-context approach (listed as SBU-HLAB in the official results) achieved state-of-the-art performance predicting suicide risk using a combination of suicide-context and non-suicide posts (Task B), achieving an F1 score of 0.50 over hidden test set labels.;,citation_author=Matthew Matero;,citation_author=Akash Idnani;,citation_author=Youngseo Son;,citation_author=Salvatore Giorgi;,citation_author=Huy Vu;,citation_author=Mohammad Zamani;,citation_author=Parth Limbachiya;,citation_author=Sharath Chandra Guntuku;,citation_author=H. Andrew Schwartz;,citation_editor=Kate Niederhoffer;,citation_editor=Kristy Hollingshead;,citation_editor=Philip Resnik;,citation_editor=Rebecca Resnik;,citation_editor=Kate Loveys;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/W19-3005;,citation_conference_title=Proceedings of the sixth workshop on computational linguistics and clinical psychology;,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=CLaC at CLPsych 2019: Fusion of neural features and predicted class probabilities for suicide risk assessment based on online posts;,citation_abstract=This paper summarizes our participation to the CLPsych 2019 shared task, under the name CLaC. The goal of the shared task was to detect and assess suicide risk based on a collection of online posts. For our participation, we used an ensemble method which utilizes 8 neural sub-models to extract neural features and predict class probabilities, which are then used by an SVM classifier. Our team ranked first in 2 out of the 3 tasks (tasks A and C).;,citation_author=Elham Mohammadi;,citation_author=Hessam Amini;,citation_author=Leila Kosseim;,citation_editor=Kate Niederhoffer;,citation_editor=Kristy Hollingshead;,citation_editor=Philip Resnik;,citation_editor=Rebecca Resnik;,citation_editor=Kate Loveys;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/W19-3004;,citation_conference_title=Proceedings of the sixth workshop on computational linguistics and clinical psychology;,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=Robust Speech Recognition via Large-Scale Weak Supervision;,citation_abstract=We study the capabilities of speech processing systems trained simply to predict large amounts of transcripts of audio on the internet. When scaled to 680,000 hours of multilingual and multitask supervision, the resulting models generalize well to standard benchmarks and are often competitive with prior fully supervised results without the need for any dataset specific fine-tuning. When compared to humans, the models approach their accuracy and robustness. We are releasing models and inference code to serve as a foundation for further work on robust speech processing.;,citation_author=Alec Radford;,citation_author=Jong Wook Kim;,citation_author=Tao Xu;,citation_author=Greg Brockman;,citation_author=Christine McLeavey;,citation_author=Ilya Sutskever;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2212.04356;,citation_language=en-US;,citation_journal_title=arXiv preprint arXiv: 2212.04356;">
<meta name="citation_reference" content="citation_title=Sentence-BERT: Sentence embeddings using siamese BERT-networks;,citation_author=Nils Reimers;,citation_author=Iryna Gurevych;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://arxiv.org/abs/1908.10084;">
<meta name="citation_reference" content="citation_title=Attention is All you Need;,citation_abstract=The dominant sequence transduction models are based on complex recurrent orconvolutional neural networks in an encoder and decoder configuration. The best performing such models also connect the encoder and decoder through an attentionm echanisms. We propose a novel, simple network architecture based solely onan attention mechanism, dispensing with recurrence and convolutions entirely.Experiments on two machine translation tasks show these models to be superiorin quality while being more parallelizable and requiring significantly less timeto train. Our single model with 165 million parameters, achieves 27.5 BLEU onEnglish-to-German translation, improving over the existing best ensemble result by over 1 BLEU. On English-to-French translation, we outperform the previoussingle state-of-the-art with model by 0.7 BLEU, achieving a BLEU score of 41.1.;,citation_author=Ashish Vaswani;,citation_author=Noam Shazeer;,citation_author=Niki Parmar;,citation_author=Jakob Uszkoreit;,citation_author=Llion Jones;,citation_author=Aidan N Gomez;,citation_author=L. Kaiser;,citation_author=Illia Polosukhin;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_volume=30;,citation_conference_title=Advances in Neural Information Processing Systems;,citation_conference=Curran Associates, Inc.;">
<meta name="citation_reference" content="citation_title=The great psychotherapy debate: The evidence for what makes psychotherapy work;,citation_author=Bruce E Wampold;,citation_author=Zac E Imel;,citation_publication_date=2015;,citation_cover_date=2015;,citation_year=2015;">
<meta name="citation_reference" content="citation_title=Smarter, better, faster, longer: A modern bidirectional encoder for fast, memory efficient, and long context finetuning and inference;,citation_author=Benjamin Warner;,citation_author=Antoine Chaffin;,citation_author=Benjamin Clavié;,citation_author=Orion Weller;,citation_author=Oskar Hallström;,citation_author=Said Taghadouini;,citation_author=Alexis Gallagher;,citation_author=Raja Biswas;,citation_author=Faisal Ladhak;,citation_author=Tom Aarsen;,citation_author=Nathan Cooper;,citation_author=Griffin Adams;,citation_author=Jeremy Howard;,citation_author=Iacopo Poli;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://arxiv.org/abs/2412.13663;">
<meta name="citation_reference" content="citation_title=Depression and other common mental disorders: Global health estimates;,citation_author=World Health Organization;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;">
<meta name="citation_reference" content="citation_title=International Classification of Diseases, Eleventh Revision (ICD-11);,citation_author=World Health Organization;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=CLPsych 2019 shared task: Predicting the degree of suicide risk in Reddit posts;,citation_abstract=The shared task for the 2019 Workshop on Computational Linguistics and Clinical Psychology (CLPsych‘19) introduced an assessment of suicide risk based on social media postings, using data from Reddit to identify users at no, low, moderate, or severe risk. Two variations of the task focused on users whose posts to the r/SuicideWatch subreddit indicated they might be at risk; a third task looked at screening users based only on their more everyday (non-SuicideWatch) posts. We received submissions from 15 different teams, and the results provide progress and insight into the value of language signal in helping to predict risk level.;,citation_author=Ayah Zirikly;,citation_author=Philip Resnik;,citation_author=Özlem Uzuner;,citation_author=Kristy Hollingshead;,citation_editor=Kate Niederhoffer;,citation_editor=Kristy Hollingshead;,citation_editor=Philip Resnik;,citation_editor=Rebecca Resnik;,citation_editor=Kate Loveys;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/W19-3003;,citation_conference_title=Proceedings of the sixth workshop on computational linguistics and clinical psychology;,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=DIPS open access 1.2: Diagnostisches interview bei psychischen störungen;,citation_author=Jürgen Margraf;,citation_author=Jan Christopher Cwik;,citation_author=Ruth Brachel;,citation_author=Andrea Suppiger;,citation_author=Silvia Schneider;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=http://dx.doi.org/10.46586/rub.172.149;,citation_doi=10.46586/rub.172.149;">
<meta name="citation_reference" content="citation_title=Messung des Therapieerfolgs;,citation_author=Johannes Michalak;,citation_author=Joachim Kosfelder;,citation_author=Frank Meyer;,citation_author=Dietmar Schulte;,citation_publication_date=2003-04;,citation_cover_date=2003-04;,citation_year=2003;,citation_fulltext_html_url=https://econtent.hogrefe.com/doi/10.1026/0084-5345.32.2.94;,citation_issue=2;,citation_doi=10.1026/0084-5345.32.2.94;,citation_volume=32;,citation_language=de;,citation_journal_title=Zeitschrift für Klinische Psychologie und Psychotherapie;">
<meta name="citation_reference" content="citation_title=The structure of negative emotional states: Comparison of the Depression Anxiety Stress Scales (DASS) with the Beck Depression and Anxiety Inventories;,citation_author=P. F. Lovibond;,citation_author=S. H. Lovibond;,citation_publication_date=1995-03;,citation_cover_date=1995-03;,citation_year=1995;,citation_fulltext_html_url=http://dx.doi.org/10.1016/0005-7967(94)00075-u;,citation_issue=3;,citation_doi=10.1016/0005-7967(94)00075-u;,citation_volume=33;,citation_language=en;,citation_journal_title=Behaviour Research and Therapy;">
<meta name="citation_reference" content="citation_title=Franke, g.h. (2000). BSI. Brief symptom inventory - deutsche version. Manual. Göttingen: beltz.;,citation_author=Gabriele Franke;,citation_publication_date=2002-01;,citation_cover_date=2002-01;,citation_year=2002;">
<meta name="citation_reference" content="citation_title=Goal attainment scaling: A general method for evaluating comprehensive community mental health programs;,citation_author=Thomas J. Kiresuk;,citation_author=Robert E. Sherman;,citation_publication_date=1968-12;,citation_cover_date=1968-12;,citation_year=1968;,citation_fulltext_html_url=http://link.springer.com/10.1007/BF01530764;,citation_issue=6;,citation_doi=10.1007/BF01530764;,citation_volume=4;,citation_language=en;,citation_journal_title=Community Mental Health Journal;">
<meta name="citation_reference" content="citation_title=Psychometric properties of the positive mental health scale (PMH-scale);,citation_author=Justina Lukat;,citation_author=Jürgen Margraf;,citation_author=Rainer Lutz;,citation_author=William M. Veld;,citation_author=Eni S. Becker;,citation_publication_date=2016-02-10;,citation_cover_date=2016-02-10;,citation_year=2016;,citation_fulltext_html_url=https://doi.org/10.1186/s40359-016-0111-x;,citation_issue=1;,citation_doi=10.1186/s40359-016-0111-x;,citation_volume=4;,citation_journal_title=BMC Psychology;">
<meta name="citation_reference" content="citation_title=Die deutsche Version des Childhood Trauma Questionnaire (CTQ): Erste Befunde zu den psychometrischen Kennwerten;,citation_author=Katja Wingenfeld;,citation_author=Carsten Spitzer;,citation_author=Christoph Mensebach;,citation_author=Hans Grabe;,citation_author=Andreas Hill;,citation_author=Ursula Gast;,citation_author=Nicole Schlosser;,citation_author=Hella Höpp;,citation_author=Thomas Beblo;,citation_author=Martin Driessen;,citation_publication_date=2010-04-01;,citation_cover_date=2010-04-01;,citation_year=2010;,citation_fulltext_html_url=http://dx.doi.org/10.1055/s-0030-1253494;,citation_issue=08;,citation_doi=10.1055/s-0030-1253494;,citation_volume=60;,citation_language=de;,citation_journal_title=PPmP - Psychotherapie · Psychosomatik · Medizinische Psychologie;">
<meta name="citation_reference" content="citation_title=Development and validation of a brief screening version of the Childhood Trauma Questionnaire;,citation_author=David P Bernstein;,citation_author=Judith A Stein;,citation_author=Michael D Newcomb;,citation_author=Edward Walker;,citation_author=David Pogge;,citation_author=Taruna Ahluvalia;,citation_author=John Stokes;,citation_author=Leonard Handelsman;,citation_author=Martha Medrano;,citation_author=David Desmond;,citation_author=William Zule;,citation_publication_date=2003-02;,citation_cover_date=2003-02;,citation_year=2003;,citation_fulltext_html_url=http://dx.doi.org/10.1016/S0145-2134(02)00541-0;,citation_issue=2;,citation_doi=10.1016/s0145-2134(02)00541-0;,citation_volume=27;,citation_language=en;,citation_journal_title=Child Abuse &amp;amp;amp; Neglect;">
<meta name="citation_reference" content="citation_title=A mathematical theory of communication;,citation_author=Claude E Shannon;,citation_publication_date=1948;,citation_cover_date=1948;,citation_year=1948;,citation_issue=3;,citation_volume=27;,citation_journal_title=The Bell system technical journal;">
<meta name="citation_reference" content="citation_title=Facebook language predicts depression in medical records;,citation_author=Johannes C. Eichstaedt;,citation_author=Robert J. Smith;,citation_author=Raina M. Merchant;,citation_author=Lyle H. Ungar;,citation_author=Patrick Crutchley;,citation_author=Daniel Preoţiuc-Pietro;,citation_author=David A. Asch;,citation_author=H. Andrew Schwartz;,citation_publication_date=2018-10-15;,citation_cover_date=2018-10-15;,citation_year=2018;,citation_fulltext_html_url=http://dx.doi.org/10.1073/pnas.1802331115;,citation_issue=44;,citation_doi=10.1073/pnas.1802331115;,citation_volume=115;,citation_language=en;,citation_journal_title=Proceedings of the National Academy of Sciences;">
<meta name="citation_reference" content="citation_title=How do you feel? Using natural language processing to automatically rate emotion in psychotherapy;,citation_author=Michael J. Tanana;,citation_author=Christina S. Soma;,citation_author=Patty B. Kuo;,citation_author=Nicolas M. Bertagnolli;,citation_author=Aaron Dembe;,citation_author=Brian T. Pace;,citation_author=Vivek Srikumar;,citation_author=David C. Atkins;,citation_author=Zac E. Imel;,citation_publication_date=2021-03-22;,citation_cover_date=2021-03-22;,citation_year=2021;,citation_fulltext_html_url=http://dx.doi.org/10.3758/s13428-020-01531-z;,citation_issue=5;,citation_doi=10.3758/s13428-020-01531-z;,citation_volume=53;,citation_language=en;,citation_journal_title=Behavior Research Methods;">
<meta name="citation_reference" content="citation_title=Decoding emotions: Exploring the validity of sentiment analysis in psychotherapy;,citation_author=Steffen T. Eberhardt;,citation_author=Jana Schaffrath;,citation_author=Danilo Moggia;,citation_author=Brian Schwartz;,citation_author=Martin Jaehde;,citation_author=Julian A. Rubel;,citation_author=Tobias Baur;,citation_author=Elisabeth André;,citation_author=Wolfgang Lutz;,citation_publication_date=2024-02-28;,citation_cover_date=2024-02-28;,citation_year=2024;,citation_fulltext_html_url=http://dx.doi.org/10.1080/10503307.2024.2322522;,citation_issue=2;,citation_doi=10.1080/10503307.2024.2322522;,citation_volume=35;,citation_language=en;,citation_journal_title=Psychotherapy Research;">
<meta name="citation_reference" content="citation_title=Natural Language Response Formats for Assessing Depression and Worry With Large Language Models: A Sequential Evaluation With Model Pre-Registration;,citation_author=Zhuojun Gu;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_author=Oscar Kjell;,citation_publication_date=2025-09-20;,citation_cover_date=2025-09-20;,citation_year=2025;,citation_fulltext_html_url=http://dx.doi.org/10.1177/10731911251364022;,citation_doi=10.1177/10731911251364022;,citation_language=en;,citation_journal_title=Assessment;">
<meta name="citation_reference" content="citation_title=Natural Language Response Formats for Assessing Depression and Worry With Large Language Models: A Sequential Evaluation With Model Pre-Registration;,citation_author=Zhuojun Gu;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_author=Oscar Kjell;,citation_publication_date=2025-09-20;,citation_cover_date=2025-09-20;,citation_year=2025;,citation_fulltext_html_url=http://dx.doi.org/10.1177/10731911251364022;,citation_doi=10.1177/10731911251364022;,citation_language=en;,citation_journal_title=Assessment;">
</head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Article Notebook</h6>

            <a href="./meta_adult_manuscript.qmd" class="btn btn-primary quarto-download-embed" download="meta_adult_manuscript.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Mental Health Evaluation through Text Analysis</h1>
            <p class="subtitle lead">umbrella project documentation</p>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Gabriel Bonnin <a href="mailto:gabriel.bonnin@ruhr-uni-bochum.de" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Ruhr University Bochum, Germany
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#shared-methods" id="toc-shared-methods" class="nav-link" data-scroll-target="#shared-methods">Shared Methods</a>
  <ul class="collapse">
  <li><a href="#measures" id="toc-measures" class="nav-link" data-scroll-target="#measures">Measures</a>
  <ul class="collapse">
  <li><a href="#sociodemographic-and-context-measures" id="toc-sociodemographic-and-context-measures" class="nav-link" data-scroll-target="#sociodemographic-and-context-measures">Sociodemographic and context measures</a></li>
  <li><a href="#responses-from-open-ended-questions-before-therapy" id="toc-responses-from-open-ended-questions-before-therapy" class="nav-link" data-scroll-target="#responses-from-open-ended-questions-before-therapy">Responses from open-ended questions before therapy</a></li>
  <li><a href="#psychometric-measures" id="toc-psychometric-measures" class="nav-link" data-scroll-target="#psychometric-measures">Psychometric measures</a></li>
  <li><a href="#global-improvement" id="toc-global-improvement" class="nav-link" data-scroll-target="#global-improvement">Global Improvement</a></li>
  <li><a href="#goal-attainment-scale" id="toc-goal-attainment-scale" class="nav-link" data-scroll-target="#goal-attainment-scale">Goal Attainment Scale</a></li>
  </ul></li>
  <li><a href="#measurement-time-points" id="toc-measurement-time-points" class="nav-link" data-scroll-target="#measurement-time-points">Measurement time points</a></li>
  <li><a href="#preprocessing" id="toc-preprocessing" class="nav-link" data-scroll-target="#preprocessing">Preprocessing</a></li>
  <li><a href="#shared-analytic-framework" id="toc-shared-analytic-framework" class="nav-link" data-scroll-target="#shared-analytic-framework">Shared analytic framework</a></li>
  </ul></li>
  <li><a href="#preliminary-results" id="toc-preliminary-results" class="nav-link" data-scroll-target="#preliminary-results">Preliminary results</a>
  <ul class="collapse">
  <li><a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics">Descriptive statistics</a>
  <ul class="collapse">
  <li><a href="#demographics-and-context-factors" id="toc-demographics-and-context-factors" class="nav-link" data-scroll-target="#demographics-and-context-factors">Demographics and context factors</a></li>
  <li><a href="#textual-data" id="toc-textual-data" class="nav-link" data-scroll-target="#textual-data">Textual data</a></li>
  <li><a href="#diagnosis-1" id="toc-diagnosis-1" class="nav-link" data-scroll-target="#diagnosis-1">Diagnosis</a></li>
  <li><a href="#psychometric-measures-1" id="toc-psychometric-measures-1" class="nav-link" data-scroll-target="#psychometric-measures-1">psychometric measures</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#research-areas" id="toc-research-areas" class="nav-link" data-scroll-target="#research-areas">Research areas</a>
  <ul class="collapse">
  <li><a href="#research-area-1-language-as-clinical-assessment-cross-sectional" id="toc-research-area-1-language-as-clinical-assessment-cross-sectional" class="nav-link" data-scroll-target="#research-area-1-language-as-clinical-assessment-cross-sectional">Research area 1: Language as clinical assessment (cross-sectional)</a></li>
  <li><a href="#research-area-2-patient-narratives-and-themes" id="toc-research-area-2-patient-narratives-and-themes" class="nav-link" data-scroll-target="#research-area-2-patient-narratives-and-themes">Research area 2: Patient narratives and themes</a></li>
  <li><a href="#research-area-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction" id="toc-research-area-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction" class="nav-link" data-scroll-target="#research-area-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction">Research area 3: Predicting treatment response and goal attainment (longitudinal prediction)</a></li>
  <li><a href="#research-area-4-prompt-based-llms-for-interpretable-language-assessment" id="toc-research-area-4-prompt-based-llms-for-interpretable-language-assessment" class="nav-link" data-scroll-target="#research-area-4-prompt-based-llms-for-interpretable-language-assessment">Research area 4: Prompt-based LLMs for interpretable language assessment</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="reports/Logo_RUBRS.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="reports/Logo_RUBRS.svg" class="img-fluid" width="180"></a></p>
<p>This project is supported by the <a href="https://www.research-school.rub.de">Ruhr University Bochum Research School</a>.</p>
</div>
</div>
<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>Psychotherapy is one of the most effective treatments for mental health problems, but its success depends on accurate diagnostic assessments. Current assessment practices largely rely on standardized closed-ended scales that, while reliable, may fail to capture the complexity, context and individuality of patients’ mental states. Advances in artificial intelligence (AI) and natural language processing (NLP) enable the measurement of psychological constructs through natural language, offering a promising complement to traditional assessment methods by leveraging patients’ own descriptions of their experiences.</p>
<p>While previous research has primarily focused on social media or non-clinical language, this project applies state-of-the-art large language models (LLMs) to open-ended intake data from a German outpatient psychotherapy clinic, providing an ecologically valid resource for studying language-based assessment in real-world clinical settings.</p>
<p>The project comprises several complementary research areas. First, we examine whether patient language at intake reflects cross-sectional symptom severity and impairment and whether it provides incremental information beyond established self-report questionnaires. Second, we conduct a thematic analysis of patient responses to different open-ended prompts to characterize recurring themes. Third, we evaluate whether pre-therapy language predicts longitudinal treatment outcomes beyond baseline symptom measures.</p>
<p>Together, these studies aim to clarify how patient-generated language can be used for assessment, interpretation, and prognosis in psychotherapy. The findings are intended to inform the development of clinically meaningful, language-based assessment tools that support personalized care and contribute to the modernization of mental health evaluation.</p>
<div class="{pagebreak}">

</div>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Mental health problems pose a significant global challenge, accounting for a considerable proportion of deaths and disability-adjusted life years <span class="citation" data-cites="WorldHealthOrganization2017">(<a href="#ref-WorldHealthOrganization2017" role="doc-biblioref">World Health Organization, 2017</a>)</span>. Psychotherapy is an effective and sustainable intervention for reducing symptoms and improving quality of life <span class="citation" data-cites="wampold2015great chorpita2011evidence">(<a href="#ref-chorpita2011evidence" role="doc-biblioref">Chorpita et al., 2011</a>; <a href="#ref-wampold2015great" role="doc-biblioref">Wampold &amp; Imel, 2015</a>)</span>, but its success critically depends on accurate assessments <span class="citation" data-cites="Lutz2022 Jensen-Doss2008">(<a href="#ref-Jensen-Doss2008" role="doc-biblioref">Jensen-Doss &amp; Weisz, 2008</a>; <a href="#ref-Lutz2022" role="doc-biblioref">Lutz et al., 2022</a>)</span>.</p>
<p>Standardized closed-ended tools such as the Beck Depression Inventory-II <span class="citation" data-cites="Beck1996">(<a href="#ref-Beck1996" role="doc-biblioref">Beck et al., 1996</a>)</span> rely on numerical scales <span class="citation" data-cites="Likert1932">(<a href="#ref-Likert1932" role="doc-biblioref">Likert, 1932</a>)</span> to structure and standardize assessments and are widely used in clinical research and practice. While these methods have advanced replicability and reliability in psychological assessment, they can miss important individual differences by restricting responses to pre-defined categories, limiting the ability to capture the complexity of mental states <span class="citation" data-cites="Kjell2024">(<a href="#ref-Kjell2024" role="doc-biblioref">Kjell, Kjell, et al., 2024</a>)</span>.</p>
<p>To address this limitation, researchers have turned to patients’ natural language, which provides high-dimensional, context-rich information that remains underutilized in current assessment practices. Advances in AI, particularly transformer-based LLMs <span class="citation" data-cites="Vaswani2017">(<a href="#ref-Vaswani2017" role="doc-biblioref">Vaswani et al., 2017</a>)</span>, enable the context-rich analysis of natural language with remarkable accuracy <span class="citation" data-cites="devlin-etal-2019-bert">(<a href="#ref-devlin-etal-2019-bert" role="doc-biblioref">Devlin et al., 2019</a>)</span>. When applying LLMs to mental health assessment, two primary measurement contexts emerge. On the one hand, ecologically collected speech data can be analysed that was not primarily generated for measurement purposes. Examples include the prediction of depression levels on the basis of social-media-posts <span class="citation" data-cites="eichstaedt2018">(<a href="#ref-eichstaedt2018" role="doc-biblioref">Eichstaedt et al., 2018</a>)</span>, or psychotherapy session transcripts for analyzing emotional reaction <span class="citation" data-cites="tanana2021 eberhardt2024">(<a href="#ref-eberhardt2024" role="doc-biblioref">Eberhardt et al., 2024</a>; <a href="#ref-tanana2021" role="doc-biblioref">Tanana et al., 2021</a>)</span>. On the other hand, language-based self-reporting can be used specifically for measurement purposes, for example in the form of standardized questions (“<em>Please describe how you have been feeling over the past two weeks.</em>”). Empirical studies highlight the potential of NLP-based analysis of prompted open-ended responses, achieving moderate convergence with closed-ended rating scales using traditional NLP methods <span class="citation" data-cites="kjell2019semantic">(<a href="#ref-kjell2019semantic" role="doc-biblioref">Kjell et al., 2019</a>)</span> and nearing theoretical upper limits of accuracy with LLMs <span class="citation" data-cites="Kjell2022">(<a href="#ref-Kjell2022" role="doc-biblioref">Kjell et al., 2022</a>)</span>.</p>
<p>However, much of the existing literature relies on online survey data or non-clinical text data, leaving a gap in our understanding of how these methods perform in real-world clinical contexts. In contrast, open-ended patient responses are routinely collected in clinical settings as part of pre-therapy intake procedures but remain largely underused in empirical research. The present project leverages data from an outpatient psychotherapy clinic at Ruhr University Bochum, where patients respond to multiple prompts addressing the development and context of their mental health problems, perceived causes, social reactions, current difficulties, and therapy goals. These narratives are linked to structured diagnostic interviews, repeated symptom assessments, clinician ratings, and longitudinal outcome measures. This longitudinal clinical dataset enables a comprehensive examination of patient language across multiple analytic perspectives.</p>
<p>Accordingly, the present project is organized into three complementary research areas. The first investigates whether pre-therapy language reflects cross-sectional symptom severity and clinician-rated impairment and whether language-based representations provide incremental information beyond standardized self-report questionnaires. The second focuses on the semantic content and structure of pre-therapy patient narratives, using question-specific analyses to identify recurring themes and selective response patterns in how patients conceptualize their mental health problems before therapy. The third evaluates the prognostic value of pre-therapy language by testing whether patient narratives predict treatment response and individualized goal attainment over time, beyond baseline symptom severity.</p>
<p>By integrating assessment, interpretive, and prognostic perspectives, this project aims to advance the clinical use of natural language in psychotherapy. Ultimately, the findings seek to support more nuanced, patient-centered assessment practices and contribute to the development of language-based tools that complement existing diagnostic frameworks and inform personalized treatment planning.</p>
</section>
<section id="shared-methods" class="level1">
<h1>Shared Methods</h1>
<p>All substudies draw on the same clinical cohort and share a common set of intake and outcome variables. The shared dataset comprises (a) pre-therapy intake data, including sociodemographics, standardized psychometric questionnaires, and question-specific open-ended patient narratives, and (b) longitudinal clinical measures collected repeatedly during and after treatment. Textual analyses are based exclusively on pre-therapy narratives, while psychometric and clinician-rated measures are used as cross-sectional outcomes, covariates, or longitudinal endpoints depending on the substudy.</p>
<p>The following sections describe the shared dataset, preprocessing pipeline, and measurement instruments used across all substudies.</p>
<section id="measures" class="level2">
<h2 class="anchored" data-anchor-id="measures">Measures</h2>
<section id="sociodemographic-and-context-measures" class="level3">
<h3 class="anchored" data-anchor-id="sociodemographic-and-context-measures">Sociodemographic and context measures</h3>
<p>Sociodemographic information included age, sex, marital and relationship status, general educational attainment, vocational qualification, and current work ability. Contextual variables captured prior psychological or psychiatric treatment and the manner in which therapy ended (e.g., regular completion, dropout).</p>
</section>
<section id="responses-from-open-ended-questions-before-therapy" class="level3">
<h3 class="anchored" data-anchor-id="responses-from-open-ended-questions-before-therapy">Responses from open-ended questions before therapy</h3>
<p>At the start of therapy, patients complete two separate questionnaires designed to assess key aspects of their mental health concerns, functional impairments, and expectations for treatment. Questions 1–9 come from the first questionnaire (<em>Fragebogen zur Lebensgeschichte</em>), and questions 10–12 come from the second (<em>Eingangsfragebogen</em>). The questions include:</p>
<ol type="1">
<li><strong>Problem development:</strong> ‘Briefly describe how the problems for which you are seeking treatment have developed over time.’ (german original question: „Beschreiben Sie kurz, wie sich Ihre Probleme, wegen derer Sie eine Behandlung aufsuchen, im Laufe der Zeit entwickelt haben.”)</li>
<li><strong>Extra stressors:</strong> ‘What causes you stress in addition to your everyday problems (e.g.&nbsp;finances, housing situation)?’ (german original question: „Was macht Ihnen zusätzlich zu Ihren Problemen im Alltag Stress (z. B. Finanzen, Wohnsituation)?“)</li>
<li><strong>Pre-onset changes:</strong> ‘Did something special change in your life before the onset of your symptoms? (e.g.&nbsp;death of an important person, divorce or separation, change in work situation or income, addition to the family)’ (german original question: „Hat sich vor dem Beginn Ihrer Beschwerden etwas Besonderes in Ihrem Leben verändert? (z. B. Tod einer wichtigen Bezugsperson, Scheidung oder Trennung, Veränderung der Arbeitssituation oder des Einkommens, Familienzuwachs)“)</li>
<li><strong>Event connection:</strong> ‘Do you see a connection between the event(s) and the development of your problems?’ (german original question: „Sehen Sie einen Zusammenhang zwischen dem Ereignis/den Ereignissen und der Entwicklung Ihrer Probleme?“)</li>
<li><strong>Physical symptoms:</strong> ‘Are there any physical side effects when your problems occur?’ (german original question: „Gibt es körperliche Begleiterscheinungen, wenn Ihre Probleme auftreten?“)</li>
<li><strong>Problem causes:</strong> ‘What do you think are the causes of your problems?’ (german original question: „Welche Ursachen sehen Sie für Ihre Probleme?“)</li>
<li><strong>Expected improvements:</strong> ‘What would improve in your life if you no longer had your problems?’ (german original question: „Was würde sich in Ihrem Leben verbessern, wenn Sie ihre Probleme nicht mehr hätten?“)</li>
<li><strong>Environment response:</strong> ‘How does your environment (partner, family, friends, work colleagues) react to your problems?’ (german original question: „Wie reagiert Ihre Umwelt (Partner:in, Familie, Freund:innen, Arbeitskolleg:innen) auf die Probleme?“)</li>
<li><strong>No change required:</strong> ‘What should not change under any circumstances as a result of the therapy?’ (german original question: „Was sollte sich durch die Therapie auf keinen Fall verändern?“)</li>
<li><strong>Problem description:</strong> ‘Finally, please describe in your own words the problems for which you would like treatment.’ (german original question: „Beschreiben Sie zum Abschluss bitte noch einmal in eigenen Worten Ihre Probleme, deretwegen Sie eine Behandlung wünschen.“)</li>
<li><strong>Impacted life areas:</strong> ‘In which areas of your life do these problems limit you (e.g.&nbsp;job, relationship)?’ (german original question: „In welchen Lebensbereichen schränken Sie diese Probleme ein (z. B. Beruf, Partnerschaft)?“)</li>
<li><strong>Therapy goals:</strong> ‘What would you like to achieve for yourself in therapy?’ (german original question: „Was möchten Sie in der Therapie für sich erreichen?“)</li>
</ol>
</section>
<section id="psychometric-measures" class="level3">
<h3 class="anchored" data-anchor-id="psychometric-measures">Psychometric measures</h3>
<p>Clinical and psychometric variables were retrieved from the FBZ database and included diagnostic information, self-report symptom measures, therapist- and patient-rated outcome measures, positive mental health indicators, and therapeutic process variables. Diagnoses were coded according to DSM-5 and ICD-10 criteria. Symptom severity and treatment outcomes were assessed using a combination of standardized self-report questionnaires and clinician-rated instruments administered at different points during treatment.</p>
<section id="diagnosis" class="level4">
<h4 class="anchored" data-anchor-id="diagnosis">Diagnosis</h4>
<p>Diagnosis at the outpatient clinic is conducted using structured clinical interviews. These typically take place before therapy begins, usually at the fourth therapist–patient contact. The interview used is the Diagnostic Interview for Mental Disorders <span class="citation" data-cites="margraf2021">(<a href="#ref-margraf2021" role="doc-biblioref">Margraf et al., 2021</a>)</span>, which covers the most frequent DSM-5 disorders encountered in outpatient therapy settings.</p>
</section>
<section id="beck-depression-inventory-ii" class="level4">
<h4 class="anchored" data-anchor-id="beck-depression-inventory-ii">Beck-Depression-Inventory II</h4>
<p>Depressive symptoms were assessed using the <em>Beck Depression Inventory–II</em> (BDI-II; <span class="citation" data-cites="Beck1996">(<a href="#ref-Beck1996" role="doc-biblioref">Beck et al., 1996</a>)</span>), a widely used self-report questionnaire measuring the severity of depressive symptomatology over the past two weeks.</p>
</section>
<section id="depression-anxiety-stress-scale-42" class="level4">
<h4 class="anchored" data-anchor-id="depression-anxiety-stress-scale-42">Depression Anxiety Stress Scale 42</h4>
<p>Depressive symptoms, anxiety symptoms, and general psychological distress were assessed using the <em>Depression Anxiety Stress Scale–42</em> (DASS-42<span class="citation" data-cites="Lovibond1995">(<a href="#ref-Lovibond1995" role="doc-biblioref">Lovibond &amp; Lovibond, 1995</a>)</span>), which consists of 42 items measuring symptoms of depression, anxiety, and stress on a 4-point likert scale.</p>
</section>
<section id="brief-symptom-inventory" class="level4">
<h4 class="anchored" data-anchor-id="brief-symptom-inventory">Brief Symptom Inventory</h4>
<p>Overall psychopathological symptom burden was measured using the <em>Brief Symptom Inventory</em> (BSI; <span class="citation" data-cites="book">(<a href="#ref-book" role="doc-biblioref">Franke, 2002</a>)</span>), the short form of the Symptom Checklist-90-Revised (SCL-90-R; Derogatis). The BSI consists of 53 items rated on a 5-point Likert scale ranging from 0 (“not at all”) to 4 (“extremely”). Responses to 49 items are assigned to nine primary symptom dimensions, while four items are evaluated separately. These symptom dimensions are summarized into three global indices: the <em>Global Severity Index</em> (GSI), reflecting overall psychological distress; the <em>Positive Symptom Distress Index</em> (PSDI), indicating symptom intensity; and the <em>Positive Symptom Total</em> (PST), representing the number of reported symptoms.</p>
</section>
<section id="positive-mental-health-scale" class="level4">
<h4 class="anchored" data-anchor-id="positive-mental-health-scale">Positive Mental Health Scale</h4>
<p>Positive mental health (PMH) was assessed with the nine-item <em>PMH scale</em> <span class="citation" data-cites="lukat2016">(<a href="#ref-lukat2016" role="doc-biblioref">Lukat et al., 2016</a>)</span>. Responses are given on a 4-point Likert scale from 0 (disagree) to 3 (agree). Item scores are summed to yield a total score ranging from 0 to 27, with higher scores reflecting greater PMH. The scale has been validated as a unidimensional measure with excellent internal consistency (Cronbach’s α = .93), good test–retest reliability (Pearson r = .74–.81), and evidence of scalar invariance across samples and over time <span class="citation" data-cites="lukat2016">(<a href="#ref-lukat2016" role="doc-biblioref">Lukat et al., 2016</a>)</span>. Furthermore, it shows strong convergent and discriminant validity and is sensitive to therapeutic change across diverse populations <span class="citation" data-cites="lukat2016">(<a href="#ref-lukat2016" role="doc-biblioref">Lukat et al., 2016</a>)</span>.</p>
</section>
<section id="childhood-trauma-questionnaire" class="level4">
<h4 class="anchored" data-anchor-id="childhood-trauma-questionnaire">Childhood Trauma Questionnaire</h4>
<p>Early adverse experiences were assessed using the <em>Childhood Trauma Questionnaire</em> (CTQ) <span class="citation" data-cites="bernstein2003">(<a href="#ref-bernstein2003" role="doc-biblioref">Bernstein et al., 2003</a>)</span>, a widely used self-report instrument for the retrospective assessment of childhood maltreatment. The CTQ measures five domains of adverse experiences: emotional abuse, physical abuse, sexual abuse, emotional neglect, and physical neglect. Items are rated on a 5-point Likert scale ranging from 1 (“not at all”) to 5 (“very often”), with higher scores indicating greater exposure to maltreatment. The German version of the CTQ has demonstrated good psychometric properties, including satisfactory reliability and validity in clinical samples <span class="citation" data-cites="wingenfeld2010">(<a href="#ref-wingenfeld2010" role="doc-biblioref">Wingenfeld et al., 2010</a>)</span>.</p>
</section>
<section id="clinical-global-impression" class="level4">
<h4 class="anchored" data-anchor-id="clinical-global-impression">Clinical Global Impression</h4>
<p>Clinician-rated symptom severity and improvement were assessed using the <em>Clinical Global Impression</em> (CGI) scales.</p>
<section id="severity-scale" class="level5">
<h5 class="anchored" data-anchor-id="severity-scale">Severity Scale</h5>
<p>The <em>CGI-Severity</em> scale evaluates the clinician’s global impression of the patient’s current level of mental illness, based on their total clinical experience with this population. The item asks: <em>“Considering your total clinical experience with this particular population, how mentally ill is the patient at this time?”</em></p>
</section>
<section id="improvement-scale" class="level5">
<h5 class="anchored" data-anchor-id="improvement-scale">Improvement Scale</h5>
<p>Treatment-related change was assessed using the <em>CGI-Improvement</em> scale. Both patients and therapists rated overall improvement relative to the beginning of therapy, regardless of whether the change was attributed entirely to treatment. Patient and therapist versions differ only in perspective but use equivalent response formats.</p>
</section>
</section>
</section>
<section id="global-improvement" class="level3">
<h3 class="anchored" data-anchor-id="global-improvement">Global Improvement</h3>
<p>Global therapy outcome was assessed using a six-point global success rating based on two items measuring perceived benefit and satisfaction with therapy <span class="citation" data-cites="michalak2003">(<a href="#ref-michalak2003" role="doc-biblioref">Michalak et al., 2003</a>)</span>. These items were completed by both patients and therapists and capture a retrospective evaluation of treatment success. The items assess (1) the extent to which expectations toward therapy have been fulfilled and (2) the overall perceived benefit of therapy. Responses are given on a 6-point Likert scale ranging from 1 (“on the contrary / rather harmful”) to 6 (“completely / very helpful”).</p>
</section>
<section id="goal-attainment-scale" class="level3">
<h3 class="anchored" data-anchor-id="goal-attainment-scale">Goal Attainment Scale</h3>
<p>Individualized treatment outcomes were assessed using a goal attainment measure inspired by the Goal Attainment Scaling approach <span class="citation" data-cites="kiresuk1968">(<a href="#ref-kiresuk1968" role="doc-biblioref">Kiresuk &amp; Sherman, 1968</a>)</span>. At the beginning of therapy, patients and therapists collaboratively define individualized treatment goals. During the course and at the end of therapy, patients and therapists retrospectively evaluated the extent to which each of the predefined goals had been achieved.</p>
<p>Goal attainment was rated on a standardized six-point numerical scale ranging from deterioration relative to the initial goal state (-1 = moved away from the goal) to full goal attainment (4 = goal achieved). The scale reflects patients’ subjective assessment of goal progress, with intermediate categories indicating partial progress toward the respective goal.</p>
<p>For each patient, an overall goal attainment score was computed as the mean rating across all individually defined goals, representing the average subjective level of goal progress at the end of therapy.</p>
</section>
</section>
<section id="measurement-time-points" class="level2">
<h2 class="anchored" data-anchor-id="measurement-time-points">Measurement time points</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Timepoint</th>
<th>DU-DI</th>
<th>DU-Prä</th>
<th>KZT1-DU4</th>
<th>KZT1-DUPost</th>
<th>KZT2-DUPost</th>
<th>LZT1-DUPost</th>
<th>LZT2-DUPost</th>
<th>Kat6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Explanation</strong></td>
<td>Pre-therapy, 4th contact</td>
<td>Pre-therapy, 6th contact</td>
<td>4th therapy session</td>
<td>12th therapy session</td>
<td>24th therapy session</td>
<td>45th therapy session</td>
<td>60th therapy session</td>
<td>6 month after therapy</td>
</tr>
<tr class="even">
<td><strong>Diagnosis</strong></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Demographics</strong></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>BSI</strong></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td><strong>BDI-II</strong></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="even">
<td><strong>DASS-42</strong></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td><strong>PMH</strong></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="even">
<td><strong>CTQ</strong></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>CGI-S</strong></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>CGI-I</strong></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td><strong>Glob-Pt</strong></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="even">
<td><strong>GAS</strong></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
</tbody>
</table>
</section>
<section id="preprocessing" class="level2">
<h2 class="anchored" data-anchor-id="preprocessing">Preprocessing</h2>
<p>To streamline data collection, an automated transcription pipeline was implemented: The handwritten text data is first recorded by trained employees of the FBZ adult outpatient clinic using a mobile audio recording device. Identifying features (e.g.&nbsp;names, dates of birth, location details) were replaced by placeholders during recording. The transcription was carried out on local hardware using the open source tool Whisper Large v2 (<a href="https://github.com/openai/whisper" class="uri">https://github.com/openai/whisper</a>), a state-of-the-art speech-to-text model <span class="citation" data-cites="Radford2022">(<a href="#ref-Radford2022" role="doc-biblioref">Radford et al., 2022</a>)</span>. Each recording begins with a structured introduction, including a patient identification code, followed by responses to predefined questions. The transcription pipeline automatically processes all audio recordings, extracts the patient codes, and identifies responses to key questions.</p>
<p>As an additional data correction step, the exported transcription table was screened for incomplete entries. Records with missing patient identification codes or without any extracted text were automatically flagged, exported for manual correction, and subsequently re-imported and merged back into the original dataset. The corrected dataset was then used for downstream analyses.</p>
</section>
<section id="shared-analytic-framework" class="level2">
<h2 class="anchored" data-anchor-id="shared-analytic-framework">Shared analytic framework</h2>
<p>All substudies in this project are based on the same clinical cohort and share a common analytic foundation. Specific operationalizations of text inputs, outcomes, and analytic models differ across substudies and are specified in the corresponding substudy sections below.</p>
<p><strong>Data scope and unit of analysis</strong>. Across all substudies, analyses focus on pre-therapy patient narratives collected during intake. Language-based analyses are temporally ordered such that patient narratives precede all clinical outcomes of interest. Outcomes may be assessed cross-sectionally (at intake) or longitudinally (during or after therapy), depending on the substudy. The unit of analysis is the individual patient. Textual data collected during therapy are not used as predictors in any analysis.</p>
<p><strong>Descriptive characterization of open-ended responses.</strong> As a shared descriptive foundation, responses to each open-ended prompt are characterized with respect to engagement and heterogeneity. Descriptive statistics include response length and an entropy-based lexical diversity index <span class="citation" data-cites="shannon1948mathematical">(<a href="#ref-shannon1948mathematical" role="doc-biblioref">Shannon, 1948</a>)</span>, computed across pooled responses per question. This characterization provides a common empirical basis for interpreting prompt-specific response patterns across substudies.</p>
<p>Because the open-ended questions were administered in two questionnaire blocks, analyses are restricted to cases in which the respective questionnaire was present. Within these blocks, item-level nonresponse is summarized descriptively and interpreted as potentially informative of selective responding.</p>
<div class="{pagebreak}">

</div>
</section>
</section>
<section id="preliminary-results" class="level1">
<h1>Preliminary results</h1>
<section id="descriptive-statistics" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics">Descriptive statistics</h2>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Load processed working dataset</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset contains:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - one row per patient (unit of analysis)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># - one column per open-ended question or clinical variable</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>working_data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"/Volumes/meta_data/processed/working_data/merged_data.rds"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)   <span class="co"># dplyr / tidyr / ggplot / general wrangling</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.1     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)     <span class="co"># robust word counts (stri_count_words)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)       <span class="co"># kable() table rendering</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)    <span class="co"># unnest_tokens() for tokenization</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Output helpers (to support pdf + html + docx via Quarto/Pandoc)</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Indent labels in tables. Use LaTeX spacing for PDF and inline HTML for HTML/docx.</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>indent_label <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">level =</span> <span class="dv">1</span>) {</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_latex_output</span>()) {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">strrep</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">hspace{1em}"</span>, level), x)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;span style='padding-left:"</span>, <span class="fl">1.2</span> <span class="sc">*</span> level, <span class="st">"em; display:inline-block;'&gt;"</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      x,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;/span&gt;"</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Decide kable() format based on output target.</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># - latex for PDF</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co"># - html for HTML</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co"># - pipe for Word/docx via pandoc</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>kable_fmt <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_latex_output</span>()) <span class="st">"latex"</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is_html_output</span>()) <span class="st">"html"</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="st">"pipe"</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Line break that works inside a table cell for each output type.</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>cell_br <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_latex_output</span>()) <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Bold text in a way that works across formats inside kable.</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>fmt_bold <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_latex_output</span>()) <span class="fu">paste0</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">textbf{"</span>, x, <span class="st">"}"</span>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">paste0</span>(<span class="st">"&lt;strong&gt;"</span>, x, <span class="st">"&lt;/strong&gt;"</span>)</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Table helper: add "section header rows" for grouped printing</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a lightweight alternative to kableExtra::pack_rows</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="co"># It inserts a bold header row before each section (e.g., instrument).</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>add_section_rows <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">section_col =</span> <span class="st">"instrument"</span>, <span class="at">label_col =</span> <span class="st">"Scale"</span>) {</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  sections <span class="ot">&lt;-</span> <span class="fu">unique</span>(df[[section_col]])</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create an "empty row" with correct column types so bind_rows() is safe.</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  typed_na_row <span class="ot">&lt;-</span> <span class="cf">function</span>(template_df) {</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(template_df, <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> .x[<span class="cn">NA_integer_</span>]))</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="fu">lapply</span>(sections, <span class="cf">function</span>(s) {</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rows belonging to this section</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    block <span class="ot">&lt;-</span> df[df[[section_col]] <span class="sc">==</span> s, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># header row: same structure as block but label column is bold section title</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    header <span class="ot">&lt;-</span> <span class="fu">typed_na_row</span>(block)</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>    header[[label_col]] <span class="ot">&lt;-</span> <span class="fu">fmt_bold</span>(s)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># indent all scale labels under this header for readability</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>    block[[label_col]] <span class="ot">&lt;-</span> <span class="fu">indent_label</span>(block[[label_col]], <span class="at">level =</span> <span class="dv">1</span>)</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>(header, block)</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>  }))</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<section id="demographics-and-context-factors" class="level3">
<h3 class="anchored" data-anchor-id="demographics-and-context-factors">Demographics and context factors</h3>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting helpers for demographics tables</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>fmt_pct <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sprintf</span>(<span class="st">"%.1f%%"</span>, <span class="dv">100</span> <span class="sc">*</span> x)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>fmt_mean_sd <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sprintf</span>(<span class="st">"%.2f \u00B1 %.2f"</span>, <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables to include (patient vs therapist sections)</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>vars_patient <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"patient_age_therapy_start"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"patient_sex"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"in_relationship"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"marital_status"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"general_education"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"vocational_qualification"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"work_ability_status"</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"previous_psychotherapy"</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CGI_severity"</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>vars_therapist <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"therapist_age_therapy_start"</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"therapist_sex"</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Human-readable labels used in the table</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>pretty_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">patient_age_therapy_start   =</span> <span class="st">"Age at therapy start"</span>,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">patient_sex                 =</span> <span class="st">"Sex"</span>,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">in_relationship             =</span> <span class="st">"In relationship"</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">marital_status              =</span> <span class="st">"Marital status"</span>,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">general_education           =</span> <span class="st">"General education"</span>,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocational_qualification    =</span> <span class="st">"Vocational qualification"</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">work_ability_status         =</span> <span class="st">"Work ability status"</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">previous_psychotherapy      =</span> <span class="st">"Previous psychotherapy"</span>,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">CGI_severity                =</span> <span class="st">"CGI severity"</span>,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">therapist_age_therapy_start =</span> <span class="st">"Age at therapy start"</span>,</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">therapist_sex               =</span> <span class="st">"Sex"</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a "mixed" descriptives table:</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># - numeric vars: one row with Mean ± SD and valid/missing n</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="co"># - categorical vars: one header row + one row per category level</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>make_section <span class="ot">&lt;-</span> <span class="cf">function</span>(data, vars, section_title, pretty_names) {</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(vars))</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>  num_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(df)[<span class="fu">vapply</span>(df, is.numeric, <span class="fu">logical</span>(<span class="dv">1</span>))]</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  cat_vars <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(df), num_vars)</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Numeric rows (one per variable)</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>  num_tab <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Variable_raw =</span> num_vars) <span class="sc">%&gt;%</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">Section =</span> section_title,</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">Variable =</span> <span class="fu">recode</span>(Variable_raw, <span class="sc">!!!</span>pretty_names),</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">is_header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">Level =</span> <span class="st">""</span>,</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">Valid_n   =</span> <span class="fu">sapply</span>(df[num_vars], \(x) <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(x))),</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">Missing_n =</span> <span class="fu">sapply</span>(df[num_vars], \(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x))),</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Mean ± SD</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sapply</span>(df[num_vars], \(x) <span class="cf">if</span> (<span class="fu">all</span>(<span class="fu">is.na</span>(x))) <span class="st">""</span> <span class="cf">else</span> <span class="fu">fmt_mean_sd</span>(x)),</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">n (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">""</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Categorical rows (header + levels)</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>  cat_long <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="fu">all_of</span>(cat_vars), <span class="at">names_to =</span> <span class="st">"Variable_raw"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>      <span class="at">Section =</span> section_title,</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">Variable =</span> <span class="fu">recode</span>(Variable_raw, <span class="sc">!!!</span>pretty_names)</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Header row per categorical variable: reports valid/missing counts</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  cat_header <span class="ot">&lt;-</span> cat_long <span class="sc">%&gt;%</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Section, Variable_raw, Variable) <span class="sc">%&gt;%</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>      <span class="at">Valid_n   =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(Value)),</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">Missing_n =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Value)),</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>      <span class="at">is_header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">Level =</span> <span class="st">""</span>,</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Mean ± SD</span><span class="st">`</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">n (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">""</span></span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Level rows: counts within each categorical variable</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>  cat_levels <span class="ot">&lt;-</span> cat_long <span class="sc">%&gt;%</span></span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Section, Variable_raw, Variable) <span class="sc">%&gt;%</span></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a>      <span class="at">Valid_n =</span> <span class="fu">n</span>(),</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Preserve original level order as much as possible</span></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>      <span class="at">Value_f =</span> <span class="cf">if</span> (<span class="fu">is.factor</span>(Value)) Value <span class="cf">else</span> <span class="fu">factor</span>(<span class="fu">as.character</span>(Value), <span class="at">levels =</span> <span class="fu">unique</span>(<span class="fu">as.character</span>(Value)))</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Section, Variable_raw, Variable, Value_f, Valid_n, <span class="at">name =</span> <span class="st">"n"</span>, <span class="at">sort =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>      <span class="at">is_header =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>      <span class="at">Missing_n =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>      <span class="at">level_order =</span> <span class="fu">as.integer</span>(Value_f),</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>      <span class="at">Level =</span> <span class="fu">paste0</span>(<span class="fu">as.character</span>(Value_f)),</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Mean ± SD</span><span class="st">`</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">n (%)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sprintf</span>(<span class="st">"%d (%s)"</span>, n, <span class="fu">fmt_pct</span>(n <span class="sc">/</span> Valid_n))</span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Section, Variable_raw, Variable, is_header, Level, level_order,</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>                  Valid_n, Missing_n, <span class="st">`</span><span class="at">Mean ± SD</span><span class="st">`</span>, <span class="st">`</span><span class="at">n (%)</span><span class="st">`</span>)</span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------</span></span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine numeric + categorical blocks and order nicely</span></span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------  </span></span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>    num_tab <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">level_order =</span> <span class="cn">NA_integer_</span>),</span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>    cat_header <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">level_order =</span> <span class="cn">NA_integer_</span>),</span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>    cat_levels</span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a>      <span class="at">var_order  =</span> <span class="fu">match</span>(Variable_raw, vars),</span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a>      <span class="at">row_order  =</span> <span class="fu">ifelse</span>(is_header, <span class="dv">0</span>L, <span class="dv">1</span>L),</span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a>      <span class="at">level_order =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(level_order), <span class="dv">0</span>L, level_order)</span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(var_order, row_order, level_order) <span class="sc">%&gt;%</span></span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>      <span class="at">Variable  =</span> <span class="fu">ifelse</span>(is_header, <span class="fu">paste0</span>(<span class="st">"**"</span>, Variable, <span class="st">"**"</span>), <span class="st">""</span>),</span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>      <span class="at">Valid_n   =</span> <span class="fu">ifelse</span>(is_header, <span class="fu">as.character</span>(Valid_n), <span class="st">""</span>),</span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>      <span class="at">Missing_n =</span> <span class="fu">ifelse</span>(is_header, <span class="fu">as.character</span>(Missing_n), <span class="st">""</span>)</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Section, Variable, Valid_n, Missing_n, Level, <span class="st">`</span><span class="at">Mean ± SD</span><span class="st">`</span>, <span class="st">`</span><span class="at">n (%)</span><span class="st">`</span>)</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a><span class="co"># Build patient and therapist sections, then split into two printed tables</span></span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>patient_section <span class="ot">&lt;-</span> <span class="fu">make_section</span>(working_data, vars_patient, <span class="st">"Patient"</span>, pretty_names)</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>therapist_section <span class="ot">&lt;-</span> <span class="fu">make_section</span>(working_data, vars_therapist, <span class="st">"Therapist"</span>, pretty_names)</span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>final_tab_print <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(patient_section, therapist_section)</span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>pt <span class="ot">&lt;-</span> final_tab_print <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Section <span class="sc">==</span> <span class="st">"Patient"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Section)</span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>th <span class="ot">&lt;-</span> final_tab_print <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Section <span class="sc">==</span> <span class="st">"Therapist"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Section)</span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>pt <span class="ot">&lt;-</span> pt <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">`</span><span class="at">Valid n</span><span class="st">`</span> <span class="ot">=</span> Valid_n, <span class="st">`</span><span class="at">Missing n</span><span class="st">`</span> <span class="ot">=</span> Missing_n)</span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>th <span class="ot">&lt;-</span> th <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">`</span><span class="at">Valid n</span><span class="st">`</span> <span class="ot">=</span> Valid_n, <span class="st">`</span><span class="at">Missing n</span><span class="st">`</span> <span class="ot">=</span> Missing_n)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  pt,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Table X. Descriptive statistics of patient demographics and context factors."</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"l"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>), </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">booktabs =</span> <span class="cn">TRUE</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table X. Descriptive statistics of patient demographics and context factors.</caption>
<colgroup>
<col style="width: 22%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 40%">
<col style="width: 11%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: center;">Valid n</th>
<th style="text-align: center;">Missing n</th>
<th style="text-align: left;">Level</th>
<th style="text-align: center;">Mean ± SD</th>
<th style="text-align: center;">n (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Age at therapy start</strong></td>
<td style="text-align: center;">675</td>
<td style="text-align: center;">256</td>
<td style="text-align: left;"></td>
<td style="text-align: center;">41.48 ± 14.23</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sex</strong></td>
<td style="text-align: center;">675</td>
<td style="text-align: center;">256</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">male</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">269 (39.9%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">female</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">406 (60.1%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>In relationship</strong></td>
<td style="text-align: center;">381</td>
<td style="text-align: center;">550</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">220 (57.7%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">no</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">161 (42.3%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Marital status</strong></td>
<td style="text-align: center;">381</td>
<td style="text-align: center;">550</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">single</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">193 (50.7%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">married</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">107 (28.1%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">divorced</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">52 (13.6%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">seperated</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">16 (4.2%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">widowed</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">5 (1.3%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">other</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">8 (2.1%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>General education</strong></td>
<td style="text-align: center;">381</td>
<td style="text-align: center;">550</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">other</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">5 (1.3%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">student</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">4 (1.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">no school-leaving certificate</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">9 (2.4%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">lower secondary school certificate</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">66 (17.3%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">intermediate secondary school certificate</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">114 (29.9%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">higher education entrance qualification</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">183 (48.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Vocational qualification</strong></td>
<td style="text-align: center;">381</td>
<td style="text-align: center;">550</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Currently in vocational training or studying</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">40 (10.5%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">No vocational qualification</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">45 (11.8%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Apprenticeship / vocational training</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">217 (57.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">University or university of applied sciences degree</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">54 (14.2%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Other</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">25 (6.6%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Work ability status</strong></td>
<td style="text-align: center;">381</td>
<td style="text-align: center;">550</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Other</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">30 (7.9%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Able to work</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">208 (54.6%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Unable to work (on sick leave)</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">118 (31.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Disability pension</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">15 (3.9%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Old-age pension</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">10 (2.6%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Previous psychotherapy</strong></td>
<td style="text-align: center;">582</td>
<td style="text-align: center;">349</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">no prior treatment</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">179 (30.8%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">outpatient psychotherapy</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">100 (17.2%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">inpatient psychotherapy</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">154 (26.5%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">both</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">134 (23.0%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">exact specification not available</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">15 (2.6%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>CGI severity</strong></td>
<td style="text-align: center;">582</td>
<td style="text-align: center;">349</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Not assessable</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">4 (0.7%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Normal, not at all ill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2 (0.3%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Borderline mentally ill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">9 (1.5%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Mildly ill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">28 (4.8%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Moderately ill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">162 (27.8%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Markedly ill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">287 (49.3%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Severely ill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">87 (14.9%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Among the most extremely ill patients</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">3 (0.5%)</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  th,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Table X. Descriptive statistics of therapist demographics and context factors."</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">align =</span> <span class="fu">c</span>(<span class="st">"l"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"l"</span>,<span class="st">"c"</span>,<span class="st">"c"</span>), </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">booktabs =</span> <span class="cn">TRUE</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table X. Descriptive statistics of therapist demographics and context factors.</caption>
<colgroup>
<col style="width: 31%">
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 17%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: center;">Valid n</th>
<th style="text-align: center;">Missing n</th>
<th style="text-align: left;">Level</th>
<th style="text-align: center;">Mean ± SD</th>
<th style="text-align: center;">n (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Age at therapy start</strong></td>
<td style="text-align: center;">675</td>
<td style="text-align: center;">256</td>
<td style="text-align: left;"></td>
<td style="text-align: center;">28.35 ± 4.12</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Sex</strong></td>
<td style="text-align: center;">675</td>
<td style="text-align: center;">256</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">male</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">101 (15.0%)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">female</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">574 (85.0%)</td>
</tr>
</tbody>
</table>
</div>
</div></div>
</section>
<section id="textual-data" class="level3">
<h3 class="anchored" data-anchor-id="textual-data">Textual data</h3>
<p>Descriptive analyses revealed substantial heterogeneity across questions in response rates, length, and lexical diversity. Holistic questions such as problem description (q10) and therapy goals (q12) showed low missingness, longer median response lengths, and high lexical diversity, indicating that patients readily produced extended and heterogeneous narratives when asked to reflect broadly on their difficulties or desired changes. In contrast, prompts targeting causal connections (q4) or constraints (q11) frequently elicited short or missing responses and exhibited lower diversity, consistent with more constrained or confirmatory response formats. Notably, lexical diversity varied independently of response length, suggesting that some prompts elicited shared narrative scripts despite moderate verbosity (e.g., q7 Expected Improvements).</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify text columns for open-ended questions</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convention: columns are named like "txt1_problem", "txt2_stressors", ...</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>text_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(working_data)[<span class="fu">str_detect</span>(<span class="fu">names</span>(working_data), <span class="st">"^txt</span><span class="sc">\\</span><span class="st">d+_"</span>)]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape to long format: one row = one patient × one question</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># This makes it easy to compute question-level descriptives</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>working_data_long <span class="ot">&lt;-</span> working_data <span class="sc">%&gt;%</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">all_of</span>(text_cols),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"question_raw"</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"text"</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract numeric question ID (1–12) from column name</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">question_id =</span> <span class="fu">str_extract</span>(question_raw, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.integer</span>(),</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract question label from column name</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">question_label =</span> <span class="fu">str_remove</span>(question_raw, <span class="st">"^txt</span><span class="sc">\\</span><span class="st">d+_"</span>),</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Normalize whitespace in text</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_squish</span>(text),</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Flag missing or empty responses</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_missing =</span> <span class="fu">is.na</span>(text) <span class="sc">|</span> text <span class="sc">==</span> <span class="st">""</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Response-level text features (per row)</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="co"># These will later be summarised per question.</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>working_data_long <span class="ot">&lt;-</span> working_data_long <span class="sc">%&gt;%</span> </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_chars =</span> <span class="fu">ifelse</span>(is_missing, <span class="cn">NA_integer_</span>, <span class="fu">nchar</span>(text)),            <span class="co"># character count</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_words =</span> <span class="fu">ifelse</span>(is_missing, <span class="cn">NA_integer_</span>, <span class="fu">stri_count_words</span>(text)), <span class="co"># word count</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_very_short =</span> <span class="sc">!</span>is_missing <span class="sc">&amp;</span> n_words <span class="sc">&lt;=</span> <span class="dv">3</span>                         <span class="co"># list-like / minimal responses</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Question-level engagement + length statistics</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="co"># These summarize HOW MUCH people write, not WHAT they write</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>qc_by_question <span class="ot">&lt;-</span> working_data_long <span class="sc">%&gt;%</span> </span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(question_id, question_label) <span class="sc">%&gt;%</span> </span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_total =</span> <span class="fu">n</span>(),                                  <span class="co"># total number of responses</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_pct =</span> <span class="fu">mean</span>(is_missing) <span class="sc">*</span> <span class="dv">100</span>,           <span class="co"># nonresponse rate</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">very_short_pct =</span> <span class="fu">mean</span>(is_very_short) <span class="sc">*</span> <span class="dv">100</span>,     <span class="co"># minimal responses</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_words =</span> <span class="fu">median</span>(n_words, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),   <span class="co"># typical response length</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">p10_words =</span> <span class="fu">quantile</span>(n_words, <span class="fl">0.10</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">p90_words =</span> <span class="fu">quantile</span>(n_words, <span class="fl">0.90</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Human-readable question names (used in final table)</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>question_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Problem development"</span>,</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extra stressors"</span>,</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Pre-onset changes"</span>,</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Event connection"</span>,</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Physical symptoms"</span>,</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Problem causes"</span>,</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Expected improvements"</span>,</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Environment response"</span>,</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>  <span class="st">"No change required"</span>,</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Problem description"</span>,</span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Impacted life areas"</span>,</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Therapy goals"</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenization for lexical diversity (across respondents per question)</span></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a><span class="co"># IMPORTANT: diversity here is computed on the pooled word distribution per question, not within each individual response.</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>tokens_by_question <span class="ot">&lt;-</span> working_data_long <span class="sc">%&gt;%</span> </span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_missing) <span class="sc">%&gt;%</span>                     <span class="co"># exclude missing responses</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text, <span class="at">token =</span> <span class="st">"words"</span>) <span class="sc">%&gt;%</span>  <span class="co"># split into word tokens</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">"^</span><span class="sc">\\</span><span class="st">d+$"</span>))        <span class="co"># remove pure numbers</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Lexical diversity using Shannon entropy</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a><span class="co"># - Shannon entropy H captures dispersion of word usage</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="co"># - Diversity index = 2^H (effective number of equally frequent word types)</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>diversity_by_question <span class="ot">&lt;-</span> tokens_by_question <span class="sc">%&gt;%</span> </span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(question_id, question_label, word) <span class="sc">%&gt;%</span>   <span class="co"># word frequencies per question</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(question_id, question_label) <span class="sc">%&gt;%</span> </span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span>                     <span class="co"># word probabilities</span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">shannon_entropy =</span> <span class="sc">-</span><span class="fu">sum</span>(p <span class="sc">*</span> <span class="fu">log2</span>(p)),        <span class="co"># Shannon entropy</span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">diversity_index =</span> <span class="dv">2</span> <span class="sc">^</span> shannon_entropy,      <span class="co"># effective vocabulary size</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_tokens =</span> <span class="fu">sum</span>(n),                      <span class="co"># total words (for context)</span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">vocab_size =</span> <span class="fu">n_distinct</span>(word),              <span class="co"># raw vocabulary size</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine engagement + diversity into one question-level table</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a><span class="co"># This table triangulates:</span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="co"># - engagement (missing, very short)</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a><span class="co"># - quantity (word counts)</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a><span class="co"># - dispersion (lexical diversity)</span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>qc_table <span class="ot">&lt;-</span> qc_by_question <span class="sc">%&gt;%</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">Question =</span> <span class="fu">factor</span>(question_id, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">labels =</span> question_labels)</span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>    diversity_by_question,</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"question_id"</span>, <span class="st">"question_label"</span>)</span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>    Question,</span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a>    n_total,</span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>    missing_pct,</span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a>    very_short_pct,</span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>    median_words,</span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>    p10_words,</span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a>    p90_words,</span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>    diversity_index</span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>qc_table <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Table X. Descriptive statistics of open-ended responses by question."</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"lccccccc"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">booktabs =</span> <span class="cn">TRUE</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table X. Descriptive statistics of open-ended responses by question.</caption>
<colgroup>
<col style="width: 19%">
<col style="width: 7%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Question</th>
<th style="text-align: center;">n_total</th>
<th style="text-align: center;">missing_pct</th>
<th style="text-align: center;">very_short_pct</th>
<th style="text-align: center;">median_words</th>
<th style="text-align: center;">p10_words</th>
<th style="text-align: center;">p90_words</th>
<th style="text-align: center;">diversity_index</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Problem development</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">47.046187</td>
<td style="text-align: center;">2.577873</td>
<td style="text-align: center;">18</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">50.0</td>
<td style="text-align: center;">731.0489</td>
</tr>
<tr class="even">
<td style="text-align: left;">Extra stressors</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">49.838883</td>
<td style="text-align: center;">9.129968</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">36.0</td>
<td style="text-align: center;">636.8977</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pre-onset changes</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">43.179377</td>
<td style="text-align: center;">15.037594</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">37.0</td>
<td style="text-align: center;">555.4025</td>
</tr>
<tr class="even">
<td style="text-align: left;">Event connection</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">47.046187</td>
<td style="text-align: center;">23.630505</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">28.8</td>
<td style="text-align: center;">477.7177</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Physical symptoms</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">46.401719</td>
<td style="text-align: center;">16.433942</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">19.0</td>
<td style="text-align: center;">500.2739</td>
</tr>
<tr class="even">
<td style="text-align: left;">Problem causes</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">49.087003</td>
<td style="text-align: center;">12.137487</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">30.0</td>
<td style="text-align: center;">587.9515</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected improvements</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">44.683136</td>
<td style="text-align: center;">5.477981</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">31.0</td>
<td style="text-align: center;">377.6039</td>
</tr>
<tr class="even">
<td style="text-align: left;">Environment response</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">43.286788</td>
<td style="text-align: center;">12.137487</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">32.3</td>
<td style="text-align: center;">363.8619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">No change required</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">71.321160</td>
<td style="text-align: center;">7.626208</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">19.0</td>
<td style="text-align: center;">275.3418</td>
</tr>
<tr class="even">
<td style="text-align: left;">Problem description</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">11.170784</td>
<td style="text-align: center;">4.511278</td>
<td style="text-align: center;">22</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">50.4</td>
<td style="text-align: center;">687.7989</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Impacted life areas</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">12.996778</td>
<td style="text-align: center;">31.256713</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">31.1</td>
<td style="text-align: center;">438.1475</td>
</tr>
<tr class="even">
<td style="text-align: left;">Therapy goals</td>
<td style="text-align: center;">931</td>
<td style="text-align: center;">9.881847</td>
<td style="text-align: center;">5.477981</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">36.0</td>
<td style="text-align: center;">435.7618</td>
</tr>
</tbody>
</table>
</div>
</div></div>
</section>
<section id="diagnosis-1" class="level3">
<h3 class="anchored" data-anchor-id="diagnosis-1">Diagnosis</h3>
<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># DSM-5 diagnoses: convert wide "slots" into a tidy long table</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected input pattern in working_data:</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   dsmv_diagnosis_1</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   dsmv_diagnosis_1_type</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   dsmv_diagnosis_2</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   ...</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># up to 7 slots (1–7). Each slot may contain diagnosis label and metadata.</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>dsmv_cols <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"^dsmv_diagnosis_[1-7](_|$)"</span>, <span class="fu">names</span>(working_data), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper: when pivoting, multiple values can occur per cell; keep the first non-empty.</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>first_non_empty <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x[<span class="sc">!</span><span class="fu">is.na</span>(x) <span class="sc">&amp;</span> x <span class="sc">!=</span> <span class="st">""</span>]</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">==</span> <span class="dv">0</span>) <span class="cn">NA_character_</span> <span class="cf">else</span> x[<span class="dv">1</span>]</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Wide -&gt; long: one row per patient × diagnosis slot</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>dsmv_long <span class="ot">&lt;-</span> working_data <span class="sc">%&gt;%</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(case_nr, <span class="fu">all_of</span>(dsmv_cols)) <span class="sc">%&gt;%</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>case_nr, as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span>case_nr,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"slot"</span>, <span class="st">"field"</span>),</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"^dsmv_diagnosis_([1-7])(?:_(.*))?$"</span>,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">field =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(field) <span class="sc">|</span> field <span class="sc">==</span> <span class="st">""</span>, <span class="st">"diagnosis"</span>, field)) <span class="sc">%&gt;%</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from  =</span> field,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fn   =</span> first_non_empty</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(diagnosis) <span class="sc">&amp;</span> diagnosis <span class="sc">!=</span> <span class="st">""</span>)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Translate German diagnosis labels to English using lookup file</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>lookup <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"/Volumes/meta_data/processed/working_data/diagnosis_lookup_de_en.csv"</span>,</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">delim =</span> <span class="st">";"</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>dsmv_long_en <span class="ot">&lt;-</span> dsmv_long <span class="sc">%&gt;%</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(lookup, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"diagnosis"</span> <span class="ot">=</span> <span class="st">"diagnosis_de"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diagnosis =</span> <span class="fu">coalesce</span>(diagnosis_en, diagnosis)) <span class="sc">%&gt;%</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>diagnosis_en)</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Count diagnoses overall and primary diagnoses (based on 'type' field)</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>all_diag <span class="ot">&lt;-</span> dsmv_long_en <span class="sc">%&gt;%</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(diagnosis, <span class="at">name =</span> <span class="st">"n_all"</span>)</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>primary_diag <span class="ot">&lt;-</span> dsmv_long_en <span class="sc">%&gt;%</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"primary diagnosis"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(diagnosis, <span class="at">name =</span> <span class="st">"n_primary"</span>)</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Merge counts and replace missing with zeros</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>diag_summary <span class="ot">&lt;-</span> <span class="fu">full_join</span>(all_diag, primary_diag, <span class="at">by =</span> <span class="st">"diagnosis"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all     =</span> <span class="fu">replace_na</span>(n_all, <span class="dv">0</span>L),</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_primary =</span> <span class="fu">replace_na</span>(n_primary, <span class="dv">0</span>L)</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Collapse Major Depression subtypes into a single display category</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>diag_collapsed <span class="ot">&lt;-</span> diag_summary <span class="sc">%&gt;%</span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">diagnosis =</span> <span class="fu">if_else</span>(</span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"^Major Depressive"</span>, diagnosis),</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Major Depression (all subtypes)"</span>,</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>      diagnosis</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(diagnosis) <span class="sc">%&gt;%</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all     =</span> <span class="fu">sum</span>(n_all),</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_primary =</span> <span class="fu">sum</span>(n_primary),</span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups   =</span> <span class="st">"drop"</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Display thresholding: keep diagnoses with &gt;= 10 occurrences, collapse the rest</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>diag_main <span class="ot">&lt;-</span> diag_collapsed <span class="sc">%&gt;%</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_all <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_all))</span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>other_row <span class="ot">&lt;-</span> diag_collapsed <span class="sc">%&gt;%</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_all <span class="sc">&lt;</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">diagnosis  =</span> <span class="st">"Other diagnoses (&lt;10)"</span>,</span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all      =</span> <span class="fu">sum</span>(n_all),</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_primary  =</span> <span class="fu">sum</span>(n_primary)</span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>diag_table_final <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(diag_main, other_row)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [8]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>diag_print <span class="ot">&lt;-</span> diag_table_final <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">DSM-5 diagnosis</span><span class="st">`</span>       <span class="ot">=</span> diagnosis,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">All diagnoses (n)</span><span class="st">`</span>     <span class="ot">=</span> n_all,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Primary diagnoses (n)</span><span class="st">`</span> <span class="ot">=</span> n_primary</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  diag_print,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">align    =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">booktabs =</span> <span class="fu">is_latex_output</span>(),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption  =</span> <span class="st">"DSM-5 diagnoses in the sample (absolute frequencies)"</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>DSM-5 diagnoses in the sample (absolute frequencies)</caption>
<colgroup>
<col style="width: 57%">
<col style="width: 19%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">DSM-5 diagnosis</th>
<th style="text-align: center;">All diagnoses (n)</th>
<th style="text-align: center;">Primary diagnoses (n)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Major Depression (all subtypes)</td>
<td style="text-align: center;">331</td>
<td style="text-align: center;">251</td>
</tr>
<tr class="even">
<td style="text-align: left;">Persistent Depressive Disorder (Dysthymia)</td>
<td style="text-align: center;">124</td>
<td style="text-align: center;">89</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Social Anxiety Disorder (Social Phobia)</td>
<td style="text-align: center;">103</td>
<td style="text-align: center;">56</td>
</tr>
<tr class="even">
<td style="text-align: left;">Posttraumatic Stress Disorder</td>
<td style="text-align: center;">65</td>
<td style="text-align: center;">33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Agoraphobia</td>
<td style="text-align: center;">59</td>
<td style="text-align: center;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">Panic Disorder</td>
<td style="text-align: center;">54</td>
<td style="text-align: center;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adjustment Disorder with Depressed Mood</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">40</td>
</tr>
<tr class="even">
<td style="text-align: left;">Generalized Anxiety Disorder</td>
<td style="text-align: center;">36</td>
<td style="text-align: center;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Borderline Personality Disorder</td>
<td style="text-align: center;">31</td>
<td style="text-align: center;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">Somatic Symptom Disorder</td>
<td style="text-align: center;">28</td>
<td style="text-align: center;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Obsessive-Compulsive Disorder</td>
<td style="text-align: center;">25</td>
<td style="text-align: center;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adjustment Disorder with Mixed Anxiety and Depressed Mood</td>
<td style="text-align: center;">16</td>
<td style="text-align: center;">16</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Specific Phobia, Situational Type</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Binge-Eating Disorder</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Insomnia Disorder</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Separation Anxiety Disorder</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adjustment Disorder, Unspecified</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Illness Anxiety Disorder</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alcohol Use Disorder, Moderate</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Specific Phobia, Natural Environment Type</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other diagnoses (&lt;10)</td>
<td style="text-align: center;">166</td>
<td style="text-align: center;">75</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<p>Diagnoses were collapsed for display. Only diagnoses with ≥10 occurrences are shown individually; remaining diagnoses are summarized as “Other diagnoses (&lt;10)”.</p>
</section>
<section id="psychometric-measures-1" class="level3">
<h3 class="anchored" data-anchor-id="psychometric-measures-1">psychometric measures</h3>
<p>Due to substantial dropout and differences in treatment duration, descriptive statistics across therapy phases are based on changing subsamples. In particular, patients continuing into long-term therapy represent a more severe and chronic subgroup. To avoid conflating symptom severity with symptom change, two complementary descriptive tables are reported.</p>
<p>Table 1 presents descriptive statistics for symptom measures at each assessment timepoint. Sample sizes decrease substantially across therapy phases, reflecting treatment completion and dropout. Consequently, means at later timepoints do not represent longitudinal change within individuals and should not be interpreted as symptom worsening.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Psychometric variables</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># These are wide-format columns where suffixes encode timepoints, e.g.:</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   dass_dep_score_KZT2-DUPost</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># I later parse these into instrument / scale / timepoint.</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>psy_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># BSI</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bsi_gsi_DI"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bsi_gsi_KZT1-DU4"</span>, <span class="st">"bsi_gsi_KZT1-DUPost"</span>, <span class="st">"bsi_gsi_KZT2-DUPost"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bsi_gsi_LZT1-DUPost"</span>, <span class="st">"bsi_gsi_LZT2-DUPost"</span>, <span class="st">"bsi_gsi_DU-Kat6"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># BDI</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bdi_sum_DU-Prä"</span>, <span class="st">"bdi_sum_KZT1-DU4"</span>, <span class="st">"bdi_sum_KZT1-DUPost"</span>, <span class="st">"bdi_sum_KZT2-DUPost"</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bdi_sum_LZT1-DUPost"</span>, <span class="st">"bdi_sum_LZT2-DUPost"</span>, <span class="st">"bdi_sum_DU-Kat6"</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DASS</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_DU-Prä"</span>, <span class="st">"dass_dep_score_DU-Prä"</span>, <span class="st">"dass_anx_score_DU-Prä"</span>, <span class="st">"dass_str_score_DU-Prä"</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_KZT1-DU4"</span>, <span class="st">"dass_dep_score_KZT1-DU4"</span>, <span class="st">"dass_anx_score_KZT1-DU4"</span>, <span class="st">"dass_str_score_KZT1-DU4"</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_KZT1-DUPost"</span>, <span class="st">"dass_dep_score_KZT1-DUPost"</span>, <span class="st">"dass_anx_score_KZT1-DUPost"</span>, <span class="st">"dass_str_score_KZT1-DUPost"</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_KZT2-DUPost"</span>, <span class="st">"dass_dep_score_KZT2-DUPost"</span>, <span class="st">"dass_anx_score_KZT2-DUPost"</span>, <span class="st">"dass_str_score_KZT2-DUPost"</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_LZT1-DUPost"</span>, <span class="st">"dass_dep_score_LZT1-DUPost"</span>, <span class="st">"dass_anx_score_LZT1-DUPost"</span>, <span class="st">"dass_str_score_LZT1-DUPost"</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_LZT2-DUPost"</span>, <span class="st">"dass_dep_score_LZT2-DUPost"</span>, <span class="st">"dass_anx_score_LZT2-DUPost"</span>, <span class="st">"dass_str_score_LZT2-DUPost"</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dass_total_score_DU-Kat6"</span>, <span class="st">"dass_dep_score_DU-Kat6"</span>, <span class="st">"dass_anx_score_DU-Kat6"</span>, <span class="st">"dass_str_score_DU-Kat6"</span>,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># PMH</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pmh_sum_DU-Prä"</span>, <span class="st">"pmh_sum_KZT1-DU4"</span>, <span class="st">"pmh_sum_KZT1-DUPost"</span>, <span class="st">"pmh_sum_KZT2-DUPost"</span>,</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pmh_sum_LZT1-DUPost"</span>, <span class="st">"pmh_sum_LZT2-DUPost"</span>, <span class="st">"pmh_sum_DU-Kat6"</span>,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GAS (patient/therapist means)</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gas_pt_mean_KZT1-DUPost"</span>, <span class="st">"gas_pt_mean_KZT2-DUPost"</span>, <span class="st">"gas_pt_mean_LZT1-DUPost"</span>, <span class="st">"gas_pt_mean_LZT2-DUPost"</span>, <span class="st">"gas_pt_mean_DU-Kat6"</span>,</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gas_th_mean_KZT1-DUPost"</span>, <span class="st">"gas_th_mean_KZT2-DUPost"</span>, <span class="st">"gas_th_mean_LZT1-DUPost"</span>, <span class="st">"gas_th_mean_LZT2-DUPost"</span>, <span class="st">"gas_th_mean_DU-Kat6"</span>,</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Global ratings</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_th_satisfaction_LZT2-DUPost"</span>, <span class="st">"glob_th_benefit_LZT2-DUPost"</span>,</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_th_satisfaction_LZT1-DUPost"</span>, <span class="st">"glob_th_benefit_LZT1-DUPost"</span>,</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_th_satisfaction_KZT2-DUPost"</span>, <span class="st">"glob_th_benefit_KZT2-DUPost"</span>,</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_th_satisfaction_KZT1-DUPost"</span>, <span class="st">"glob_th_benefit_KZT1-DUPost"</span>,</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_pt_satisfaction_LZT2-DUPost"</span>, <span class="st">"glob_pt_benefit_LZT2-DUPost"</span>,</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_pt_satisfaction_LZT1-DUPost"</span>, <span class="st">"glob_pt_benefit_LZT1-DUPost"</span>,</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_pt_satisfaction_KZT2-DUPost"</span>, <span class="st">"glob_pt_benefit_KZT2-DUPost"</span>,</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_pt_satisfaction_DU-Kat6"</span>, <span class="st">"glob_pt_benefit_DU-Kat6"</span>,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"glob_pt_satisfaction_KZT1-DUPost"</span>, <span class="st">"glob_pt_benefit_KZT1-DUPost"</span>,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># CGI improvement (patient/therapist ratings)</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cgi_improvement_patient_KZT1-DUPost"</span>, <span class="st">"cgi_improvement_patient_KZT2-DUPost"</span>,</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cgi_improvement_patient_LZT1-DUPost"</span>, <span class="st">"cgi_improvement_patient_LZT2-DUPost"</span>,</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cgi_improvement_patient_DU-Kat6"</span>,</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cgi_improvement_therapist_KZT1-DUPost"</span>, <span class="st">"cgi_improvement_therapist_KZT2-DUPost"</span>,</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cgi_improvement_therapist_LZT1-DUPost"</span>, <span class="st">"cgi_improvement_therapist_LZT2-DUPost"</span>,</span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>  <span class="st">"cgi_improvement_therapist_DU-Kat6"</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse variable names into components:</span></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a><span class="co">#   instrument_scale_timepoint</span></span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a><span class="co"># ============================================================</span></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: "dass_dep_score_KZT2-DUPost"</span></span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a><span class="co"># - instrument: "dass"</span></span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a><span class="co"># - scale:      "dep_score"</span></span>
<span id="cb11-61"><a href="#cb11-61" aria-hidden="true" tabindex="-1"></a><span class="co"># - timepoint:  "KZT2-DUPost"</span></span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a>parse_psy_name <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb11-63"><a href="#cb11-63" aria-hidden="true" tabindex="-1"></a>  instrument <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"_.*$"</span>, <span class="st">""</span>, x)          <span class="co"># text before first underscore</span></span>
<span id="cb11-64"><a href="#cb11-64" aria-hidden="true" tabindex="-1"></a>  rest <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"^[^_]+_"</span>, <span class="st">""</span>, x)             <span class="co"># everything after first underscore</span></span>
<span id="cb11-65"><a href="#cb11-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-66"><a href="#cb11-66" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">str_detect</span>(rest, <span class="st">"_"</span>)) {</span>
<span id="cb11-67"><a href="#cb11-67" aria-hidden="true" tabindex="-1"></a>    timepoint <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"^.*_"</span>, <span class="st">""</span>, rest)      <span class="co"># last underscore-separated token</span></span>
<span id="cb11-68"><a href="#cb11-68" aria-hidden="true" tabindex="-1"></a>    scale <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"_[^_]+$"</span>, <span class="st">""</span>, rest)       <span class="co"># everything before that last token</span></span>
<span id="cb11-69"><a href="#cb11-69" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb11-70"><a href="#cb11-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If there is no underscore left, I treat the whole thing as timepoint/scale</span></span>
<span id="cb11-71"><a href="#cb11-71" aria-hidden="true" tabindex="-1"></a>    timepoint <span class="ot">&lt;-</span> rest</span>
<span id="cb11-72"><a href="#cb11-72" aria-hidden="true" tabindex="-1"></a>    scale <span class="ot">&lt;-</span> rest</span>
<span id="cb11-73"><a href="#cb11-73" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-74"><a href="#cb11-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-75"><a href="#cb11-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">var =</span> x, <span class="at">instrument =</span> instrument, <span class="at">scale =</span> scale, <span class="at">timepoint =</span> timepoint)</span>
<span id="cb11-76"><a href="#cb11-76" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-77"><a href="#cb11-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-78"><a href="#cb11-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Instrument labels for section headers</span></span>
<span id="cb11-79"><a href="#cb11-79" aria-hidden="true" tabindex="-1"></a>instrument_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb11-80"><a href="#cb11-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">bsi  =</span> <span class="st">"BSI"</span>,</span>
<span id="cb11-81"><a href="#cb11-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">bdi  =</span> <span class="st">"BDI"</span>,</span>
<span id="cb11-82"><a href="#cb11-82" aria-hidden="true" tabindex="-1"></a>  <span class="at">dass =</span> <span class="st">"DASS"</span>,</span>
<span id="cb11-83"><a href="#cb11-83" aria-hidden="true" tabindex="-1"></a>  <span class="at">pmh  =</span> <span class="st">"PMH"</span>,</span>
<span id="cb11-84"><a href="#cb11-84" aria-hidden="true" tabindex="-1"></a>  <span class="at">gas  =</span> <span class="st">"GAS"</span>,</span>
<span id="cb11-85"><a href="#cb11-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">glob =</span> <span class="st">"Global ratings"</span>,</span>
<span id="cb11-86"><a href="#cb11-86" aria-hidden="true" tabindex="-1"></a>  <span class="at">cgi  =</span> <span class="st">"CGI"</span></span>
<span id="cb11-87"><a href="#cb11-87" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-88"><a href="#cb11-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-89"><a href="#cb11-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Desired ordering for timepoint columns in output tables</span></span>
<span id="cb11-90"><a href="#cb11-90" aria-hidden="true" tabindex="-1"></a>tp_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb11-91"><a href="#cb11-91" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DI"</span>, <span class="st">"DU-Prä"</span>, <span class="st">"KZT1-DU4"</span>, <span class="st">"KZT1-DUPost"</span>, <span class="st">"KZT2-DUPost"</span>,</span>
<span id="cb11-92"><a href="#cb11-92" aria-hidden="true" tabindex="-1"></a>  <span class="st">"LZT1-DUPost"</span>, <span class="st">"LZT2-DUPost"</span>,</span>
<span id="cb11-93"><a href="#cb11-93" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DU-Kat6"</span></span>
<span id="cb11-94"><a href="#cb11-94" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-95"><a href="#cb11-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-96"><a href="#cb11-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty labels for scale names</span></span>
<span id="cb11-97"><a href="#cb11-97" aria-hidden="true" tabindex="-1"></a>scale_pretty <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb11-98"><a href="#cb11-98" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb11-99"><a href="#cb11-99" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"^gsi$"</span>, <span class="st">"GSI"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-100"><a href="#cb11-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"total_score"</span>, <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-101"><a href="#cb11-101" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"dep_score"</span>, <span class="st">"Depression"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-102"><a href="#cb11-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"anx_score"</span>, <span class="st">"Anxiety"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-103"><a href="#cb11-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"str_score"</span>, <span class="st">"Stress"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-104"><a href="#cb11-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"^sum$"</span>, <span class="st">"Sum"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-105"><a href="#cb11-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"_"</span>, <span class="st">" "</span>)</span>
<span id="cb11-106"><a href="#cb11-106" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-107"><a href="#cb11-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-108"><a href="#cb11-108" aria-hidden="true" tabindex="-1"></a><span class="co"># Build metadata table once: one row per column name</span></span>
<span id="cb11-109"><a href="#cb11-109" aria-hidden="true" tabindex="-1"></a>meta <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(psy_vars, parse_psy_name) <span class="sc">%&gt;%</span></span>
<span id="cb11-110"><a href="#cb11-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-111"><a href="#cb11-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">instrument =</span> <span class="fu">recode</span>(instrument, <span class="sc">!!!</span>instrument_labels),</span>
<span id="cb11-112"><a href="#cb11-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">timepoint  =</span> <span class="fu">factor</span>(timepoint, <span class="at">levels =</span> tp_levels)</span>
<span id="cb11-113"><a href="#cb11-113" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Column-wise descriptives (mean/sd/n/missing) for one variable</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>desc_num <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  n_valid <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(x))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  n_miss  <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(x))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n_valid <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">tibble</span>(<span class="at">mean =</span> <span class="cn">NA_real_</span>, <span class="at">sd =</span> <span class="cn">NA_real_</span>, <span class="at">n =</span> <span class="dv">0</span>L, <span class="at">missing =</span> n_miss))</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd   =</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">n    =</span> n_valid,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing =</span> n_miss</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Cell formatter: show M ± SD and put n on a second line (HTML)</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>fmt_cell <span class="ot">&lt;-</span> <span class="cf">function</span>(mean, sd, n) {</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(mean) <span class="sc">|</span> <span class="fu">is.na</span>(sd)) <span class="fu">return</span>(<span class="st">""</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sprintf</span>(<span class="st">"%.2f ± %.2f%s n = %d"</span>, mean, sd, <span class="fu">cell_br</span>(), n)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Long format: one row per (variable column), then widen to timepoints as columns</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>psy_desc_long <span class="ot">&lt;-</span> meta <span class="sc">%&gt;%</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stats =</span> <span class="fu">map</span>(var, \(v) <span class="fu">desc_num</span>(working_data[[v]]))) <span class="sc">%&gt;%</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(stats) <span class="sc">%&gt;%</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cell =</span> <span class="fu">pmap_chr</span>(<span class="fu">list</span>(mean, sd, n), fmt_cell)) <span class="sc">%&gt;%</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(instrument, scale, timepoint, cell)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>psy_table <span class="ot">&lt;-</span> psy_desc_long <span class="sc">%&gt;%</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">timepoint =</span> <span class="fu">as.character</span>(timepoint)) <span class="sc">%&gt;%</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> timepoint, <span class="at">values_from =</span> cell) <span class="sc">%&gt;%</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(instrument, scale) <span class="sc">%&gt;%</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span><span class="fu">c</span>(instrument, scale), <span class="sc">~</span><span class="fu">replace_na</span>(.x, <span class="st">""</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Scale =</span> <span class="fu">scale_pretty</span>(scale)) <span class="sc">%&gt;%</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(instrument, Scale, <span class="fu">all_of</span>(<span class="fu">intersect</span>(tp_levels, <span class="fu">names</span>(.))))</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>table_for_print <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(.x), <span class="st">""</span>, .x)))</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>psy_tab1_df <span class="ot">&lt;-</span> psy_table <span class="sc">%&gt;%</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">instrument =</span> <span class="fu">as.character</span>(instrument)) <span class="sc">%&gt;%</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_section_rows</span>(<span class="at">section_col =</span> <span class="st">"instrument"</span>, <span class="at">label_col =</span> <span class="st">"Scale"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>instrument)</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>psy_tab_1 <span class="ot">&lt;-</span> <span class="fu">kable</span>(</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table_for_print</span>(psy_tab1_df),</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">format   =</span> <span class="fu">kable_fmt</span>(),</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape   =</span> <span class="cn">FALSE</span>,</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">booktabs =</span> <span class="fu">is_latex_output</span>(),</span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">longtable =</span> <span class="fu">is_latex_output</span>(),</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">align    =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="fu">rep</span>(<span class="st">"c"</span>, <span class="fu">ncol</span>(psy_tab1_df) <span class="sc">-</span> <span class="dv">1</span>)),</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Scale"</span>, <span class="fu">intersect</span>(tp_levels, <span class="fu">names</span>(psy_table)))</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [11]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>psy_tab_1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Scale</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">DI</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">DU-Prä</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">KZT1-DU4</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">KZT1-DUPost</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">KZT2-DUPost</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">LZT1-DUPost</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">LZT2-DUPost</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">DU-Kat6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>BDI</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Sum</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">23.45 ± 12.52<br>
n = 595</td>
<td style="text-align: center;">19.12 ± 11.23<br>
n = 272</td>
<td style="text-align: center;">16.42 ± 12.16<br>
n = 390</td>
<td style="text-align: center;">14.98 ± 12.40<br>
n = 299</td>
<td style="text-align: center;">14.53 ± 12.35<br>
n = 118</td>
<td style="text-align: center;">15.34 ± 12.42<br>
n = 29</td>
<td style="text-align: center;">12.96 ± 11.53<br>
n = 211</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>BSI</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">GSI</span></td>
<td style="text-align: center;">1.24 ± 0.71<br>
n = 495</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1.08 ± 0.67<br>
n = 275</td>
<td style="text-align: center;">1.01 ± 0.68<br>
n = 403</td>
<td style="text-align: center;">0.84 ± 0.67<br>
n = 314</td>
<td style="text-align: center;">1.03 ± 0.73<br>
n = 124</td>
<td style="text-align: center;">1.07 ± 0.62<br>
n = 30</td>
<td style="text-align: center;">0.84 ± 0.68<br>
n = 231</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>CGI</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">improvement patient</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2.36 ± 1.13<br>
n = 358</td>
<td style="text-align: center;">2.17 ± 1.08<br>
n = 272</td>
<td style="text-align: center;">1.90 ± 0.93<br>
n = 117</td>
<td style="text-align: center;">1.77 ± 0.57<br>
n = 30</td>
<td style="text-align: center;">2.26 ± 1.41<br>
n = 220</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">improvement therapist</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">2.73 ± 0.83<br>
n = 269</td>
<td style="text-align: center;">2.33 ± 0.93<br>
n = 182</td>
<td style="text-align: center;">2.03 ± 0.65<br>
n = 68</td>
<td style="text-align: center;">1.89 ± 0.58<br>
n = 18</td>
<td style="text-align: center;">1.74 ± 1.29<br>
n = 53</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>DASS</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Anxiety</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">11.62 ± 8.27<br>
n = 425</td>
<td style="text-align: center;">9.16 ± 7.30<br>
n = 146</td>
<td style="text-align: center;">8.07 ± 7.78<br>
n = 283</td>
<td style="text-align: center;">7.22 ± 7.19<br>
n = 236</td>
<td style="text-align: center;">8.26 ± 7.93<br>
n = 85</td>
<td style="text-align: center;">6.81 ± 8.11<br>
n = 21</td>
<td style="text-align: center;">6.66 ± 7.17<br>
n = 223</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Depression</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">19.37 ± 11.10<br>
n = 425</td>
<td style="text-align: center;">16.38 ± 10.18<br>
n = 146</td>
<td style="text-align: center;">13.03 ± 10.60<br>
n = 283</td>
<td style="text-align: center;">12.60 ± 11.09<br>
n = 236</td>
<td style="text-align: center;">11.13 ± 9.92<br>
n = 85</td>
<td style="text-align: center;">11.95 ± 9.54<br>
n = 21</td>
<td style="text-align: center;">11.39 ± 10.70<br>
n = 223</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Stress</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">18.91 ± 9.29<br>
n = 425</td>
<td style="text-align: center;">16.23 ± 8.74<br>
n = 146</td>
<td style="text-align: center;">14.56 ± 9.31<br>
n = 283</td>
<td style="text-align: center;">12.56 ± 9.33<br>
n = 236</td>
<td style="text-align: center;">13.73 ± 9.83<br>
n = 85</td>
<td style="text-align: center;">12.90 ± 9.04<br>
n = 21</td>
<td style="text-align: center;">12.66 ± 9.97<br>
n = 223</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Total</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">49.90 ± 24.23<br>
n = 425</td>
<td style="text-align: center;">41.77 ± 22.44<br>
n = 146</td>
<td style="text-align: center;">35.65 ± 24.47<br>
n = 283</td>
<td style="text-align: center;">32.38 ± 24.56<br>
n = 236</td>
<td style="text-align: center;">33.12 ± 25.07<br>
n = 85</td>
<td style="text-align: center;">31.67 ± 23.42<br>
n = 21</td>
<td style="text-align: center;">30.72 ± 25.00<br>
n = 223</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>GAS</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">pt mean</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1.48 ± 1.03<br>
n = 282</td>
<td style="text-align: center;">2.03 ± 1.10<br>
n = 235</td>
<td style="text-align: center;">2.12 ± 1.08<br>
n = 101</td>
<td style="text-align: center;">2.48 ± 0.84<br>
n = 24</td>
<td style="text-align: center;">2.25 ± 1.15<br>
n = 102</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">th mean</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">1.49 ± 1.02<br>
n = 217</td>
<td style="text-align: center;">2.09 ± 1.08<br>
n = 160</td>
<td style="text-align: center;">2.53 ± 0.94<br>
n = 57</td>
<td style="text-align: center;">2.98 ± 0.62<br>
n = 14</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Global ratings</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">pt benefit</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">4.59 ± 1.03<br>
n = 404</td>
<td style="text-align: center;">4.95 ± 0.96<br>
n = 311</td>
<td style="text-align: center;">5.07 ± 0.90<br>
n = 123</td>
<td style="text-align: center;">5.40 ± 0.62<br>
n = 30</td>
<td style="text-align: center;">4.72 ± 1.20<br>
n = 230</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">pt satisfaction</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">4.15 ± 1.06<br>
n = 404</td>
<td style="text-align: center;">4.48 ± 1.08<br>
n = 311</td>
<td style="text-align: center;">4.50 ± 0.98<br>
n = 123</td>
<td style="text-align: center;">4.70 ± 0.75<br>
n = 30</td>
<td style="text-align: center;">4.33 ± 1.19<br>
n = 230</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">th benefit</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">3.89 ± 0.94<br>
n = 311</td>
<td style="text-align: center;">4.36 ± 1.00<br>
n = 210</td>
<td style="text-align: center;">4.76 ± 0.80<br>
n = 72</td>
<td style="text-align: center;">5.17 ± 0.51<br>
n = 18</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">th satisfaction</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">3.67 ± 0.96<br>
n = 311</td>
<td style="text-align: center;">4.09 ± 1.09<br>
n = 210</td>
<td style="text-align: center;">4.44 ± 0.99<br>
n = 72</td>
<td style="text-align: center;">4.56 ± 0.78<br>
n = 18</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>PMH</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Sum</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">10.64 ± 5.79<br>
n = 588</td>
<td style="text-align: center;">11.50 ± 6.00<br>
n = 274</td>
<td style="text-align: center;">13.03 ± 6.43<br>
n = 401</td>
<td style="text-align: center;">14.05 ± 6.53<br>
n = 316</td>
<td style="text-align: center;">13.44 ± 6.24<br>
n = 121</td>
<td style="text-align: center;">12.70 ± 5.83<br>
n = 30</td>
<td style="text-align: center;">15.24 ± 6.79<br>
n = 230</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<p>Table 2 reports descriptive statistics restricted to patients with complete data at both pre-treatment and post-treatment assessments. For complete-case descriptive analyses, the post-treatment endpoint was defined as the assessment at the end of the second short-term therapy phase (KZT2-DUPost), as this represents the last common assessment across the majority of patients. This table provides a descriptive approximation of within-person change, independent of selective dropout.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [12]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose baseline and endpoint timepoints for complete-case table:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Baseline: prefer Pre-treatment; if not available, fall back to DI.</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>baseline_priority <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"DU-Prä"</span>, <span class="st">"DI"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Endpoint: fixed to KZT2-DUPost as the last "common" assessment</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>endpoint_priority <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"KZT2-DUPost"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>pick_first_present <span class="ot">&lt;-</span> <span class="cf">function</span>(tps, priority) {</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  hit <span class="ot">&lt;-</span> priority[priority <span class="sc">%in%</span> tps]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(hit) <span class="sc">==</span> <span class="dv">0</span>) <span class="cn">NA_character_</span> <span class="cf">else</span> hit[<span class="dv">1</span>]</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># For each (instrument, scale), select baseline + endpoint variable names</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> meta <span class="sc">%&gt;%</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(instrument, scale) <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">available_tps =</span> <span class="fu">list</span>(<span class="fu">unique</span>(<span class="fu">as.character</span>(timepoint))), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">baseline_tp =</span> <span class="fu">map_chr</span>(available_tps, pick_first_present, <span class="at">priority =</span> baseline_priority),</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">endpoint_tp =</span> <span class="fu">map_chr</span>(available_tps, pick_first_present, <span class="at">priority =</span> endpoint_priority)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(baseline_tp), <span class="sc">!</span><span class="fu">is.na</span>(endpoint_tp), baseline_tp <span class="sc">!=</span> endpoint_tp) <span class="sc">%&gt;%</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(meta <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">timepoint =</span> <span class="fu">as.character</span>(timepoint)), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"instrument"</span>, <span class="st">"scale"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">baseline_var =</span> var[timepoint <span class="sc">==</span> <span class="fu">first</span>(baseline_tp)][<span class="dv">1</span>],</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">endpoint_var =</span> var[timepoint <span class="sc">==</span> <span class="fu">first</span>(endpoint_tp)][<span class="dv">1</span>],</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">baseline_tp  =</span> <span class="fu">first</span>(baseline_tp),</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">endpoint_tp  =</span> <span class="fu">first</span>(endpoint_tp),</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(instrument, scale)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(instrument, scale, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="co"># safety: one row per scale</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectorized formatter for mean ± sd</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>fmt_mean_sd_vec <span class="ot">&lt;-</span> <span class="cf">function</span>(m, s) {</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%.2f \u00B1 %.2f"</span>, m, s)</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>  out[<span class="fu">is.na</span>(m) <span class="sc">|</span> <span class="fu">is.na</span>(s)] <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>  out</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute complete-case stats for one scale:</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co"># only participants with both baseline and endpoint non-missing</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>complete_case_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(data, pre_col, post_col) {</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>  pre  <span class="ot">&lt;-</span> data[[pre_col]]</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>  post <span class="ot">&lt;-</span> data[[post_col]]</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>  ok <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">is.na</span>(pre) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(post)</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">sum</span>(ok)</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">tibble</span>(</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="dv">0</span>L,</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">pre_mean =</span> <span class="cn">NA_real_</span>, <span class="at">pre_sd =</span> <span class="cn">NA_real_</span>,</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">post_mean =</span> <span class="cn">NA_real_</span>, <span class="at">post_sd =</span> <span class="cn">NA_real_</span>,</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">delta_mean =</span> <span class="cn">NA_real_</span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> n,</span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">pre_mean  =</span> <span class="fu">mean</span>(pre[ok], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">pre_sd    =</span> <span class="fu">sd</span>(pre[ok], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_mean =</span> <span class="fu">mean</span>(post[ok], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">post_sd   =</span> <span class="fu">sd</span>(post[ok], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">delta_mean =</span> <span class="fu">mean</span>(post[ok] <span class="sc">-</span> pre[ok], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># average within-person change</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Build Table 2</span></span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>table2 <span class="ot">&lt;-</span> pairs <span class="sc">%&gt;%</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stats =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(baseline_var, endpoint_var),</span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>                      \(b, e) <span class="fu">complete_case_stats</span>(working_data, b, e))) <span class="sc">%&gt;%</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(stats) <span class="sc">%&gt;%</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">Scale =</span> <span class="fu">scale_pretty</span>(scale),</span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">Baseline =</span> baseline_tp,</span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">Endpoint =</span> endpoint_tp,</span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Baseline M ± SD</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fmt_mean_sd_vec</span>(pre_mean, pre_sd),</span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Endpoint M ± SD</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fmt_mean_sd_vec</span>(post_mean, post_sd),</span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ΔM (End − Base)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(delta_mean), <span class="st">""</span>, <span class="fu">sprintf</span>(<span class="st">"%.2f"</span>, delta_mean)),</span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">as.integer</span>(n)</span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(instrument, Scale, Baseline, Endpoint, <span class="st">`</span><span class="at">Baseline M ± SD</span><span class="st">`</span>, <span class="st">`</span><span class="at">Endpoint M ± SD</span><span class="st">`</span>, <span class="st">`</span><span class="at">ΔM (End − Base)</span><span class="st">`</span>, n) <span class="sc">%&gt;%</span></span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(instrument, Scale)</span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a>psy_tab2_df <span class="ot">&lt;-</span> table2 <span class="sc">%&gt;%</span></span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">instrument =</span> <span class="fu">as.character</span>(instrument)) <span class="sc">%&gt;%</span></span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_section_rows</span>(<span class="at">section_col =</span> <span class="st">"instrument"</span>, <span class="at">label_col =</span> <span class="st">"Scale"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>instrument)</span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a>psy_tab_2 <span class="ot">&lt;-</span> <span class="fu">kable</span>(</span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table_for_print</span>(psy_tab2_df),</span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a>  <span class="at">format   =</span> <span class="fu">kable_fmt</span>(),</span>
<span id="cb14-92"><a href="#cb14-92" aria-hidden="true" tabindex="-1"></a>  <span class="at">escape   =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-93"><a href="#cb14-93" aria-hidden="true" tabindex="-1"></a>  <span class="at">booktabs =</span> <span class="fu">is_latex_output</span>(),</span>
<span id="cb14-94"><a href="#cb14-94" aria-hidden="true" tabindex="-1"></a>  <span class="at">longtable =</span> <span class="fu">is_latex_output</span>(),</span>
<span id="cb14-95"><a href="#cb14-95" aria-hidden="true" tabindex="-1"></a>  <span class="at">align    =</span> <span class="fu">c</span>(<span class="st">"l"</span>, <span class="fu">rep</span>(<span class="st">"c"</span>, <span class="fu">ncol</span>(psy_tab2_df) <span class="sc">-</span> <span class="dv">1</span>)),</span>
<span id="cb14-96"><a href="#cb14-96" aria-hidden="true" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb14-97"><a href="#cb14-97" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Scale"</span>, <span class="st">"Baseline"</span>, <span class="st">"Endpoint"</span>,</span>
<span id="cb14-98"><a href="#cb14-98" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Baseline M ± SD"</span>, <span class="st">"Endpoint M ± SD"</span>,</span>
<span id="cb14-99"><a href="#cb14-99" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ΔM (End − Base)"</span>, <span class="st">"n (complete)"</span></span>
<span id="cb14-100"><a href="#cb14-100" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-101"><a href="#cb14-101" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [13]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>psy_tab_2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Scale</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Baseline</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Endpoint</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Baseline M ± SD</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Endpoint M ± SD</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">ΔM (End − Base)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">n (complete)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>BDI</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Sum</span></td>
<td style="text-align: center;">DU-Prä</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">22.63 ± 11.98</td>
<td style="text-align: center;">14.98 ± 12.40</td>
<td style="text-align: center;">-7.65</td>
<td style="text-align: center;">299</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>BSI</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">GSI</span></td>
<td style="text-align: center;">DI</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">1.19 ± 0.67</td>
<td style="text-align: center;">0.83 ± 0.66</td>
<td style="text-align: center;">-0.36</td>
<td style="text-align: center;">253</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>DASS</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Anxiety</span></td>
<td style="text-align: center;">DU-Prä</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">11.38 ± 7.99</td>
<td style="text-align: center;">6.94 ± 6.95</td>
<td style="text-align: center;">-4.43</td>
<td style="text-align: center;">192</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Depression</span></td>
<td style="text-align: center;">DU-Prä</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">19.77 ± 11.41</td>
<td style="text-align: center;">12.82 ± 11.47</td>
<td style="text-align: center;">-6.95</td>
<td style="text-align: center;">192</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Stress</span></td>
<td style="text-align: center;">DU-Prä</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">19.02 ± 9.69</td>
<td style="text-align: center;">12.28 ± 9.22</td>
<td style="text-align: center;">-6.74</td>
<td style="text-align: center;">192</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Total</span></td>
<td style="text-align: center;">DU-Prä</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">50.16 ± 24.37</td>
<td style="text-align: center;">32.04 ± 24.61</td>
<td style="text-align: center;">-18.12</td>
<td style="text-align: center;">192</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>PMH</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="padding-left:1.2em; display:inline-block;">Sum</span></td>
<td style="text-align: center;">DU-Prä</td>
<td style="text-align: center;">KZT2-DUPost</td>
<td style="text-align: center;">10.60 ± 5.70</td>
<td style="text-align: center;">13.94 ± 6.56</td>
<td style="text-align: center;">3.34</td>
<td style="text-align: center;">297</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="{pagebreak}">

</div>
</section>
</section>
</section>
<section id="research-areas" class="level1">
<h1>Research areas</h1>
<p>This project comprises multiple complementary research areas that share a common dataset and preprocessing pipeline but address distinct research questions. To avoid analytic flexibility and to maximize interpretability, each substudy pre-specifies its text inputs, outcomes, and evaluation strategy.</p>
<section id="research-area-1-language-as-clinical-assessment-cross-sectional" class="level2">
<h2 class="anchored" data-anchor-id="research-area-1-language-as-clinical-assessment-cross-sectional">Research area 1: Language as clinical assessment (cross-sectional)</h2>
<p><strong>Core research question.</strong> Does patients’ pre-therapy language provide clinically meaningful information about symptom severity and functioning, and does it add predictive value beyond established self-report questionnaires?</p>
<p><strong>Text inputs.</strong> Q1 Problem developtment, Q10 <em>Problem description,</em> Q12 <em>Therapy goals</em></p>
<p><strong>Outcomes.</strong></p>
<ul>
<li><p>Convergent validity outcomes: Cross-sectional self-report symptom (BDI-II, BSI/GSI, DASS-42) and well-being (PMH) measures</p></li>
<li><p>Incremental validity outcomes: Clinician-rated symptom severity (CGI-Severity).</p></li>
</ul>
<p><strong>Models &amp; evaluation.</strong> Convergent validity with self-report symptom measures (BDI-II, BSI/GSI, DASS-42) will be evaluated by estimating the proportion of symptom variance explained by language-based representations. Incremental validity will be tested by assessing whether language explains additional variance in clinician-rated symptom severity (CGI-Severity) beyond self-report questionnaires.</p>
<p>The Sequential Evaluation with Model Pre-registration <span class="citation" data-cites="kjell_ganesan_boyd_oltmanns_rivero_feltman_carr_luft_kotov_schwartz_2024">(<a href="#ref-kjell_ganesan_boyd_oltmanns_rivero_feltman_carr_luft_kotov_schwartz_2024" role="doc-biblioref">Kjell, Ganesan, et al., 2024</a>)</span> framework will be implemented to ensure robust model development, mitigating overfitting and enabling unbiased performance evaluation. Additionally, evaluating models on prospective data will simulate real-world clinical deployment by assessing performance on new, unseen patient data.</p>
<p>Contextual embeddings derived from pretrained LLMs will be linked to clinical outcomes using state-of-the-art prediction models, including ridge regression <span class="citation" data-cites="Hoerl1970">(<a href="#ref-Hoerl1970" role="doc-biblioref">Hoerl &amp; Kennard, 1970</a>)</span>, lasso regression <span class="citation" data-cites="10.1111/j.2517-6161.1996.tb02080.x">(<a href="#ref-10.1111/j.2517-6161.1996.tb02080.x" role="doc-biblioref">Tibshirani, 1996</a>)</span>, and random forests <span class="citation" data-cites="598994">(<a href="#ref-598994" role="doc-biblioref">Ho, 1995</a>)</span>.</p>
</section>
<section id="research-area-2-patient-narratives-and-themes" class="level2">
<h2 class="anchored" data-anchor-id="research-area-2-patient-narratives-and-themes">Research area 2: Patient narratives and themes</h2>
<p><strong>Core research question.</strong> How do patients conceptualize the their mental health problems, as well as anticipated improvements, and how do these narrative patterns vary across diagnostic categories, baseline severity or sociodemographic (e.g.&nbsp;age, gender) and anamnestic (e.g.&nbsp;childhood trauma) characteristics.</p>
<p><strong>Text inputs.</strong> Q1 <em>Problem development</em>, Q2 <em>Extra stressors</em>, Q3 <em>Pre-onset changes</em>, Q6 <em>Problem causes</em>, Q7 <em>Expected improvements</em>, Q8 <em>Environment response</em>. Question-wise modeling.</p>
<p><strong>Outcomes.</strong> No single predictive outcome is specified, as the primary aim is interpretive and theory-generating rather than predictive.</p>
<p><strong>Models &amp; evaluation.</strong> Topic modeling; interpretive labeling; comparison of topic prevalence across patient groups.</p>
</section>
<section id="research-area-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction" class="level2">
<h2 class="anchored" data-anchor-id="research-area-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction">Research area 3: Predicting treatment response and goal attainment (longitudinal prediction)</h2>
<p><strong>Core research question.</strong> Can patients’ pre-therapy language predict clinically meaningful treatment outcomes beyond baseline symptom severity and demographic or anamnestic characteristics?</p>
<p><strong>Conceptual contribution.</strong> This substudy extends language-based mental health assessment from cross-sectional validity to prognostic utility. While prior work has primarily examined whether language reflects current symptom severity, less is known about whether pre-therapy narratives contain information relevant for predicting future treatment response.</p>
<p><strong>Text inputs.</strong> Primary: Q10, Q12, Q7, Q1; Secondary: concatenation models.</p>
<p><strong>Outcomes.</strong></p>
<ul>
<li><p>Clinician-rated improvement (CGI-Improvement) at 6 months-follow-up assessment.</p></li>
<li><p>Global therapy outcome ratings (patient- and therapist-reported) at 6 months-follow-up assessment.</p></li>
<li><p>Goal Attainment Scale at 6 months-follow-up assessment.</p></li>
<li><p>Pre-Post differences in symptom (BDI-II, BSI/GSI, DASS-42) and well-being (PMH) scales .</p></li>
</ul>
<p><strong>Models &amp; evaluation.</strong></p>
<ul>
<li><p>Baseline prognostic models: Demographic variables and baseline symptom severity and well-being (e.g., BDI-II, BSI/GSI, PMH, CGI-Severity).</p></li>
<li><p>Language-augmented models: Baseline predictors plus pre-therapy language representations.</p></li>
</ul>
</section>
<section id="research-area-4-prompt-based-llms-for-interpretable-language-assessment" class="level2">
<h2 class="anchored" data-anchor-id="research-area-4-prompt-based-llms-for-interpretable-language-assessment">Research area 4: Prompt-based LLMs for interpretable language assessment</h2>
<p><strong>Core research question.</strong> Can prompt-based LLMs reliably extract interpretable, clinically meaningful scores from pre-therapy narratives, and do these language measures add incremental value beyond (a) standardized questionnaires and (b) embedding-based language representations?</p>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-Beck1996" class="csl-entry" role="listitem">
Beck, A. T., Steer, R. A., &amp; Brown, G. K. (1996). <em><span>BDI-II</span>: <span>Beck Depression Inventory</span> manual</em> (2nd ed.). Psychological Corporation.
</div>
<div id="ref-bernstein2003" class="csl-entry" role="listitem">
Bernstein, D. P., Stein, J. A., Newcomb, M. D., Walker, E., Pogge, D., Ahluvalia, T., Stokes, J., Handelsman, L., Medrano, M., Desmond, D., &amp; Zule, W. (2003). Development and validation of a brief screening version of the Childhood Trauma Questionnaire. <em>Child Abuse &amp; Neglect</em>, <em>27</em>(2), 169–190. <a href="https://doi.org/10.1016/s0145-2134(02)00541-0">https://doi.org/10.1016/s0145-2134(02)00541-0</a>
</div>
<div id="ref-chorpita2011evidence" class="csl-entry" role="listitem">
Chorpita, B. F., Daleiden, E. L., Ebesutani, C., Young, J., Becker, K. D., Nakamura, B. J., Phillips, L., Ward, A., Lynch, R., Trent, L., et al. (2011). Evidence-based treatments for children and adolescents: <span>An</span> updated review of indicators of efficacy and effectiveness. <em>Clinical Psychology: Science and Practice</em>, <em>18</em>(2), 154–172.
</div>
<div id="ref-devlin-etal-2019-bert" class="csl-entry" role="listitem">
Devlin, J., Chang, M.-W., Lee, K., &amp; Toutanova, K. (2019). <span>BERT</span>: <span class="nocase">Pre-training</span> of deep bidirectional transformers for language understanding. In J. Burstein, C. Doran, &amp; T. Solorio (Eds.), <em>Proceedings of the 2019 conference of the north <span>American</span> chapter of the association for computational linguistics: <span>Human</span> language technologies, volume 1 (long and short papers)</em> (pp. 4171–4186). Association for Computational Linguistics. <a href="https://doi.org/10.18653/v1/N19-1423">https://doi.org/10.18653/v1/N19-1423</a>
</div>
<div id="ref-eberhardt2024" class="csl-entry" role="listitem">
Eberhardt, S. T., Schaffrath, J., Moggia, D., Schwartz, B., Jaehde, M., Rubel, J. A., Baur, T., André, E., &amp; Lutz, W. (2024). Decoding emotions: Exploring the validity of sentiment analysis in psychotherapy. <em>Psychotherapy Research</em>, <em>35</em>(2), 174–189. <a href="https://doi.org/10.1080/10503307.2024.2322522">https://doi.org/10.1080/10503307.2024.2322522</a>
</div>
<div id="ref-eichstaedt2018" class="csl-entry" role="listitem">
Eichstaedt, J. C., Smith, R. J., Merchant, R. M., Ungar, L. H., Crutchley, P., Preoţiuc-Pietro, D., Asch, D. A., &amp; Schwartz, H. A. (2018). Facebook language predicts depression in medical records. <em>Proceedings of the National Academy of Sciences</em>, <em>115</em>(44), 11203–11208. <a href="https://doi.org/10.1073/pnas.1802331115">https://doi.org/10.1073/pnas.1802331115</a>
</div>
<div id="ref-book" class="csl-entry" role="listitem">
Franke, G. (2002). <em>Franke, g.h. (2000). BSI. Brief symptom inventory - deutsche version. Manual. Göttingen: beltz.</em>
</div>
<div id="ref-598994" class="csl-entry" role="listitem">
Ho, T. K. (1995). Random decision forests. <em>Proceedings of 3rd International Conference on Document Analysis and Recognition</em>, <em>1</em>, 278–282 vol.1. <a href="https://doi.org/10.1109/ICDAR.1995.598994">https://doi.org/10.1109/ICDAR.1995.598994</a>
</div>
<div id="ref-Hoerl1970" class="csl-entry" role="listitem">
Hoerl, A. E., &amp; Kennard, R. W. (1970). Ridge <span>Regression</span>: <span>Biased Estimation</span> for <span>Nonorthogonal Problems</span>. <em>Technometrics</em>, <em>12</em>(1), 55–67. <a href="https://doi.org/10.1080/00401706.1970.10488634">https://doi.org/10.1080/00401706.1970.10488634</a>
</div>
<div id="ref-Jensen-Doss2008" class="csl-entry" role="listitem">
Jensen-Doss, A., &amp; Weisz, J. R. (2008). Diagnostic agreement predicts treatment process and outcomes in youth mental health clinics. <em>Journal of Consulting and Clinical Psychology</em>, <em>76</em>(5), 711–722. <a href="https://doi.org/10.1037/0022-006X.76.5.711">https://doi.org/10.1037/0022-006X.76.5.711</a>
</div>
<div id="ref-kiresuk1968" class="csl-entry" role="listitem">
Kiresuk, T. J., &amp; Sherman, R. E. (1968). Goal attainment scaling: A general method for evaluating comprehensive community mental health programs. <em>Community Mental Health Journal</em>, <em>4</em>(6), 443–453. <a href="https://doi.org/10.1007/BF01530764">https://doi.org/10.1007/BF01530764</a>
</div>
<div id="ref-kjell_ganesan_boyd_oltmanns_rivero_feltman_carr_luft_kotov_schwartz_2024" class="csl-entry" role="listitem">
Kjell, O. N. E., Ganesan, A. V., Boyd, R., Oltmanns, J. R., Rivero, A., Feltman, S., Carr, M. A., Luft, B. J., Kotov, R., &amp; Schwartz, H. A. (2024). <em>Demonstrating high validity of a new <span class="nocase">AI-language</span> assessment of <span>PTSD</span>: A sequential evaluation with model pre-registration</em>. PsyArXiv. <a href="https://doi.org/10.31234/osf.io/xw24e">https://doi.org/10.31234/osf.io/xw24e</a>
</div>
<div id="ref-kjell2019semantic" class="csl-entry" role="listitem">
Kjell, O. N. E., Kjell, K., Garcia, D., &amp; Sikström, S. (2019). Semantic measures: <span>Using</span> natural language processing to measure, differentiate, and describe psychological constructs. <em>Psychological Methods</em>, <em>24</em>(1), 92–115. <a href="https://doi.org/10.1037/met0000191">https://doi.org/10.1037/met0000191</a>
</div>
<div id="ref-Kjell2024" class="csl-entry" role="listitem">
Kjell, O. N. E., Kjell, K., &amp; Schwartz, H. A. (2024). Beyond rating scales: <span>With</span> targeted evaluation, large language models are poised for psychological assessment. <em>Psychiatry Research</em>, <em>333</em>, 115667. <a href="https://doi.org/10.1016/j.psychres.2023.115667">https://doi.org/10.1016/j.psychres.2023.115667</a>
</div>
<div id="ref-Kjell2022" class="csl-entry" role="listitem">
Kjell, O. N. E., Sikström, S., Kjell, K., &amp; Schwartz, H. A. (2022). Natural language analyzed with <span class="nocase">AI-based</span> transformers predict traditional subjective well-being measures approaching the theoretical upper limits in accuracy. <em>Scientific Reports</em>, <em>12</em>(1), 3918. <a href="https://doi.org/10.1038/s41598-022-07520-w">https://doi.org/10.1038/s41598-022-07520-w</a>
</div>
<div id="ref-Likert1932" class="csl-entry" role="listitem">
Likert, R. (1932). A technique for the measurement of attitudes. <em>Arch. Psychol.</em>, <em>140</em>(55).
</div>
<div id="ref-Lovibond1995" class="csl-entry" role="listitem">
Lovibond, P. F., &amp; Lovibond, S. H. (1995). The structure of negative emotional states: Comparison of the Depression Anxiety Stress Scales (DASS) with the Beck Depression and Anxiety Inventories. <em>Behaviour Research and Therapy</em>, <em>33</em>(3), 335–343. <a href="https://doi.org/10.1016/0005-7967(94)00075-u">https://doi.org/10.1016/0005-7967(94)00075-u</a>
</div>
<div id="ref-lukat2016" class="csl-entry" role="listitem">
Lukat, J., Margraf, J., Lutz, R., Veld, W. M. van der, &amp; Becker, E. S. (2016). Psychometric properties of the positive mental health scale (PMH-scale). <em>BMC Psychology</em>, <em>4</em>(1), 8. <a href="https://doi.org/10.1186/s40359-016-0111-x">https://doi.org/10.1186/s40359-016-0111-x</a>
</div>
<div id="ref-Lutz2022" class="csl-entry" role="listitem">
Lutz, W., Schwartz, B., &amp; Delgadillo, J. (2022). Measurement-<span>Based</span> and <span>Data-Informed Psychological Therapy</span>. <em>Annual Review of Clinical Psychology</em>, <em>18</em>(1), 71–98. <a href="https://doi.org/10.1146/annurev-clinpsy-071720-014821">https://doi.org/10.1146/annurev-clinpsy-071720-014821</a>
</div>
<div id="ref-margraf2021" class="csl-entry" role="listitem">
Margraf, J., Cwik, J. C., Brachel, R. von, Suppiger, A., &amp; Schneider, S. (2021). <em>DIPS open access 1.2: Diagnostisches interview bei psychischen störungen</em>. <a href="https://doi.org/10.46586/rub.172.149">https://doi.org/10.46586/rub.172.149</a>
</div>
<div id="ref-michalak2003" class="csl-entry" role="listitem">
Michalak, J., Kosfelder, J., Meyer, F., &amp; Schulte, D. (2003). Messung des Therapieerfolgs. <em>Zeitschrift für Klinische Psychologie und Psychotherapie</em>, <em>32</em>(2), 94–103. <a href="https://doi.org/10.1026/0084-5345.32.2.94">https://doi.org/10.1026/0084-5345.32.2.94</a>
</div>
<div id="ref-Radford2022" class="csl-entry" role="listitem">
Radford, A., Kim, J. W., Xu, T., Brockman, G., McLeavey, C., &amp; Sutskever, I. (2022). Robust <span>Speech Recognition</span> via <span>Large-Scale Weak Supervision</span>. <em>arXiv Preprint arXiv: 2212.04356</em>. <a href="https://arxiv.org/abs/2212.04356">https://arxiv.org/abs/2212.04356</a>
</div>
<div id="ref-shannon1948mathematical" class="csl-entry" role="listitem">
Shannon, C. E. (1948). A mathematical theory of communication. <em>The Bell System Technical Journal</em>, <em>27</em>(3), 379423.
</div>
<div id="ref-tanana2021" class="csl-entry" role="listitem">
Tanana, M. J., Soma, C. S., Kuo, P. B., Bertagnolli, N. M., Dembe, A., Pace, B. T., Srikumar, V., Atkins, D. C., &amp; Imel, Z. E. (2021). How do you feel? Using natural language processing to automatically rate emotion in psychotherapy. <em>Behavior Research Methods</em>, <em>53</em>(5), 2069–2082. <a href="https://doi.org/10.3758/s13428-020-01531-z">https://doi.org/10.3758/s13428-020-01531-z</a>
</div>
<div id="ref-10.1111/j.2517-6161.1996.tb02080.x" class="csl-entry" role="listitem">
Tibshirani, R. (1996). Regression shrinkage and selection via the lasso. <em>Journal of the Royal Statistical Society: Series B (Methodological)</em>, <em>58</em>(1), 267–288. <a href="https://doi.org/10.1111/j.2517-6161.1996.tb02080.x">https://doi.org/10.1111/j.2517-6161.1996.tb02080.x</a>
</div>
<div id="ref-Vaswani2017" class="csl-entry" role="listitem">
Vaswani, A., Shazeer, N., Parmar, N., Uszkoreit, J., Jones, L., Gomez, A. N., Kaiser, L., &amp; Polosukhin, I. (2017). Attention is <span>All</span> you <span>Need</span>. <em>Advances in <span>Neural Information Processing Systems</span></em>, <em>30</em>.
</div>
<div id="ref-wampold2015great" class="csl-entry" role="listitem">
Wampold, B. E., &amp; Imel, Z. E. (2015). <em>The great psychotherapy debate: <span>The</span> evidence for what makes psychotherapy work</em>. Routledge.
</div>
<div id="ref-wingenfeld2010" class="csl-entry" role="listitem">
Wingenfeld, K., Spitzer, C., Mensebach, C., Grabe, H., Hill, A., Gast, U., Schlosser, N., Höpp, H., Beblo, T., &amp; Driessen, M. (2010). Die deutsche Version des Childhood Trauma Questionnaire (CTQ): Erste Befunde zu den psychometrischen Kennwerten. <em>PPmP - Psychotherapie · Psychosomatik · Medizinische Psychologie</em>, <em>60</em>(08), e13–e13. <a href="https://doi.org/10.1055/s-0030-1253494">https://doi.org/10.1055/s-0030-1253494</a>
</div>
<div id="ref-WorldHealthOrganization2017" class="csl-entry" role="listitem">
World Health Organization. (2017). <em>Depression and other common mental disorders: <span>Global</span> health estimates</em>.
</div>
</div>
</section>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>  </div> <!-- /content -->  <script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script> 
  
</body></html>