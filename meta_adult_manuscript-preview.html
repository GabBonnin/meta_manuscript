<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.8.26">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Gabriel Bonnin">

    <title>Mental Health Evaluation through Text Analysis</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      html { -webkit-text-size-adjust: 100%; }
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      /* CSS for citations */
      div.csl-bib-body { }
      div.csl-entry {
        clear: both;
        margin-bottom: 0em;
      }
      .hanging-indent div.csl-entry {
        margin-left:2em;
        text-indent:-2em;
      }
      div.csl-left-margin {
        min-width:2em;
        float:left;
      }
      div.csl-right-inline {
        margin-left:2em;
        padding-left:1em;
      }
      div.csl-indent {
        margin-left: 2em;
      }    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a74871fe4945b66d259aafc266475145.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
     
      <meta name="citation_title" content="Mental Health Evaluation through Text Analysis">
<meta name="citation_author" content="Gabriel Bonnin">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Regression shrinkage and selection via the lasso;,citation_abstract=We propose a new method for estimation in linear models. The “lasso” minimizes the residual sum of squares subject to the sum of the absolute value of the coefficients being less than a constant. Because of the nature of this constraint it tends to produce some coefficients that are exactly 0 and hence gives interpretable models. Our simulation studies suggest that the lasso enjoys some of the favourable properties of both subset selection and ridge regression. It produces interpretable models like subset selection and exhibits the stability of ridge regression. There is also an interesting relationship with recent work in adaptive function estimation by Donoho and Johnstone. The lasso idea is quite general and can be applied in a variety of statistical models: extensions to generalized regression models and tree-based models are briefly described.;,citation_author=Robert Tibshirani;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;,citation_issue=1;,citation_doi=10.1111/j.2517-6161.1996.tb02080.x;,citation_issn=0035-9246;,citation_volume=58;,citation_journal_title=Journal of the Royal Statistical Society: Series B (Methodological);">
<meta name="citation_reference" content="citation_title=Latent dirichlet allocation;,citation_abstract=We describe latent Dirichlet allocation (LDA), a generative probabilistic model for collections of discrete data such as text corpora. LDA is a three-level hierarchical Bayesian model, in which each item of a collection is modeled as a finite mixture over an underlying set of topics. Each topic is, in turn, modeled as an infinite mixture over an underlying set of topic probabilities. In the context of text modeling, the topic probabilities provide an explicit representation of a document. We present efficient approximate inference techniques based on variational methods and an EM algorithm for empirical Bayes parameter estimation. We report results in document modeling, text classification, and collaborative filtering, comparing to a mixture of unigrams model and the probabilistic LSI model.;,citation_author=David M. Blei;,citation_author=Andrew Y. Ng;,citation_author=Michael I. Jordan;,citation_publication_date=2003-03;,citation_cover_date=2003-03;,citation_year=2003;,citation_issue=null;,citation_issn=1532-4435;,citation_volume=3;,citation_journal_title=Journal of Machine Learning Research;,citation_publisher=JMLR.org;">
<meta name="citation_reference" content="citation_title=Random decision forests;,citation_author=Tin Kam Ho;,citation_publication_date=1995;,citation_cover_date=1995;,citation_year=1995;,citation_doi=10.1109/ICDAR.1995.598994;,citation_volume=1;,citation_conference_title=Proceedings of 3rd international conference on document analysis and recognition;">
<meta name="citation_reference" content="citation_title=BDI-II: Beck Depression Inventory manual;,citation_author=A. T. Beck;,citation_author=R. A. Steer;,citation_author=G. K. Brown;,citation_publication_date=1996;,citation_cover_date=1996;,citation_year=1996;">
<meta name="citation_reference" content="citation_title=How Happy Is Happy Enough? A Cross-Cultural Comparison of Optimal Cut Points for the Positive Mental Health Scale;,citation_author=Gabriel Bonnin;,citation_author=Gerrit Hirschfeld;,citation_author=Ruth Brachel;,citation_author=Jürgen Margraf;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_issue=0;,citation_volume=0;,citation_journal_title=European Journal of Psychological Assessment;">
<meta name="citation_reference" content="citation_title=Die Klassifikation psychischer Störungen mit diagnostischen Interviews;,citation_author=Gabriel Bonnin;,citation_author=Svea Kröber;,citation_author=Ruth Brachel;,citation_editor=Tobias Teismann;,citation_editor=Patrizia Thoma;,citation_editor=S. Taubner;,citation_editor=Andre Wannemüller;,citation_editor=K. Sydow;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_inbook_title=Klinische Psychologie und Psychotherapie: Ein verfahrensübergreifendes Lehr- und Lernbuch;">
<meta name="citation_reference" content="citation_title=Evidence-based treatments for children and adolescents: An updated review of indicators of efficacy and effectiveness;,citation_author=Bruce F Chorpita;,citation_author=Eric L Daleiden;,citation_author=Chad Ebesutani;,citation_author=John Young;,citation_author=Kimberly D Becker;,citation_author=Brad J Nakamura;,citation_author=Lisa Phillips;,citation_author=Alyssa Ward;,citation_author=Roxanna Lynch;,citation_author=Lindsay Trent;,citation_author=others;,citation_publication_date=2011;,citation_cover_date=2011;,citation_year=2011;,citation_issue=2;,citation_volume=18;,citation_journal_title=Clinical Psychology: Science and Practice;,citation_publisher=Wiley Online Library;">
<meta name="citation_reference" content="citation_title=BERT: Pre-training of deep bidirectional transformers for language understanding;,citation_abstract=We introduce a new language representation model called BERT, which stands for Bidirectional Encoder Representations from Transformers. Unlike recent language representation models (Peters et al., 2018a; Radford et al., 2018), BERT is designed to pre-train deep bidirectional representations from unlabeled text by jointly conditioning on both left and right context in all layers. As a result, the pre-trained BERT model can be fine-tuned with just one additional output layer to create state-of-the-art models for a wide range of tasks, such as question answering and language inference, without substantial task-specific architecture modifications. BERT is conceptually simple and empirically powerful. It obtains new state-of-the-art results on eleven natural language processing tasks, including pushing the GLUE score to 80.5 (7.7 point absolute improvement), MultiNLI accuracy to 86.7% (4.6% absolute improvement), SQuAD v1.1 question answering Test F1 to 93.2 (1.5 point absolute improvement) and SQuAD v2.0 Test F1 to 83.1 (5.1 point absolute improvement).;,citation_author=Jacob Devlin;,citation_author=Ming-Wei Chang;,citation_author=Kenton Lee;,citation_author=Kristina Toutanova;,citation_editor=Jill Burstein;,citation_editor=Christy Doran;,citation_editor=Thamar Solorio;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/N19-1423;,citation_conference_title=Proceedings of the 2019 conference of the north American chapter of the association for computational linguistics: Human language technologies, volume 1 (long and short papers);,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=BERTopic: Neural topic modeling with a class-based TF-IDF procedure;,citation_author=Maarten Grootendorst;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2203.05794;">
<meta name="citation_reference" content="citation_title=Natural language response formats for assessing depression and worry with large language models: A sequential evaluation with model pre-registration;,citation_author=Zhuojun Gu;,citation_author=Katarina Kjell;,citation_author=H. A Schwartz;,citation_author=Oscar N E Kjell;,citation_publication_date=2024-07;,citation_cover_date=2024-07;,citation_year=2024;,citation_doi=10.31234/osf.io/p67db;,citation_publisher=PsyArXiv;">
<meta name="citation_reference" content="citation_title=Natural Language Response Formats for Assessing Depression and Worry with Large Language Models: A Sequential Evaluation with Model Pre-registration;,citation_abstract=Large Language Models can transform individuals’ mental health descriptions into scores that correlate with rating scales approaching theoretical upper limits. However, such analyses have combined word- and text-responses with little known about their differences. We develop response formats ranging from closed-ended to open-ended: 1) select words from lists, write 2) descriptive words, 3) phrases, or 4) texts. Participants answered questions about their depression/worry using the response formats and related rating scales. Language responses were transformed into word embeddings and trained to rating scales. We compare the validity (concurrent, incremental, face, discriminant, and external validity) and reliability (prospective sample and test-retest reliability) of the response formats. Using the Sequential Evaluation with Model Pre-registration design, machine-learning models were trained on a development dataset (N=963), and then pre-registered before tested on a prospective sample (N=145). The pre-registered models demonstrate strong validity and reliability, yielding high accuracy in the prospective sample (r=.60–.79). Additionally, the models demonstrated external validity to self-reported sick-leave/healthcare visits, where the text-format yielded the strongest correlations (being higher/equal to rating scales for 9 of 12 cases). The overall high validity and reliability across formats suggest the possibility of choosing formats according to clinical needs.;,citation_author=Zhuojun Gu;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_author=Oscar Nils Erik Kjell;,citation_publication_date=2024-07;,citation_cover_date=2024-07;,citation_year=2024;,citation_doi=10.31234/osf.io/p67db;,citation_language=en-US;">
<meta name="citation_reference" content="citation_title=Ridge Regression: Biased Estimation for Nonorthogonal Problems;,citation_author=A. E. Hoerl;,citation_author=R. W. Kennard;,citation_publication_date=1970;,citation_cover_date=1970;,citation_year=1970;,citation_issue=1;,citation_doi=10.1080/00401706.1970.10488634;,citation_volume=12;,citation_journal_title=Technometrics;">
<meta name="citation_reference" content="citation_title=A blended learning course on the diagnostics of mental disorders: Multicenter cluster randomized noninferiority trial;,citation_abstract=Background: Clinical diagnoses determine if and how therapists treat their patients. As misdiagnoses can have severe adverse effects, disseminating evidence-based diagnostic skills into clinical practice is highly important. Objective: This study aimed to develop and evaluate a blended learning course in a multicenter cluster randomized controlled trial. Methods: Undergraduate psychology students (N=350) enrolled in 18 university courses at 3 universities. The courses were randomly assigned to blended learning or traditional synchronous teaching. The primary outcome was the participants’ performances in a clinical diagnostic interview after the courses. The secondary outcomes were diagnostic knowledge and participants’ reactions to the courses. All outcomes were analyzed on the individual participant level using noninferiority testing. Results: Compared with the synchronous course (74.6% pass rate), participation in the blended learning course (89% pass rate) increased the likelihood of successfully passing the behavioral test (odds ratio 2.77, 95% CI 1.55-5.13), indicating not only noninferiority but superiority of the blended learning course. Furthermore, superiority of the blended learning over the synchronous course could be found regarding diagnostic knowledge ($\beta$=.13, 95% CI 0.01-0.26), course clarity ($\beta$=.40, 95% CI 0.27-0.53), course structure ($\beta$=.18, 95% CI 0.04-0.32), and informativeness ($\beta$=.19, 95% CI 0.06-0.32). Conclusions: Blended learning can help to improve the diagnostic skills and knowledge of (future) clinicians and thus make an important contribution to improving mental health care. Trial Registration: ClinicalTrials.gov NCT05294094; https://clinicaltrials.gov/study/NCT05294094;,citation_author=Gabriel Bonnin;,citation_author=Svea Kröber;,citation_author=Silvia Schneider;,citation_author=Jürgen Margraf;,citation_author=Verena Pflug;,citation_author=Alexander L Gerlach;,citation_author=Timo Slotta;,citation_author=Hanna Christiansen;,citation_author=Björn Albrecht;,citation_author=Mira-Lynn Chavanon;,citation_author=Gerrit Hirschfeld;,citation_author=Tina In-Albon;,citation_author=Meinald T Thielsch;,citation_author=Ruth Brachel;,citation_publication_date=2024-11;,citation_cover_date=2024-11;,citation_year=2024;,citation_doi=10.2196/54176;,citation_issn=1438-8871;,citation_volume=26;,citation_journal_title=Journal of medical Internet research;">
<meta name="citation_reference" content="citation_title=Diagnostic agreement predicts treatment process and outcomes in youth mental health clinics;,citation_abstract=Several studies have documented low rates of agreement between clinician- and researcher-generated diagnoses. However, little is known about whether this lack of agreement has implications for the processes and outcomes of subsequent treatment. To study this possibility, the authors used diagnostic agreement to predict therapy engagement and outcomes for 197 youths treated in 5 community mental health clinics. Diagnostic agreement predicted better therapy engagement, with the agree group having fewer therapy no-shows and cancellations and a decreased likelihood of therapy dropout. Additionally, support for a link between agreement and treatment outcomes was found, as the agree group obtained larger reductions in parent-reported internalizing problems during treatment. These findings suggest that diagnostic accuracy may be an important precursor to successful treatment and highlight the importance of future research to find ways to incorporate standardized diagnostic procedures into clinical care settings. (PsycInfo Database Record (c) 2021 APA, all rights reserved);,citation_author=Amanda Jensen-Doss;,citation_author=John R. Weisz;,citation_publication_date=2008;,citation_cover_date=2008;,citation_year=2008;,citation_issue=5;,citation_doi=10.1037/0022-006X.76.5.711;,citation_issn=1939-2117;,citation_volume=76;,citation_journal_title=Journal of Consulting and Clinical Psychology;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=The global landscape of AI ethics guidelines;,citation_author=Anna Jobin;,citation_author=Marcello Ienca;,citation_author=Effy Vayena;,citation_publication_date=2019-09;,citation_cover_date=2019-09;,citation_year=2019;,citation_issue=9;,citation_doi=10.1038/s42256-019-0088-2;,citation_issn=2522-5839;,citation_volume=1;,citation_language=en-US;,citation_journal_title=Nature Machine Intelligence;">
<meta name="citation_reference" content="citation_title=Demonstrating high validity of a new AI-language assessment of PTSD: A sequential evaluation with model pre-registration;,citation_author=Oscar N E Kjell;,citation_author=Adithya V Ganesan;,citation_author=Ryan Boyd;,citation_author=Joshua R Oltmanns;,citation_author=Alfredo Rivero;,citation_author=Scott Feltman;,citation_author=Melissa A Carr;,citation_author=Benjamin J Luft;,citation_author=Roman Kotov;,citation_author=H. A Schwartz;,citation_publication_date=2024-10;,citation_cover_date=2024-10;,citation_year=2024;,citation_doi=10.31234/osf.io/xw24e;,citation_publisher=PsyArXiv;">
<meta name="citation_reference" content="citation_title=Semantic measures: Using natural language processing to measure, differentiate, and describe psychological constructs.;,citation_author=Oscar N. E. Kjell;,citation_author=Katarina Kjell;,citation_author=Danilo Garcia;,citation_author=Sverker Sikström;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_issue=1;,citation_doi=10.1037/met0000191;,citation_volume=24;,citation_journal_title=Psychological Methods;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=Natural language analyzed with AI-based transformers predict traditional subjective well-being measures approaching the theoretical upper limits in accuracy;,citation_abstract=Abstract We show that using a recent break-through in artificial intelligence – transformers– , psychological assessments from text-responses can approach theoretical upper limits in accuracy, converging with standard psychological rating scales. Text-responses use people’s primary form of communication – natural language – and have been suggested as a more ecologically-valid response format than closed-ended rating scales that dominate social science. However, previous language analysis techniques left a gap between how accurately they converged with standard rating scales and how well ratings scales converge with themselves – a theoretical upper-limit in accuracy. Most recently, AI-based language analysis has gone through a transformation as nearly all of its applications, from Web search to personalized assistants (e.g., Alexa and Siri), have shown unprecedented improvement by using transformers. We evaluate transformers for estimating psychological well-being from questionnaire text- and descriptive word-responses, and find accuracies converging with rating scales that approach the theoretical upper limits (Pearson r  =&nbsp;0.85, p  $&amp;amp;amp;lt;$ 0.001, N  = 608; in line with most metrics of rating scale reliability). These findings suggest an avenue for modernizing the ubiquitous questionnaire and ultimately opening doors to a greater understanding of the human condition.;,citation_author=Oscar N. E. Kjell;,citation_author=Sverker Sikström;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_publication_date=2022-03;,citation_cover_date=2022-03;,citation_year=2022;,citation_issue=1;,citation_doi=10.1038/s41598-022-07520-w;,citation_issn=2045-2322;,citation_volume=12;,citation_language=en-US;,citation_journal_title=Scientific Reports;">
<meta name="citation_reference" content="citation_title=The text-package: An R-package for analyzing and visualizing human language using natural language processing and transformers.;,citation_abstract=The language that individuals use for expressing themselves contains rich psychological information. Recent significant advances in Natural Language Processing (NLP) and Deep Learning (DL), namely transformers, have resulted in large performance gains in tasks related to understanding natural language. However, these state-of-the-art methods have not yet been made easily accessible for psychology researchers, nor designed to be optimal for human-level analyses. This tutorial introduces text (https://r-text.org/), a new R-package for analyzing and visualizing human language using transformers, the latest techniques from NLP and DL. The text-package is both a modular solution for accessing state-of-the-art language models and an end-to-end solution catered for human-level analyses. Hence, text provides user-friendly functions tailored to test hypotheses in social sciences for both relatively small and large data sets. The tutorial describes methods for analyzing text, providing functions with reliable defaults that can be used off-the-shelf as well as providing a framework for the advanced users to build on for novel pipelines. The reader learns about three core methods: (1) textEmbed(): to transform text to modern transformer-based word embeddings; (2) textTrain() and textPredict(): to train predictive models with embeddings as input, and use the models to predict from; (3) textSimilarity() and textDistance(): to compute semantic similarity/distance scores between texts. The reader also learns about two extended methods: (1) textProjection()/textProjectionPlot() and (2) textCentrality()/ textCentralityPlot(): to examine and visualize text within the embedding space.;,citation_author=Oscar Kjell;,citation_author=Salvatore Giorgi;,citation_author=H. Andrew Schwartz;,citation_publication_date=2023-12;,citation_cover_date=2023-12;,citation_year=2023;,citation_issue=6;,citation_doi=10.1037/met0000542;,citation_issn=1939-1463, 1082-989X;,citation_volume=28;,citation_language=en-US;,citation_journal_title=Psychological Methods;">
<meta name="citation_reference" content="citation_title=Beyond rating scales: With targeted evaluation, large language models are poised for psychological assessment;,citation_abstract=In this narrative review, we survey recent empirical evaluations of AI-based language assessments and present a case for the technology of large language models to be poised for changing standardized psychological assess ment. Artificial intelligence has been undergoing a purported “paradigm shift” initiated by new machine learning models, large language models (e.g., BERT, LAMMA, and that behind ChatGPT). These models have led to un precedented accuracy over most computerized language processing tasks, from web searches to automatic ma chine translation and question answering, while their dialogue-based forms, like ChatGPT have captured the interest of over a million users. The success of the large language model is mostly attributed to its capability to numerically represent words in their context, long a weakness of previous attempts to automate psychological assessment from language. While potential applications for automated therapy are beginning to be studied on the heels of chatGPT’s success, here we present evidence that suggests, with thorough validation of targeted deployment scenarios, that AI’s newest technology can move mental health assessment away from rating scales and to instead use how people naturally communicate, in language.;,citation_author=Oscar N. E. Kjell;,citation_author=Katarina Kjell;,citation_author=H. Andrew Schwartz;,citation_publication_date=2024-03;,citation_cover_date=2024-03;,citation_year=2024;,citation_doi=10.1016/j.psychres.2023.115667;,citation_issn=01651781;,citation_volume=333;,citation_language=en-US;,citation_journal_title=Psychiatry Research;">
<meta name="citation_reference" content="citation_title=Client-identified outcomes of individual psychotherapy: A qualitative meta-analysis;,citation_abstract=Background Psychotherapy outcomes are typically measured in terms of symptom relief. However, this method might overlook important changes from clients’ perspectives when they are asked to report on them. A more client-centred approach might bring a deeper understanding of psychotherapy outcomes. We aimed to evaluate the outcomes identified by clients within qualitative psychotherapy research.;,citation_author=Michaela Ladmanová;,citation_author=Tomáš Řiháček;,citation_author=Ladislav Timulak;,citation_author=Klára Jonášová;,citation_author=Barbora Kubantová;,citation_author=Petr Mikoška;,citation_author=Lucia Polakovská;,citation_author=Robert Elliott;,citation_publication_date=2025-01;,citation_cover_date=2025-01;,citation_year=2025;,citation_issue=1;,citation_doi=10.1016/S2215-0366(24)00356-0;,citation_issn=22150366;,citation_volume=12;,citation_language=en-US;,citation_journal_title=The Lancet Psychiatry;">
<meta name="citation_reference" content="citation_title=TrOCR: Transformer-based optical character recognition with pre-trained models;,citation_author=Minghao Li;,citation_author=Tengchao Lv;,citation_author=Jingye Chen;,citation_author=Lei Cui;,citation_author=Yijuan Lu;,citation_author=Dinei Florencio;,citation_author=Cha Zhang;,citation_author=Zhoujun Li;,citation_author=Furu Wei;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2109.10282;">
<meta name="citation_reference" content="citation_title=A technique for the measurement of attitudes;,citation_author=R. Likert;,citation_publication_date=1932;,citation_cover_date=1932;,citation_year=1932;,citation_issue=55;,citation_volume=140;,citation_journal_title=Arch. Psychol.;,citation_series_title=22th series;">
<meta name="citation_reference" content="citation_title=Measurement-Based and Data-Informed Psychological Therapy;,citation_abstract=Outcome measurement in the field of psychotherapy has developed considerably in the last decade. This review discusses key issues related to outcome measurement, modeling, and implementation of data-informed and measurement-based psychological therapy. First, an overview is provided, covering the rationale of outcome measurement by acknowledging some of the limitations of clinical judgment. Second, different models of outcome measurement are discussed, including pre–post, session-by-session, and higher-resolution intensive outcome assessments. Third, important concepts related to modeling patterns of change are addressed, including early response, dose–response, and nonlinear change. Furthermore, rational and empirical decision tools are discussed as the foundation for measurementbased therapy. Fourth, examples of clinical applications are presented, which show great promise to support the personalization of therapy and to prevent treatment failure. Finally, we build on continuous outcome measurement as the basis for a broader understanding of clinical concepts and data-driven clinical practice in the future.;,citation_author=Wolfgang Lutz;,citation_author=Brian Schwartz;,citation_author=Jaime Delgadillo;,citation_publication_date=2022-05;,citation_cover_date=2022-05;,citation_year=2022;,citation_issue=1;,citation_doi=10.1146/annurev-clinpsy-071720-014821;,citation_issn=1548-5943, 1548-5951;,citation_volume=18;,citation_language=en-US;,citation_journal_title=Annual Review of Clinical Psychology;">
<meta name="citation_reference" content="citation_title=Suicide risk assessment with multi-level dual-context language and BERT;,citation_abstract=Mental health predictive systems typically model language as if from a single context (e.g. Twitter posts, status updates, or forum posts) and often limited to a single level of analysis (e.g. either the message-level or user-level). Here, we bring these pieces together to explore the use of open-vocabulary (BERT embeddings, topics) and theoretical features (emotional expression lexica, personality) for the task of suicide risk assessment on support forums (the CLPsych-2019 Shared Task). We used dual context based approaches (modeling content from suicide forums separate from other content), built over both traditional ML models as well as a novel dual RNN architecture with user-factor adaptation. We find that while affect from the suicide context distinguishes with no-risk from those with “any-risk”, personality factors from the non-suicide contexts provide distinction of the levels of risk: low, medium, and high risk. Within the shared task, our dual-context approach (listed as SBU-HLAB in the official results) achieved state-of-the-art performance predicting suicide risk using a combination of suicide-context and non-suicide posts (Task B), achieving an F1 score of 0.50 over hidden test set labels.;,citation_author=Matthew Matero;,citation_author=Akash Idnani;,citation_author=Youngseo Son;,citation_author=Salvatore Giorgi;,citation_author=Huy Vu;,citation_author=Mohammad Zamani;,citation_author=Parth Limbachiya;,citation_author=Sharath Chandra Guntuku;,citation_author=H. Andrew Schwartz;,citation_editor=Kate Niederhoffer;,citation_editor=Kristy Hollingshead;,citation_editor=Philip Resnik;,citation_editor=Rebecca Resnik;,citation_editor=Kate Loveys;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/W19-3005;,citation_conference_title=Proceedings of the sixth workshop on computational linguistics and clinical psychology;,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=CLaC at CLPsych 2019: Fusion of neural features and predicted class probabilities for suicide risk assessment based on online posts;,citation_abstract=This paper summarizes our participation to the CLPsych 2019 shared task, under the name CLaC. The goal of the shared task was to detect and assess suicide risk based on a collection of online posts. For our participation, we used an ensemble method which utilizes 8 neural sub-models to extract neural features and predict class probabilities, which are then used by an SVM classifier. Our team ranked first in 2 out of the 3 tasks (tasks A and C).;,citation_author=Elham Mohammadi;,citation_author=Hessam Amini;,citation_author=Leila Kosseim;,citation_editor=Kate Niederhoffer;,citation_editor=Kristy Hollingshead;,citation_editor=Philip Resnik;,citation_editor=Rebecca Resnik;,citation_editor=Kate Loveys;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/W19-3004;,citation_conference_title=Proceedings of the sixth workshop on computational linguistics and clinical psychology;,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=Robust Speech Recognition via Large-Scale Weak Supervision;,citation_abstract=We study the capabilities of speech processing systems trained simply to predict large amounts of transcripts of audio on the internet. When scaled to 680,000 hours of multilingual and multitask supervision, the resulting models generalize well to standard benchmarks and are often competitive with prior fully supervised results without the need for any dataset specific fine-tuning. When compared to humans, the models approach their accuracy and robustness. We are releasing models and inference code to serve as a foundation for further work on robust speech processing.;,citation_author=Alec Radford;,citation_author=Jong Wook Kim;,citation_author=Tao Xu;,citation_author=Greg Brockman;,citation_author=Christine McLeavey;,citation_author=Ilya Sutskever;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2212.04356;,citation_language=en-US;,citation_journal_title=arXiv preprint arXiv: 2212.04356;">
<meta name="citation_reference" content="citation_title=Sentence-BERT: Sentence embeddings using siamese BERT-networks;,citation_author=Nils Reimers;,citation_author=Iryna Gurevych;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://arxiv.org/abs/1908.10084;">
<meta name="citation_reference" content="citation_title=Attention is All you Need;,citation_abstract=The dominant sequence transduction models are based on complex recurrent orconvolutional neural networks in an encoder and decoder configuration. The best performing such models also connect the encoder and decoder through an attentionm echanisms. We propose a novel, simple network architecture based solely onan attention mechanism, dispensing with recurrence and convolutions entirely.Experiments on two machine translation tasks show these models to be superiorin quality while being more parallelizable and requiring significantly less timeto train. Our single model with 165 million parameters, achieves 27.5 BLEU onEnglish-to-German translation, improving over the existing best ensemble result by over 1 BLEU. On English-to-French translation, we outperform the previoussingle state-of-the-art with model by 0.7 BLEU, achieving a BLEU score of 41.1.;,citation_author=Ashish Vaswani;,citation_author=Noam Shazeer;,citation_author=Niki Parmar;,citation_author=Jakob Uszkoreit;,citation_author=Llion Jones;,citation_author=Aidan N Gomez;,citation_author=L. Kaiser;,citation_author=Illia Polosukhin;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_volume=30;,citation_conference_title=Advances in Neural Information Processing Systems;,citation_conference=Curran Associates, Inc.;">
<meta name="citation_reference" content="citation_title=The great psychotherapy debate: The evidence for what makes psychotherapy work;,citation_author=Bruce E Wampold;,citation_author=Zac E Imel;,citation_publication_date=2015;,citation_cover_date=2015;,citation_year=2015;">
<meta name="citation_reference" content="citation_title=Smarter, better, faster, longer: A modern bidirectional encoder for fast, memory efficient, and long context finetuning and inference;,citation_author=Benjamin Warner;,citation_author=Antoine Chaffin;,citation_author=Benjamin Clavié;,citation_author=Orion Weller;,citation_author=Oskar Hallström;,citation_author=Said Taghadouini;,citation_author=Alexis Gallagher;,citation_author=Raja Biswas;,citation_author=Faisal Ladhak;,citation_author=Tom Aarsen;,citation_author=Nathan Cooper;,citation_author=Griffin Adams;,citation_author=Jeremy Howard;,citation_author=Iacopo Poli;,citation_publication_date=2024;,citation_cover_date=2024;,citation_year=2024;,citation_fulltext_html_url=https://arxiv.org/abs/2412.13663;">
<meta name="citation_reference" content="citation_title=Depression and other common mental disorders: Global health estimates;,citation_author=World Health Organization;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;">
<meta name="citation_reference" content="citation_title=International Classification of Diseases, Eleventh Revision (ICD-11);,citation_author=World Health Organization;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=CLPsych 2019 shared task: Predicting the degree of suicide risk in Reddit posts;,citation_abstract=The shared task for the 2019 Workshop on Computational Linguistics and Clinical Psychology (CLPsych‘19) introduced an assessment of suicide risk based on social media postings, using data from Reddit to identify users at no, low, moderate, or severe risk. Two variations of the task focused on users whose posts to the r/SuicideWatch subreddit indicated they might be at risk; a third task looked at screening users based only on their more everyday (non-SuicideWatch) posts. We received submissions from 15 different teams, and the results provide progress and insight into the value of language signal in helping to predict risk level.;,citation_author=Ayah Zirikly;,citation_author=Philip Resnik;,citation_author=Özlem Uzuner;,citation_author=Kristy Hollingshead;,citation_editor=Kate Niederhoffer;,citation_editor=Kristy Hollingshead;,citation_editor=Philip Resnik;,citation_editor=Rebecca Resnik;,citation_editor=Kate Loveys;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_doi=10.18653/v1/W19-3003;,citation_conference_title=Proceedings of the sixth workshop on computational linguistics and clinical psychology;,citation_conference=Association for Computational Linguistics;">
<meta name="citation_reference" content="citation_title=DIPS open access 1.2: Diagnostisches interview bei psychischen störungen;,citation_author=Jürgen Margraf;,citation_author=Jan Christopher Cwik;,citation_author=Ruth Brachel;,citation_author=Andrea Suppiger;,citation_author=Silvia Schneider;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=http://dx.doi.org/10.46586/rub.172.149;,citation_doi=10.46586/rub.172.149;">
<meta name="citation_reference" content="citation_title=Messung des Therapieerfolgs;,citation_author=Johannes Michalak;,citation_author=Joachim Kosfelder;,citation_author=Frank Meyer;,citation_author=Dietmar Schulte;,citation_publication_date=2003-04;,citation_cover_date=2003-04;,citation_year=2003;,citation_fulltext_html_url=https://econtent.hogrefe.com/doi/10.1026/0084-5345.32.2.94;,citation_issue=2;,citation_doi=10.1026/0084-5345.32.2.94;,citation_volume=32;,citation_language=de;,citation_journal_title=Zeitschrift für Klinische Psychologie und Psychotherapie;">
<meta name="citation_reference" content="citation_title=The structure of negative emotional states: Comparison of the Depression Anxiety Stress Scales (DASS) with the Beck Depression and Anxiety Inventories;,citation_author=P. F. Lovibond;,citation_author=S. H. Lovibond;,citation_publication_date=1995-03;,citation_cover_date=1995-03;,citation_year=1995;,citation_fulltext_html_url=http://dx.doi.org/10.1016/0005-7967(94)00075-u;,citation_issue=3;,citation_doi=10.1016/0005-7967(94)00075-u;,citation_volume=33;,citation_language=en;,citation_journal_title=Behaviour Research and Therapy;">
<meta name="citation_reference" content="citation_title=Franke, g.h. (2000). BSI. Brief symptom inventory - deutsche version. Manual. Göttingen: beltz.;,citation_author=Gabriele Franke;,citation_publication_date=2002-01;,citation_cover_date=2002-01;,citation_year=2002;">
<meta name="citation_reference" content="citation_title=Goal attainment scaling: A general method for evaluating comprehensive community mental health programs;,citation_author=Thomas J. Kiresuk;,citation_author=Robert E. Sherman;,citation_publication_date=1968-12;,citation_cover_date=1968-12;,citation_year=1968;,citation_fulltext_html_url=http://link.springer.com/10.1007/BF01530764;,citation_issue=6;,citation_doi=10.1007/BF01530764;,citation_volume=4;,citation_language=en;,citation_journal_title=Community Mental Health Journal;">
<meta name="citation_reference" content="citation_title=Psychometric properties of the positive mental health scale (PMH-scale);,citation_author=Justina Lukat;,citation_author=Jürgen Margraf;,citation_author=Rainer Lutz;,citation_author=William M. Veld;,citation_author=Eni S. Becker;,citation_publication_date=2016-02-10;,citation_cover_date=2016-02-10;,citation_year=2016;,citation_fulltext_html_url=https://doi.org/10.1186/s40359-016-0111-x;,citation_issue=1;,citation_doi=10.1186/s40359-016-0111-x;,citation_volume=4;,citation_journal_title=BMC Psychology;">
<meta name="citation_reference" content="citation_title=Die deutsche Version des Childhood Trauma Questionnaire (CTQ): Erste Befunde zu den psychometrischen Kennwerten;,citation_author=Katja Wingenfeld;,citation_author=Carsten Spitzer;,citation_author=Christoph Mensebach;,citation_author=Hans Grabe;,citation_author=Andreas Hill;,citation_author=Ursula Gast;,citation_author=Nicole Schlosser;,citation_author=Hella Höpp;,citation_author=Thomas Beblo;,citation_author=Martin Driessen;,citation_publication_date=2010-04-01;,citation_cover_date=2010-04-01;,citation_year=2010;,citation_fulltext_html_url=http://dx.doi.org/10.1055/s-0030-1253494;,citation_issue=08;,citation_doi=10.1055/s-0030-1253494;,citation_volume=60;,citation_language=de;,citation_journal_title=PPmP - Psychotherapie · Psychosomatik · Medizinische Psychologie;">
<meta name="citation_reference" content="citation_title=Development and validation of a brief screening version of the Childhood Trauma Questionnaire;,citation_author=David P Bernstein;,citation_author=Judith A Stein;,citation_author=Michael D Newcomb;,citation_author=Edward Walker;,citation_author=David Pogge;,citation_author=Taruna Ahluvalia;,citation_author=John Stokes;,citation_author=Leonard Handelsman;,citation_author=Martha Medrano;,citation_author=David Desmond;,citation_author=William Zule;,citation_publication_date=2003-02;,citation_cover_date=2003-02;,citation_year=2003;,citation_fulltext_html_url=http://dx.doi.org/10.1016/S0145-2134(02)00541-0;,citation_issue=2;,citation_doi=10.1016/s0145-2134(02)00541-0;,citation_volume=27;,citation_language=en;,citation_journal_title=Child Abuse &amp;amp;amp; Neglect;">
</head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Article Notebook</h6>

            <a href="./meta_adult_manuscript.qmd" class="btn btn-primary quarto-download-embed" download="meta_adult_manuscript.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Mental Health Evaluation through Text Analysis</h1>
            <p class="subtitle lead">umbrella project documentation</p>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Gabriel Bonnin <a href="mailto:gabriel.bonnin@ruhr-uni-bochum.de" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Ruhr University Bochum, Germany
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#shared-methods" id="toc-shared-methods" class="nav-link" data-scroll-target="#shared-methods">Shared Methods</a>
  <ul class="collapse">
  <li><a href="#measures" id="toc-measures" class="nav-link" data-scroll-target="#measures">Measures</a>
  <ul class="collapse">
  <li><a href="#sociodemographic-and-context-measures" id="toc-sociodemographic-and-context-measures" class="nav-link" data-scroll-target="#sociodemographic-and-context-measures">Sociodemographic and context measures</a></li>
  <li><a href="#responses-from-open-ended-questions-before-therapy" id="toc-responses-from-open-ended-questions-before-therapy" class="nav-link" data-scroll-target="#responses-from-open-ended-questions-before-therapy">Responses from open-ended questions before therapy</a></li>
  <li><a href="#psychometric-measures" id="toc-psychometric-measures" class="nav-link" data-scroll-target="#psychometric-measures">Psychometric measures</a></li>
  <li><a href="#global-improvement" id="toc-global-improvement" class="nav-link" data-scroll-target="#global-improvement">Global Improvement</a></li>
  <li><a href="#goal-attainment-scale" id="toc-goal-attainment-scale" class="nav-link" data-scroll-target="#goal-attainment-scale">Goal Attainment Scale</a></li>
  </ul></li>
  <li><a href="#measurement-time-points" id="toc-measurement-time-points" class="nav-link" data-scroll-target="#measurement-time-points">Measurement time points</a></li>
  <li><a href="#preprocessing" id="toc-preprocessing" class="nav-link" data-scroll-target="#preprocessing">Preprocessing</a></li>
  <li><a href="#shared-analytic-framework" id="toc-shared-analytic-framework" class="nav-link" data-scroll-target="#shared-analytic-framework">Shared analytic framework</a></li>
  </ul></li>
  <li><a href="#preliminary-results-dataset-characterization" id="toc-preliminary-results-dataset-characterization" class="nav-link" data-scroll-target="#preliminary-results-dataset-characterization">Preliminary results: dataset characterization</a></li>
  <li><a href="#substudies-planned-manuscripts" id="toc-substudies-planned-manuscripts" class="nav-link" data-scroll-target="#substudies-planned-manuscripts">Substudies / planned manuscripts</a>
  <ul class="collapse">
  <li><a href="#substudy-1-language-as-clinical-assessment-cross-sectional" id="toc-substudy-1-language-as-clinical-assessment-cross-sectional" class="nav-link" data-scroll-target="#substudy-1-language-as-clinical-assessment-cross-sectional">Substudy 1: Language as clinical assessment (cross-sectional)</a></li>
  <li><a href="#substudy-2-patient-narratives-and-themes" id="toc-substudy-2-patient-narratives-and-themes" class="nav-link" data-scroll-target="#substudy-2-patient-narratives-and-themes">Substudy 2: Patient narratives and themes</a></li>
  <li><a href="#substudy-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction" id="toc-substudy-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction" class="nav-link" data-scroll-target="#substudy-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction">Substudy 3: Predicting treatment response and goal attainment (longitudinal prediction)</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="reports/Logo_RUBRS.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="reports/Logo_RUBRS.svg" class="img-fluid" width="180"></a></p>
<p>This project is supported by the <a href="https://www.research-school.rub.de">Ruhr University Bochum Research School</a>.</p>
</div>
</div>
<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>Psychotherapy is one of the most effective treatments for mental health problems, but its success depends on accurate diagnostic assessments. Current assessment practices largely rely on standardized closed-ended scales that, while reliable, may fail to capture the complexity, context and individuality of patients’ mental states. Advances in artificial intelligence (AI) and natural language processing (NLP) enable the measurement of psychological constructs through natural language, offering a promising complement to traditional assessment methods by leveraging patients’ own descriptions of their experiences.</p>
<p>While previous NLP-based mental health research has primarily focused on social media language, this project applies state-of-the-art large language models (LLMs) to open-ended intake data from a German outpatient psychotherapy clinic. Before therapy, patients describe the development, context, and perceived causes of their problems, as well as their current difficulties and therapy goals, in their own words. These texts are linked to key clinical measures, including diagnoses, symptom severity, functional impairment, and treatment outcomes, providing an ecologically valid resource for studying language-based assessment in real-world clinical settings.</p>
<p>The project comprises three complementary substudies. First, we examine whether patient language at intake reflects cross-sectional symptom severity and clinician-rated impairment and whether it provides incremental information beyond established self-report questionnaires. Second, we conduct a narrative and thematic analysis of patient responses to different open-ended prompts to characterize recurring themes and selective response patterns in how patients make sense of their mental health problems. Third, we evaluate whether pre-therapy language predicts longitudinal treatment outcomes, including global improvement and individualized goal attainment, beyond baseline symptom measures.</p>
<p>Together, these studies aim to clarify how patient-generated language can be used for assessment, interpretation, and prognosis in psychotherapy. The findings are intended to inform the development of clinically meaningful, language-based assessment tools that support personalized care and contribute to the modernization of mental health evaluation.</p>
<div class="{pagebreak}">

</div>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Mental health problems pose a significant global challenge, accounting for a considerable proportion of deaths and disability-adjusted life years <span class="citation" data-cites="WorldHealthOrganization2017">(<a href="#ref-WorldHealthOrganization2017" role="doc-biblioref">World Health Organization, 2017</a>)</span>. Psychotherapy is an effective and sustainable intervention for reducing symptoms and improving quality of life <span class="citation" data-cites="wampold2015great chorpita2011evidence">(<a href="#ref-chorpita2011evidence" role="doc-biblioref">Chorpita et al., 2011</a>; <a href="#ref-wampold2015great" role="doc-biblioref">Wampold &amp; Imel, 2015</a>)</span>, but it’s success critically depends on accurate assessments <span class="citation" data-cites="Lutz2022 Jensen-Doss2008">(<a href="#ref-Jensen-Doss2008" role="doc-biblioref">Jensen-Doss &amp; Weisz, 2008</a>; <a href="#ref-Lutz2022" role="doc-biblioref">Lutz et al., 2022</a>)</span>.</p>
<p>Standardized closed-ended tools such as the Beck Depression Inventory-II <span class="citation" data-cites="Beck1996">(<a href="#ref-Beck1996" role="doc-biblioref">Beck et al., 1996</a>)</span> rely on numerical scales <span class="citation" data-cites="Likert1932">(<a href="#ref-Likert1932" role="doc-biblioref">Likert, 1932</a>)</span> to structure and standardize assessments and are widely used in clinical research and practice. While these methods have advanced replicability and reliability in psychological assessment, they can miss important individual differences by restricting responses to pre-defined categories, limiting the ability to capture the complexity of mental states <span class="citation" data-cites="Kjell2024">(<a href="#ref-Kjell2024" role="doc-biblioref">Kjell, Kjell, et al., 2024</a>)</span>.</p>
<p>Recent advances in AI, particularly transformer-based LLMs <span class="citation" data-cites="Vaswani2017">(<a href="#ref-Vaswani2017" role="doc-biblioref">Vaswani et al., 2017</a>)</span>, present promising solutions to these limitations <span class="citation" data-cites="Kjell2024">(<a href="#ref-Kjell2024" role="doc-biblioref">Kjell, Kjell, et al., 2024</a>)</span>. LLMs excel in analyzing context-rich natural language with remarkable accuracy across diverse tasks <span class="citation" data-cites="devlin-etal-2019-bert">(<a href="#ref-devlin-etal-2019-bert" role="doc-biblioref">Devlin et al., 2019</a>)</span>. Open-ended response formats, where patients describe their experiences in their own words, provide high-dimensional, context-rich information that remains underutilized in current assessment practices. Empirical studies highlight the potential of NLP-based analysis of open-ended responses, achieving moderate convergence with closed-ended rating scales using traditional NLP methods <span class="citation" data-cites="kjell2019semantic">(<a href="#ref-kjell2019semantic" role="doc-biblioref">Kjell et al., 2019</a>)</span> and nearing theoretical upper limits of accuracy with LLMs <span class="citation" data-cites="Kjell2022">(<a href="#ref-Kjell2022" role="doc-biblioref">Kjell et al., 2022</a>)</span>. Preliminary research also highlights their potential for predicting clinically significant outcomes, including suicide risk <span class="citation" data-cites="zirikly-etal-2019-clpsych mohammadi-etal-2019-clac-clpsych matero-etal-2019-suicide">(<a href="#ref-matero-etal-2019-suicide" role="doc-biblioref">Matero et al., 2019</a>; <a href="#ref-mohammadi-etal-2019-clac-clpsych" role="doc-biblioref">Mohammadi et al., 2019</a>; <a href="#ref-zirikly-etal-2019-clpsych" role="doc-biblioref">Zirikly et al., 2019</a>)</span>.</p>
<p>However, much of the existing literature relies on social media or non-clinical text data, raising concerns about ecological validity and clinical relevance. In contrast, open-ended patient responses are routinely collected in clinical settings as part of pre-therapy intake procedures but remain largely underused in empirical research. At the Mental Health Research and Treatment Center at Ruhr University Bochum, patients respond to multiple prompts addressing the development and context of their problems, perceived causes, social reactions, current difficulties, and therapy goals. These narratives are linked to structured diagnostic interviews, repeated symptom assessments, clinician ratings, and longitudinal outcome measures. This unique, large-scale, and longitudinal clinical dataset enables a comprehensive examination of patient language across multiple analytic perspectives.</p>
<p>Accordingly, the present project is organized into three complementary substudies. The first investigates whether pre-therapy language reflects cross-sectional symptom severity and clinician-rated impairment and whether language-based representations provide incremental information beyond standardized self-report questionnaires. The second focuses on the semantic content and structure of patient narratives, using question-specific analyses to identify recurring themes and selective response patterns in how patients conceptualize their mental health problems. The third evaluates the prognostic value of pre-therapy language by testing whether patient narratives predict treatment response and individualized goal attainment over time, beyond baseline symptom severity.</p>
<p>By integrating assessment, interpretive, and prognostic perspectives, this project aims to advance the clinical use of natural language in psychotherapy. Ultimately, the findings seek to support more nuanced, patient-centered assessment practices and contribute to the development of language-based tools that complement existing diagnostic frameworks and inform personalized treatment planning.</p>
</section>
<section id="shared-methods" class="level1">
<h1>Shared Methods</h1>
<p>All substudies draw on the same clinical cohort and share a common set of intake and outcome variables. The shared dataset comprises (a) pre-therapy intake data, including sociodemographics, standardized psychometric questionnaires, and question-specific open-ended patient narratives, and (b) longitudinal clinical measures collected repeatedly during and after treatment. Textual analyses are based exclusively on pre-therapy narratives, while psychometric and clinician-rated measures are used as cross-sectional outcomes, covariates, or longitudinal endpoints depending on the substudy.</p>
<p>The following sections describe the shared dataset, preprocessing pipeline, and measurement instruments used across all substudies.</p>
<section id="measures" class="level2">
<h2 class="anchored" data-anchor-id="measures">Measures</h2>
<section id="sociodemographic-and-context-measures" class="level3">
<h3 class="anchored" data-anchor-id="sociodemographic-and-context-measures">Sociodemographic and context measures</h3>
<p>Sociodemographic information included age, sex, marital and relationship status, general educational attainment, vocational qualification, and current work ability. Contextual variables captured prior psychological or psychiatric treatment and the manner in which therapy ended (e.g., regular completion, dropout).</p>
</section>
<section id="responses-from-open-ended-questions-before-therapy" class="level3">
<h3 class="anchored" data-anchor-id="responses-from-open-ended-questions-before-therapy">Responses from open-ended questions before therapy</h3>
<p>At the start of therapy, patients complete two separate questionnaires designed to assess key aspects of their mental health concerns, functional impairments, and expectations for treatment. Questions 1–9 come from the first questionnaire (<em>Fragebogen zur Lebensgeschichte</em>), and questions 10–12 come from the second (<em>Eingangsfragebogen</em>). The questions include:</p>
<ol type="1">
<li><strong>Problem development:</strong> ‘Briefly describe how the problems for which you are seeking treatment have developed over time.’ (german original question: „Beschreiben Sie kurz, wie sich Ihre Probleme, wegen derer Sie eine Behandlung aufsuchen, im Laufe der Zeit entwickelt haben.”)</li>
<li><strong>Extra stressors:</strong> ‘What causes you stress in addition to your everyday problems (e.g.&nbsp;finances, housing situation)?’ (german original question: „Was macht Ihnen zusätzlich zu Ihren Problemen im Alltag Stress (z. B. Finanzen, Wohnsituation)?“)</li>
<li><strong>Pre-onset changes:</strong> ‘Did something special change in your life before the onset of your symptoms? (e.g.&nbsp;death of an important person, divorce or separation, change in work situation or income, addition to the family)’ (german original question: „Hat sich vor dem Beginn Ihrer Beschwerden etwas Besonderes in Ihrem Leben verändert? (z. B. Tod einer wichtigen Bezugsperson, Scheidung oder Trennung, Veränderung der Arbeitssituation oder des Einkommens, Familienzuwachs)“)</li>
<li><strong>Event connection:</strong> ‘Do you see a connection between the event(s) and the development of your problems?’ (german original question: „Sehen Sie einen Zusammenhang zwischen dem Ereignis/den Ereignissen und der Entwicklung Ihrer Probleme?“)</li>
<li><strong>Physical symptoms:</strong> ‘Are there any physical side effects when your problems occur?’ (german original question: „Gibt es körperliche Begleiterscheinungen, wenn Ihre Probleme auftreten?“)</li>
<li><strong>Problem causes:</strong> ‘What do you think are the causes of your problems?’ (german original question: „Welche Ursachen sehen Sie für Ihre Probleme?“)</li>
<li><strong>Expected improvements:</strong> ‘What would improve in your life if you no longer had your problems?’ (german original question: „Was würde sich in Ihrem Leben verbessern, wenn Sie ihre Probleme nicht mehr hätten?“)</li>
<li><strong>Environment response:</strong> ‘How does your environment (partner, family, friends, work colleagues) react to your problems?’ (german original question: „Wie reagiert Ihre Umwelt (Partner:in, Familie, Freund:innen, Arbeitskolleg:innen) auf die Probleme?“)</li>
<li><strong>No change required:</strong> ‘What should not change under any circumstances as a result of the therapy?’ (german original question: „Was sollte sich durch die Therapie auf keinen Fall verändern?“)</li>
<li><strong>Problem description:</strong> ‘Finally, please describe in your own words the problems for which you would like treatment.’ (german original question: „Beschreiben Sie zum Abschluss bitte noch einmal in eigenen Worten Ihre Probleme, deretwegen Sie eine Behandlung wünschen.“)</li>
<li><strong>Impacted life areas:</strong> ‘In which areas of your life do these problems limit you (e.g.&nbsp;job, relationship)?’ (german original question: „In welchen Lebensbereichen schränken Sie diese Probleme ein (z. B. Beruf, Partnerschaft)?“)</li>
<li><strong>Therapy goals:</strong> ‘What would you like to achieve for yourself in therapy?’ (german original question: „Was möchten Sie in der Therapie für sich erreichen?“)</li>
</ol>
</section>
<section id="psychometric-measures" class="level3">
<h3 class="anchored" data-anchor-id="psychometric-measures">Psychometric measures</h3>
<p>Clinical and psychometric variables were retrieved from the FBZ database and included diagnostic information, self-report symptom measures, therapist- and patient-rated outcome measures, positive mental health indicators, and therapeutic process variables. Diagnoses were coded according to DSM-5 and ICD-10 criteria. Symptom severity and treatment outcomes were assessed using a combination of standardized self-report questionnaires and clinician-rated instruments administered at different points during treatment.</p>
<section id="diagnosis" class="level4">
<h4 class="anchored" data-anchor-id="diagnosis">Diagnosis</h4>
<p>Diagnosis at the outpatient clinic is conducted using structured clinical interviews. These typically take place before therapy begins, usually at the fourth therapist–patient contact. The interview used is the Diagnostic Interview for Mental Disorders <span class="citation" data-cites="margraf2021">(<a href="#ref-margraf2021" role="doc-biblioref">Margraf et al., 2021</a>)</span>, which covers the most frequent DSM-5 disorders encountered in outpatient therapy settings.</p>
</section>
<section id="beck-depression-inventory-ii" class="level4">
<h4 class="anchored" data-anchor-id="beck-depression-inventory-ii">Beck-Depression-Inventory II</h4>
<p>Depressive symptoms were assessed using the&nbsp;<em>Beck Depression Inventory–II</em> (BDI-II; <span class="citation" data-cites="Beck1996">(<a href="#ref-Beck1996" role="doc-biblioref">Beck et al., 1996</a>)</span>), a widely used self-report questionnaire measuring the severity of depressive symptomatology over the past two weeks.</p>
</section>
<section id="depression-anxiety-stress-scale-42" class="level4">
<h4 class="anchored" data-anchor-id="depression-anxiety-stress-scale-42">Depression Anxiety Stress Scale 42</h4>
<p>General psychological distress was assessed using the <em>Depression Anxiety Stress Scales–42</em> (DASS-42<span class="citation" data-cites="Lovibond1995">(<a href="#ref-Lovibond1995" role="doc-biblioref">Lovibond &amp; Lovibond, 1995</a>)</span>), which consists of 42 items measuring symptoms of depression, anxiety, and stress on a XXX scale.</p>
</section>
<section id="brief-symptom-inventory" class="level4">
<h4 class="anchored" data-anchor-id="brief-symptom-inventory">Brief Symptom Inventory</h4>
<p>Overall psychopathological symptom burden was measured using the <em>Brief Symptom Inventory</em> (BSI; <span class="citation" data-cites="book">(<a href="#ref-book" role="doc-biblioref">Franke, 2002</a>)</span>), the short form of the Symptom Checklist-90-Revised (SCL-90-R; Derogatis). The BSI consists of 53 items rated on a 5-point Likert scale ranging from 0 (“not at all”) to 4 (“extremely”). Responses to 49 items are assigned to nine primary symptom dimensions, while four items are evaluated separately. These symptom dimensions are summarized into three global indices: the <em>Global Severity Index</em> (GSI), reflecting overall psychological distress; the <em>Positive Symptom Distress Index</em> (PSDI), indicating symptom intensity; and the <em>Positive Symptom Total</em> (PST), representing the number of reported symptoms.</p>
</section>
<section id="positive-mental-health-scale" class="level4">
<h4 class="anchored" data-anchor-id="positive-mental-health-scale">Positive Mental Health Scale</h4>
<p>Positive mental health (PMH) was assessed with the nine-item <em>PMH scale</em> <span class="citation" data-cites="lukat2016">(<a href="#ref-lukat2016" role="doc-biblioref">Lukat et al., 2016</a>)</span>. Responses are given on a 4-point Likert scale from 0 (disagree) to 3 (agree). Item scores are summed to yield a total score ranging from 0 to 27, with higher scores reflecting greater PMH. The scale has been validated as a unidimensional measure with excellent internal consistency (Cronbach’s α = .93), good test–retest reliability (Pearson r = .74–.81), and evidence of scalar invariance across samples and over time <span class="citation" data-cites="lukat2016">(<a href="#ref-lukat2016" role="doc-biblioref">Lukat et al., 2016</a>)</span>. Furthermore, it shows strong convergent and discriminant validity and is sensitive to therapeutic change across diverse populations <span class="citation" data-cites="lukat2016">(<a href="#ref-lukat2016" role="doc-biblioref">Lukat et al., 2016</a>)</span>.</p>
</section>
<section id="childhood-trauma-questionnaire" class="level4">
<h4 class="anchored" data-anchor-id="childhood-trauma-questionnaire">Childhood Trauma Questionnaire</h4>
<p>Early adverse experiences were assessed using the <em>Childhood Trauma Questionnaire</em> (CTQ) <span class="citation" data-cites="bernstein2003">(<a href="#ref-bernstein2003" role="doc-biblioref">Bernstein et al., 2003</a>)</span>, a widely used self-report instrument for the retrospective assessment of childhood maltreatment. The CTQ measures five domains of adverse experiences: emotional abuse, physical abuse, sexual abuse, emotional neglect, and physical neglect. Items are rated on a 5-point Likert scale ranging from 1 (“not at all”) to 5 (“very often”), with higher scores indicating greater exposure to maltreatment. The German version of the CTQ has demonstrated good psychometric properties, including satisfactory reliability and validity in clinical samples <span class="citation" data-cites="wingenfeld2010">(<a href="#ref-wingenfeld2010" role="doc-biblioref">Wingenfeld et al., 2010</a>)</span>.</p>
</section>
<section id="clinical-global-impression" class="level4">
<h4 class="anchored" data-anchor-id="clinical-global-impression">Clinical Global Impression</h4>
<section id="severity-scale" class="level5">
<h5 class="anchored" data-anchor-id="severity-scale">Severity Scale</h5>
<p>Clinician-rated symptom severity and improvement were assessed using the <em>Clinical Global Impression</em> (CGI) scales. The <em>CGI-Severity</em> scale evaluates the clinician’s global impression of the patient’s current level of mental illness, based on their total clinical experience with this population. The item asks: “Considering your total clinical experience with this particular population, how mentally ill is the patient at this time?”</p>
</section>
<section id="improvement-scale" class="level5">
<h5 class="anchored" data-anchor-id="improvement-scale">Improvement Scale</h5>
<p>Treatment-related change was assessed using the <em>CGI-Improvement</em> scale. Both patients and therapists rated overall improvement relative to the beginning of therapy, regardless of whether the change was attributed entirely to treatment. Patient and therapist versions differ only in perspective but use equivalent response formats.</p>
</section>
</section>
</section>
<section id="global-improvement" class="level3">
<h3 class="anchored" data-anchor-id="global-improvement">Global Improvement</h3>
<p>Global therapy outcome was assessed using a six-point global success rating based on two items measuring perceived benefit and satisfaction with therapy <span class="citation" data-cites="michalak2003">(<a href="#ref-michalak2003" role="doc-biblioref">Michalak et al., 2003</a>)</span>. These items were completed by both patients and therapists and capture a retrospective evaluation of treatment success. The items assess (1) the extent to which expectations toward therapy have been fulfilled and (2) the overall perceived benefit of therapy. Responses are given on a 6-point Likert scale ranging from 1 (“on the contrary / rather harmful”) to 6 (“completely / very helpful”).</p>
</section>
<section id="goal-attainment-scale" class="level3">
<h3 class="anchored" data-anchor-id="goal-attainment-scale">Goal Attainment Scale</h3>
<p>Individualized treatment outcomes were assessed using a goal attainment measure inspired by the Goal Attainment Scaling approach <span class="citation" data-cites="kiresuk1968">(<a href="#ref-kiresuk1968" role="doc-biblioref">Kiresuk &amp; Sherman, 1968</a>)</span>. At the beginning of therapy, patients and therapists collaboratively define individualized treatment goals. During the course and at the end of therapy, patients and therapists retrospectively evaluated the extent to which each of the predefined goals had been achieved.</p>
<p>Goal attainment was rated on a standardized six-point numerical scale ranging from deterioration relative to the initial goal state (-1 = moved away from the goal) to full goal attainment (4 = goal achieved). The scale reflects patients’ subjective assessment of goal progress, with intermediate categories indicating partial progress toward the respective goal.</p>
<p>For each patient, an overall goal attainment score was computed as the mean rating across all individually defined goals, representing the average subjective level of goal progress at the end of therapy.</p>
</section>
</section>
<section id="measurement-time-points" class="level2">
<h2 class="anchored" data-anchor-id="measurement-time-points">Measurement time points</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Timepoint</th>
<th>DU-DI</th>
<th>DU-Prä</th>
<th>KZT1-DU4</th>
<th>KZT1-DUPost</th>
<th>KZT2-DUPost</th>
<th>LZT1-DUPost</th>
<th>LZT2-DUPost</th>
<th>Kat6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Explanation</strong></td>
<td>Pre-therapy, 4th contact</td>
<td>Pre-therapy, 6th contact</td>
<td>4th therapy session</td>
<td>12th therapy session</td>
<td>24th therapy session</td>
<td>45th therapy session</td>
<td>60th therapy session</td>
<td>6 month after therapy</td>
</tr>
<tr class="even">
<td><strong>Diagnosis</strong></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Demographics</strong></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>BSI</strong></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td><strong>BDI-II</strong></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="even">
<td><strong>DASS-42</strong></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td><strong>PMH</strong></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="even">
<td><strong>CTQ</strong></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>CGI-S</strong></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>CGI-I</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Glob-Pt</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>GAS</strong></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
</tbody>
</table>
</section>
<section id="preprocessing" class="level2">
<h2 class="anchored" data-anchor-id="preprocessing">Preprocessing</h2>
<p>To streamline data collection, an automated transcription pipeline was implemented: The handwritten text data is first recorded by trained employees of the FBZ adult outpatient clinic using a mobile audio recording device. Identifying features (e.g.&nbsp;names, dates of birth, location details) were replaced by placeholders during recording (anonymisation). The transcription was carried out on local hardware using the open source tool Whisper Large v2 (<a href="https://github.com/openai/whisper" class="uri">https://github.com/openai/whisper</a>), a state-of-the-art speech-to-text model <span class="citation" data-cites="Radford2022">(<a href="#ref-Radford2022" role="doc-biblioref">Radford et al., 2022</a>)</span>. Each recording begins with a structured introduction, including a patient identification code, followed by responses to predefined questions. The transcription pipeline automatically processes all audio recordings, extracts the patient codes, and identifies responses to key questions.</p>
<p>As an additional data correction step, the exported transcription table was screened for incomplete entries. Records with missing patient identification codes or without any extracted text were automatically flagged, exported for manual correction, and subsequently re-imported and merged back into the original dataset. The corrected dataset was then used for downstream analyses.</p>
</section>
<section id="shared-analytic-framework" class="level2">
<h2 class="anchored" data-anchor-id="shared-analytic-framework">Shared analytic framework</h2>
<p>The Sequential Evaluation with Model Pre-registration <span class="citation" data-cites="kjell_ganesan_boyd_oltmanns_rivero_feltman_carr_luft_kotov_schwartz_2024">(<a href="#ref-kjell_ganesan_boyd_oltmanns_rivero_feltman_carr_luft_kotov_schwartz_2024" role="doc-biblioref">Kjell, Ganesan, et al., 2024</a>)</span> framework will be implemented to ensure robust model development, mitigating overfitting and enabling unbiased performance evaluation. Additionally, evaluating models on prospective data will simulate real-world clinical deployment by assessing performance on new, unseen patient data.</p>
<p>During the model development phase, preprocessing pipelines will be finalized, and exploratory models developed using advanced cross-validation techniques. Contextual embeddings derived from pretrained LLMs will be linked to clinical outcomes using state-of-the-art prediction models, including ridge regression <span class="citation" data-cites="Hoerl1970">(<a href="#ref-Hoerl1970" role="doc-biblioref">Hoerl &amp; Kennard, 1970</a>)</span>, lasso regression <span class="citation" data-cites="10.1111/j.2517-6161.1996.tb02080.x">(<a href="#ref-10.1111/j.2517-6161.1996.tb02080.x" role="doc-biblioref">Tibshirani, 1996</a>)</span>, and random forests <span class="citation" data-cites="598994">(<a href="#ref-598994" role="doc-biblioref">Ho, 1995</a>)</span>. The final pipelines will be pre-registered for evaluation (e.g., <a href="https://aspredicted.org/" class="uri">https://aspredicted.org/</a>).</p>
<p>In the evaluation phase, pre-registered models will be tested on held-out datasets, enabling unbiased performance assessments. This phase will include detailed error analysis to identify potential biases and limitations, as well as comparative analyses to benchmark model performance against the HRG’s models.</p>
<p>Furthermore, topic modeling techniques (e.g., Latent Dirichlet Allocation; <span class="citation" data-cites="10.5555/944919.944937">(<a href="#ref-10.5555/944919.944937" role="doc-biblioref">Blei et al., 2003</a>)</span>, or BERTopic; <span class="citation" data-cites="grootendorst2022bertopicneuraltopicmodeling">(<a href="#ref-grootendorst2022bertopicneuraltopicmodeling" role="doc-biblioref">Grootendorst, 2022</a>)</span>) will be employed to explore themes in patient-generated text.</p>
<p>Specific operationalizations of text inputs, outcomes, and models differ across substudies and are specified below.</p>
<p>The open-ended questions were administered in two questionnaire blocks. Analyses were restricted to cases in which the respective questionnaire was present. Within these blocks, item-level nonresponse is descriptively intepreted as potentially informative of selective responding without assuming specific psychological mechanisms.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="reports/Abbildung_Gabriel_eng.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="The step-by-step process of patient narrative analysis, from preprocessing to data evaluation."><img src="reports/Abbildung_Gabriel_eng.png" class="img-fluid figure-img" style="width:100.0%" alt="The step-by-step process of patient narrative analysis, from preprocessing to data evaluation."></a></p>
<figcaption>The step-by-step process of patient narrative analysis, from preprocessing to data evaluation.</figcaption>
</figure>
</div>
<div class="{pagebreak}">

</div>
</section>
</section>
<section id="preliminary-results-dataset-characterization" class="level1">
<h1>Preliminary results: dataset characterization</h1>
<p>A descriptive analysis revealed substantial heterogeneity across questions in both response rates and linguistic richness (Table X). Broad narrative prompts, particularly the problem description and therapy goals questions, showed low missingness and high median word counts, indicating that patients readily provided extended self-generated narratives when asked to reflect holistically on their difficulties or desired changes. In contrast, questions targeting specific events, causal attributions, physical symptoms, or affected life domains often elicited brief or list-like responses, consistent with their more constrained and confirmatory formats.</p>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>working_data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"/Volumes/meta_data/processed/working_data/merged_data.rds"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.1     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>text_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(working_data)[<span class="fu">str_detect</span>(<span class="fu">names</span>(working_data), <span class="st">"^txt</span><span class="sc">\\</span><span class="st">d+_"</span>)]</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>working_data_long <span class="ot">&lt;-</span> working_data <span class="sc">|&gt;</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">all_of</span>(text_cols),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"question_raw"</span>,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"text"</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">question_id =</span> <span class="fu">str_extract</span>(question_raw, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>) <span class="sc">|&gt;</span> <span class="fu">as.integer</span>(),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">question_label =</span> <span class="fu">str_remove</span>(question_raw, <span class="st">"^txt</span><span class="sc">\\</span><span class="st">d+_"</span>),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_squish</span>(text),</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_missing =</span> <span class="fu">is.na</span>(text) <span class="sc">|</span> text <span class="sc">==</span> <span class="st">""</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>working_data_long <span class="ot">&lt;-</span> working_data_long <span class="sc">|&gt;</span> </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_chars =</span> <span class="fu">ifelse</span>(is_missing, <span class="cn">NA_integer_</span>, <span class="fu">nchar</span>(text)),</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_words =</span> <span class="fu">ifelse</span>(is_missing, <span class="cn">NA_integer_</span>, <span class="fu">stri_count_words</span>(text)),</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_very_short =</span> <span class="sc">!</span>is_missing <span class="sc">&amp;</span> n_words <span class="sc">&lt;=</span> <span class="dv">3</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>qc_by_question <span class="ot">&lt;-</span> working_data_long <span class="sc">|&gt;</span> </span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(question_id, question_label) <span class="sc">|&gt;</span> </span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_total =</span> <span class="fu">n</span>(),</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_pct =</span> <span class="fu">mean</span>(is_missing) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">very_short_pct =</span> <span class="fu">mean</span>(is_very_short) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_words =</span> <span class="fu">median</span>(n_words, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">p10_words =</span> <span class="fu">quantile</span>(n_words, <span class="fl">0.10</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">p90_words =</span> <span class="fu">quantile</span>(n_words, <span class="fl">0.90</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>question_labels <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Problem development"</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extra stressors"</span>,</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Pre-onset changes"</span>,</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Event connection"</span>,</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Physical symptoms"</span>,</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Problem causes"</span>,</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Expected improvements"</span>,</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Environment response"</span>,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"No change required"</span>,</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Problem description"</span>,</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Impacted life areas"</span>,</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Therapy goals"</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>qc_table <span class="ot">&lt;-</span> qc_by_question <span class="sc">|&gt;</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">Question =</span> <span class="fu">factor</span>(question_id, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">labels =</span> question_labels)</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    Question,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    n_total,</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    missing_pct,</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    very_short_pct,</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    median_words,</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    p10_words,</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    p90_words</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>qc_table <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Table X. Descriptive statistics of open-ended responses by question."</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">"lcccccc"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">booktabs =</span> <span class="cn">TRUE</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table X. Descriptive statistics of open-ended responses by question.</caption>
<colgroup>
<col style="width: 22%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 16%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Question</th>
<th style="text-align: center;">n_total</th>
<th style="text-align: center;">missing_pct</th>
<th style="text-align: center;">very_short_pct</th>
<th style="text-align: center;">median_words</th>
<th style="text-align: center;">p10_words</th>
<th style="text-align: center;">p90_words</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Problem development</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">51.606805</td>
<td style="text-align: center;">2.457467</td>
<td style="text-align: center;">19.0</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">47.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Extra stressors</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">54.442344</td>
<td style="text-align: center;">7.750473</td>
<td style="text-align: center;">11.0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">33.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pre-onset changes</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">47.069943</td>
<td style="text-align: center;">15.122873</td>
<td style="text-align: center;">9.5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">37.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Event connection</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">50.094518</td>
<td style="text-align: center;">20.604915</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">29.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Physical symptoms</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">50.094518</td>
<td style="text-align: center;">14.366730</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">18.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Problem causes</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">51.984877</td>
<td style="text-align: center;">11.531191</td>
<td style="text-align: center;">8.0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">27.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected improvements</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">47.826087</td>
<td style="text-align: center;">5.103970</td>
<td style="text-align: center;">11.0</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">30.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Environment response</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">47.826087</td>
<td style="text-align: center;">11.720227</td>
<td style="text-align: center;">9.0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">30.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">No change required</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">71.266541</td>
<td style="text-align: center;">7.750473</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">19.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Problem description</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">6.994329</td>
<td style="text-align: center;">4.158790</td>
<td style="text-align: center;">23.0</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">51.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Impacted life areas</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">9.829868</td>
<td style="text-align: center;">30.056711</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">32.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Therapy goals</td>
<td style="text-align: center;">529</td>
<td style="text-align: center;">5.293006</td>
<td style="text-align: center;">5.671077</td>
<td style="text-align: center;">15.0</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">36.0</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="{pagebreak}">

</div>
</section>
<section id="substudies-planned-manuscripts" class="level1">
<h1>Substudies / planned manuscripts</h1>
<p>This project comprises multiple complementary substudies that share a common dataset and preprocessing pipeline but address distinct research questions. To avoid analytic flexibility and to maximize interpretability, each substudy pre-specifies its text inputs, outcomes, and evaluation strategy.</p>
<section id="substudy-1-language-as-clinical-assessment-cross-sectional" class="level2">
<h2 class="anchored" data-anchor-id="substudy-1-language-as-clinical-assessment-cross-sectional">Substudy 1: Language as clinical assessment (cross-sectional)</h2>
<p><strong>Status.</strong> Planned</p>
<p><strong>Core research question.</strong><br>
Does patients’ pre-therapy language provide clinically meaningful information about symptom severity and functioning, and does it add predictive value beyond established self-report questionnaires? Additionally, to what extent is this information captured by large language model (LLM)–based representations compared with simpler linguistic features?</p>
<p><strong>Conceptual contribution.</strong><br>
This substudy conceptualizes patient-generated language as an independent assessment modality rather than a proxy for existing symptom scales. While prior work has demonstrated correlations between language and self-reported symptoms, few studies have tested whether language captures incremental clinical information beyond standardized questionnaires, particularly for clinician-rated outcomes.</p>
<p><strong>Sample definition.</strong></p>
<ul>
<li><p>Training Data (N=)</p></li>
<li><p>Validation Data (N=)</p></li>
<li><p>Inclusion: Patients with at least one non-missing narrative response (Q10 or Q12) and available baseline symptom assessments.</p></li>
</ul>
<p><strong>Text inputs.</strong></p>
<ul>
<li><p>Primary: Q10 <em>Problem description</em></p></li>
<li><p>Secondary: Q12 <em>Therapy goals</em></p></li>
<li><p>Sensitivity Analyses:</p>
<ul>
<li><p>Concatenation of Q10 + Q12.</p></li>
<li><p>Concatenation of all answered open-ended responses.</p></li>
</ul></li>
</ul>
<p><strong>Outcomes.</strong></p>
<ul>
<li><p>Convergent validity outcomes: Cross-sectional self-report symptom measures (BDI-II, BSI/GSI, DASS-42).</p></li>
<li><p>Incremental validity outcomes: Clinician-rated symptom severity (CGI-Severity).</p></li>
</ul>
<p><strong>Models &amp; evaluation.</strong> Baselines (length, pronouns/negations) vs.&nbsp;LLM embeddings + ridge/lasso; holdout evaluation; incremental validity over scales (e.g., language adds predictive value beyond baseline questionnaires).</p>
</section>
<section id="substudy-2-patient-narratives-and-themes" class="level2">
<h2 class="anchored" data-anchor-id="substudy-2-patient-narratives-and-themes">Substudy 2: Patient narratives and themes</h2>
<p><strong>Status.</strong> Planned</p>
<p><strong>Core research question.</strong><br>
How do patients conceptualize the development, context, and perceived causes of their mental health problems, as well as anticipated improvements, and how do these narrative patterns vary across individuals and clinical groups?</p>
<p><strong>Conceptual contribution.</strong><br>
This substudy emphasizes interpretation and theory generation, using patient language to uncover recurring narrative themes related to problem development, stressors, causal attributions, social context, and desired change. By analyzing these themes, this substudy provides insight into how narrative content and response patterns relate to diagnostic categories and baseline severity.</p>
<p><strong>Sample definition.</strong></p>
<ul>
<li>Cohort version (N =)</li>
</ul>
<p><strong>Text inputs.</strong> Q1 <em>Problem development</em>, Q2 <em>Extra stressors</em>, Q3 <em>Pre-onset changes</em>, Q6 <em>Problem causes</em>, Q7 <em>Expected improvements</em>, Q8 <em>Environment response</em>. Question-wise modeling (no forced concatenation).</p>
<p><strong>Outcomes.</strong> No single predictive outcome is specified, as the primary aim is interpretive and theory-generating rather than predictive.</p>
<ul>
<li>Primary analyses: Descriptive characterization of thematic content and narrative patterns within and across questions.</li>
<li>Secondary analyses: Stratification of themes by diagnostic categories, baseline symptom severity, or sociodemographic characteristics.</li>
</ul>
<p><strong>Models &amp; evaluation.</strong> Topic modeling / embedding-based clustering; interpretive labeling; comparison of topic prevalence across patient groups.</p>
</section>
<section id="substudy-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction" class="level2">
<h2 class="anchored" data-anchor-id="substudy-3-predicting-treatment-response-and-goal-attainment-longitudinal-prediction">Substudy 3: Predicting treatment response and goal attainment (longitudinal prediction)</h2>
<p><strong>Status.</strong> Planned</p>
<p><strong>Core research question.</strong><br>
Can patients’ pre-therapy language predict clinically meaningful treatment outcomes—such as global improvement, clinician-rated change, and individualized goal attainment—beyond baseline symptom severity and demographic characteristics?</p>
<p><strong>Conceptual contribution.</strong><br>
This substudy extends language-based mental health assessment from cross-sectional validity to prognostic utility. While prior work has primarily examined whether language reflects current symptom severity, far less is known about whether pre-therapy narratives encode information relevant for future treatment response, such as motivation, goal clarity, perceived agency, or narrative coherence. By evaluating the ability of pre-therapy language to predict longitudinal outcomes above and beyond baseline symptom measures, this substudy tests whether patient-generated text captures clinically actionable signals that are not accessible through standard intake questionnaires alone.</p>
<p><strong>Sample definition.</strong></p>
<ul>
<li><p>Training Data (N=)</p></li>
<li><p>Validation Data (N=)</p></li>
<li><p>Inclusion: Patients with at least one non-missing narrative response (Q10 or Q12) and available baseline symptom assessments.</p></li>
</ul>
<p><strong>Text inputs.</strong> Primary: Q10 and Q12; Secondary: concatenation models.</p>
<p><strong>Outcomes.</strong></p>
<ul>
<li><p>Clinician-rated improvement (CGI-Improvement) at 6 months-follow-up assessment.</p></li>
<li><p>Global therapy outcome ratings (patient- and therapist-reported) at 6 months-follow-up assessment.</p></li>
<li><p>Goal Attainment Scale at 6 months-follow-up assessment.</p></li>
<li><p>Pre-Post Differences in Symptom Rating Scales ((BDI-II, BSI/GSI, DASS-42).</p></li>
</ul>
<p><strong>Models &amp; evaluation.</strong></p>
<ul>
<li><p>Baseline prognostic models: Demographic variables and baseline symptom severity (e.g., BDI-II, BSI/GSI, CGI-Severity).</p></li>
<li><p>Language-augmented models: Baseline predictors plus language representations derived from pre-therapy text.</p></li>
<li><p>Feature types:</p>
<ul>
<li><p>Simple language features (e.g., word count, pronouns, negations).</p></li>
<li><p>Contextual embeddings derived from pretrained large language models.</p></li>
</ul></li>
</ul>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-Beck1996" class="csl-entry" role="listitem">
Beck, A. T., Steer, R. A., &amp; Brown, G. K. (1996). <em><span>BDI-II</span>: <span>Beck Depression Inventory</span> manual</em> (2nd ed.). Psychological Corporation.
</div>
<div id="ref-bernstein2003" class="csl-entry" role="listitem">
Bernstein, D. P., Stein, J. A., Newcomb, M. D., Walker, E., Pogge, D., Ahluvalia, T., Stokes, J., Handelsman, L., Medrano, M., Desmond, D., &amp; Zule, W. (2003). Development and validation of a brief screening version of the Childhood Trauma Questionnaire. <em>Child Abuse &amp; Neglect</em>, <em>27</em>(2), 169–190. <a href="https://doi.org/10.1016/s0145-2134(02)00541-0">https://doi.org/10.1016/s0145-2134(02)00541-0</a>
</div>
<div id="ref-10.5555/944919.944937" class="csl-entry" role="listitem">
Blei, D. M., Ng, A. Y., &amp; Jordan, M. I. (2003). Latent dirichlet allocation. <em>Journal of Machine Learning Research</em>, <em>3</em>(null), 993–1022.
</div>
<div id="ref-chorpita2011evidence" class="csl-entry" role="listitem">
Chorpita, B. F., Daleiden, E. L., Ebesutani, C., Young, J., Becker, K. D., Nakamura, B. J., Phillips, L., Ward, A., Lynch, R., Trent, L., et al. (2011). Evidence-based treatments for children and adolescents: <span>An</span> updated review of indicators of efficacy and effectiveness. <em>Clinical Psychology: Science and Practice</em>, <em>18</em>(2), 154–172.
</div>
<div id="ref-devlin-etal-2019-bert" class="csl-entry" role="listitem">
Devlin, J., Chang, M.-W., Lee, K., &amp; Toutanova, K. (2019). <span>BERT</span>: <span class="nocase">Pre-training</span> of deep bidirectional transformers for language understanding. In J. Burstein, C. Doran, &amp; T. Solorio (Eds.), <em>Proceedings of the 2019 conference of the north <span>American</span> chapter of the association for computational linguistics: <span>Human</span> language technologies, volume 1 (long and short papers)</em> (pp. 4171–4186). Association for Computational Linguistics. <a href="https://doi.org/10.18653/v1/N19-1423">https://doi.org/10.18653/v1/N19-1423</a>
</div>
<div id="ref-book" class="csl-entry" role="listitem">
Franke, G. (2002). <em>Franke, g.h. (2000). BSI. Brief symptom inventory - deutsche version. Manual. Göttingen: beltz.</em>
</div>
<div id="ref-grootendorst2022bertopicneuraltopicmodeling" class="csl-entry" role="listitem">
Grootendorst, M. (2022). <em><span>BERTopic</span>: <span>Neural</span> topic modeling with a class-based <span>TF-IDF</span> procedure</em>. <a href="https://arxiv.org/abs/2203.05794">https://arxiv.org/abs/2203.05794</a>
</div>
<div id="ref-598994" class="csl-entry" role="listitem">
Ho, T. K. (1995). Random decision forests. <em>Proceedings of 3rd International Conference on Document Analysis and Recognition</em>, <em>1</em>, 278–282 vol.1. <a href="https://doi.org/10.1109/ICDAR.1995.598994">https://doi.org/10.1109/ICDAR.1995.598994</a>
</div>
<div id="ref-Hoerl1970" class="csl-entry" role="listitem">
Hoerl, A. E., &amp; Kennard, R. W. (1970). Ridge <span>Regression</span>: <span>Biased Estimation</span> for <span>Nonorthogonal Problems</span>. <em>Technometrics</em>, <em>12</em>(1), 55–67. <a href="https://doi.org/10.1080/00401706.1970.10488634">https://doi.org/10.1080/00401706.1970.10488634</a>
</div>
<div id="ref-Jensen-Doss2008" class="csl-entry" role="listitem">
Jensen-Doss, A., &amp; Weisz, J. R. (2008). Diagnostic agreement predicts treatment process and outcomes in youth mental health clinics. <em>Journal of Consulting and Clinical Psychology</em>, <em>76</em>(5), 711–722. <a href="https://doi.org/10.1037/0022-006X.76.5.711">https://doi.org/10.1037/0022-006X.76.5.711</a>
</div>
<div id="ref-kiresuk1968" class="csl-entry" role="listitem">
Kiresuk, T. J., &amp; Sherman, R. E. (1968). Goal attainment scaling: A general method for evaluating comprehensive community mental health programs. <em>Community Mental Health Journal</em>, <em>4</em>(6), 443–453. <a href="https://doi.org/10.1007/BF01530764">https://doi.org/10.1007/BF01530764</a>
</div>
<div id="ref-kjell_ganesan_boyd_oltmanns_rivero_feltman_carr_luft_kotov_schwartz_2024" class="csl-entry" role="listitem">
Kjell, O. N. E., Ganesan, A. V., Boyd, R., Oltmanns, J. R., Rivero, A., Feltman, S., Carr, M. A., Luft, B. J., Kotov, R., &amp; Schwartz, H. A. (2024). <em>Demonstrating high validity of a new <span class="nocase">AI-language</span> assessment of <span>PTSD</span>: A sequential evaluation with model pre-registration</em>. PsyArXiv. <a href="https://doi.org/10.31234/osf.io/xw24e">https://doi.org/10.31234/osf.io/xw24e</a>
</div>
<div id="ref-kjell2019semantic" class="csl-entry" role="listitem">
Kjell, O. N. E., Kjell, K., Garcia, D., &amp; Sikström, S. (2019). Semantic measures: <span>Using</span> natural language processing to measure, differentiate, and describe psychological constructs. <em>Psychological Methods</em>, <em>24</em>(1), 92–115. <a href="https://doi.org/10.1037/met0000191">https://doi.org/10.1037/met0000191</a>
</div>
<div id="ref-Kjell2024" class="csl-entry" role="listitem">
Kjell, O. N. E., Kjell, K., &amp; Schwartz, H. A. (2024). Beyond rating scales: <span>With</span> targeted evaluation, large language models are poised for psychological assessment. <em>Psychiatry Research</em>, <em>333</em>, 115667. <a href="https://doi.org/10.1016/j.psychres.2023.115667">https://doi.org/10.1016/j.psychres.2023.115667</a>
</div>
<div id="ref-Kjell2022" class="csl-entry" role="listitem">
Kjell, O. N. E., Sikström, S., Kjell, K., &amp; Schwartz, H. A. (2022). Natural language analyzed with <span class="nocase">AI-based</span> transformers predict traditional subjective well-being measures approaching the theoretical upper limits in accuracy. <em>Scientific Reports</em>, <em>12</em>(1), 3918. <a href="https://doi.org/10.1038/s41598-022-07520-w">https://doi.org/10.1038/s41598-022-07520-w</a>
</div>
<div id="ref-Likert1932" class="csl-entry" role="listitem">
Likert, R. (1932). A technique for the measurement of attitudes. <em>Arch. Psychol.</em>, <em>140</em>(55).
</div>
<div id="ref-Lovibond1995" class="csl-entry" role="listitem">
Lovibond, P. F., &amp; Lovibond, S. H. (1995). The structure of negative emotional states: Comparison of the Depression Anxiety Stress Scales (DASS) with the Beck Depression and Anxiety Inventories. <em>Behaviour Research and Therapy</em>, <em>33</em>(3), 335–343. <a href="https://doi.org/10.1016/0005-7967(94)00075-u">https://doi.org/10.1016/0005-7967(94)00075-u</a>
</div>
<div id="ref-lukat2016" class="csl-entry" role="listitem">
Lukat, J., Margraf, J., Lutz, R., Veld, W. M. van der, &amp; Becker, E. S. (2016). Psychometric properties of the positive mental health scale (PMH-scale). <em>BMC Psychology</em>, <em>4</em>(1), 8. <a href="https://doi.org/10.1186/s40359-016-0111-x">https://doi.org/10.1186/s40359-016-0111-x</a>
</div>
<div id="ref-Lutz2022" class="csl-entry" role="listitem">
Lutz, W., Schwartz, B., &amp; Delgadillo, J. (2022). Measurement-<span>Based</span> and <span>Data-Informed Psychological Therapy</span>. <em>Annual Review of Clinical Psychology</em>, <em>18</em>(1), 71–98. <a href="https://doi.org/10.1146/annurev-clinpsy-071720-014821">https://doi.org/10.1146/annurev-clinpsy-071720-014821</a>
</div>
<div id="ref-margraf2021" class="csl-entry" role="listitem">
Margraf, J., Cwik, J. C., Brachel, R. von, Suppiger, A., &amp; Schneider, S. (2021). <em>DIPS open access 1.2: Diagnostisches interview bei psychischen störungen</em>. <a href="https://doi.org/10.46586/rub.172.149">https://doi.org/10.46586/rub.172.149</a>
</div>
<div id="ref-matero-etal-2019-suicide" class="csl-entry" role="listitem">
Matero, M., Idnani, A., Son, Y., Giorgi, S., Vu, H., Zamani, M., Limbachiya, P., Guntuku, S. C., &amp; Schwartz, H. A. (2019). Suicide risk assessment with multi-level dual-context language and <span>BERT</span>. In K. Niederhoffer, K. Hollingshead, P. Resnik, R. Resnik, &amp; K. Loveys (Eds.), <em>Proceedings of the sixth workshop on computational linguistics and clinical psychology</em> (pp. 39–44). Association for Computational Linguistics. <a href="https://doi.org/10.18653/v1/W19-3005">https://doi.org/10.18653/v1/W19-3005</a>
</div>
<div id="ref-michalak2003" class="csl-entry" role="listitem">
Michalak, J., Kosfelder, J., Meyer, F., &amp; Schulte, D. (2003). Messung des Therapieerfolgs. <em>Zeitschrift für Klinische Psychologie und Psychotherapie</em>, <em>32</em>(2), 94–103. <a href="https://doi.org/10.1026/0084-5345.32.2.94">https://doi.org/10.1026/0084-5345.32.2.94</a>
</div>
<div id="ref-mohammadi-etal-2019-clac-clpsych" class="csl-entry" role="listitem">
Mohammadi, E., Amini, H., &amp; Kosseim, L. (2019). <span>CLaC</span> at <span>CLPsych</span> 2019: <span>Fusion</span> of neural features and predicted class probabilities for suicide risk assessment based on online posts. In K. Niederhoffer, K. Hollingshead, P. Resnik, R. Resnik, &amp; K. Loveys (Eds.), <em>Proceedings of the sixth workshop on computational linguistics and clinical psychology</em> (pp. 34–38). Association for Computational Linguistics. <a href="https://doi.org/10.18653/v1/W19-3004">https://doi.org/10.18653/v1/W19-3004</a>
</div>
<div id="ref-Radford2022" class="csl-entry" role="listitem">
Radford, A., Kim, J. W., Xu, T., Brockman, G., McLeavey, C., &amp; Sutskever, I. (2022). Robust <span>Speech Recognition</span> via <span>Large-Scale Weak Supervision</span>. <em>arXiv Preprint arXiv: 2212.04356</em>. <a href="https://arxiv.org/abs/2212.04356">https://arxiv.org/abs/2212.04356</a>
</div>
<div id="ref-10.1111/j.2517-6161.1996.tb02080.x" class="csl-entry" role="listitem">
Tibshirani, R. (1996). Regression shrinkage and selection via the lasso. <em>Journal of the Royal Statistical Society: Series B (Methodological)</em>, <em>58</em>(1), 267–288. <a href="https://doi.org/10.1111/j.2517-6161.1996.tb02080.x">https://doi.org/10.1111/j.2517-6161.1996.tb02080.x</a>
</div>
<div id="ref-Vaswani2017" class="csl-entry" role="listitem">
Vaswani, A., Shazeer, N., Parmar, N., Uszkoreit, J., Jones, L., Gomez, A. N., Kaiser, L., &amp; Polosukhin, I. (2017). Attention is <span>All</span> you <span>Need</span>. <em>Advances in <span>Neural Information Processing Systems</span></em>, <em>30</em>.
</div>
<div id="ref-wampold2015great" class="csl-entry" role="listitem">
Wampold, B. E., &amp; Imel, Z. E. (2015). <em>The great psychotherapy debate: <span>The</span> evidence for what makes psychotherapy work</em>. Routledge.
</div>
<div id="ref-wingenfeld2010" class="csl-entry" role="listitem">
Wingenfeld, K., Spitzer, C., Mensebach, C., Grabe, H., Hill, A., Gast, U., Schlosser, N., Höpp, H., Beblo, T., &amp; Driessen, M. (2010). Die deutsche Version des Childhood Trauma Questionnaire (CTQ): Erste Befunde zu den psychometrischen Kennwerten. <em>PPmP - Psychotherapie · Psychosomatik · Medizinische Psychologie</em>, <em>60</em>(08), e13–e13. <a href="https://doi.org/10.1055/s-0030-1253494">https://doi.org/10.1055/s-0030-1253494</a>
</div>
<div id="ref-WorldHealthOrganization2017" class="csl-entry" role="listitem">
World Health Organization. (2017). <em>Depression and other common mental disorders: <span>Global</span> health estimates</em>.
</div>
<div id="ref-zirikly-etal-2019-clpsych" class="csl-entry" role="listitem">
Zirikly, A., Resnik, P., Uzuner, Ö., &amp; Hollingshead, K. (2019). <span>CLPsych</span> 2019 shared task: <span>Predicting</span> the degree of suicide risk in <span>Reddit</span> posts. In K. Niederhoffer, K. Hollingshead, P. Resnik, R. Resnik, &amp; K. Loveys (Eds.), <em>Proceedings of the sixth workshop on computational linguistics and clinical psychology</em> (pp. 24–33). Association for Computational Linguistics. <a href="https://doi.org/10.18653/v1/W19-3003">https://doi.org/10.18653/v1/W19-3003</a>
</div>
</div>
</section>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>  </div> <!-- /content -->  <script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script> 
  
</body></html>